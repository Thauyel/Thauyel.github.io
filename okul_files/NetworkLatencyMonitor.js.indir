function TrackNetworkLatency(e){new NetworkLatencyMonitor({measurePeriod:864e5,networkLatencyPingUrl:e.networkLatencyPingUrl,networkLatencySaveMeasureUrl:e.networkLatencySaveMeasureUrl}).Start(15e3)}function NetworkLatencyMonitor(e){this._measurePeriods=e.measurePeriod,this._timerStartTime=null,this._timerEndTime=null,this._cookieKeyNetworkLatency="trackNetworkLatency",this._urlNetworkLatencyPing=e.networkLatencyPingUrl,this._urlNetworkLatencySaveMeasure=e.networkLatencySaveMeasureUrl}NetworkLatencyMonitor.prototype.Start=function(e){window.setTimeout(this.createHandler(this,this.Measure),e)},NetworkLatencyMonitor.prototype.Measure=function(){this.getNowTime()-this.getTimeOfPrevMeasure()>=this._measurePeriods&&this.sendPingRequest()},NetworkLatencyMonitor.prototype.sendPingRequest=function(){this.startTimer(),this.callServer(this._urlNetworkLatencyPing,{},this.pingRequestOnSuccess)},NetworkLatencyMonitor.prototype.sendSaveMeasureRequest=function(e){var t={NetworkLatency:e};this.callServer(this._urlNetworkLatencySaveMeasure,t,this.saveMeasureOnSuccess)},NetworkLatencyMonitor.prototype.pingRequestOnSuccess=function(){this.stopTimer();var e=this.getTimerValue();this.sendSaveMeasureRequest(e)},NetworkLatencyMonitor.prototype.saveMeasureOnSuccess=function(){this.setTimeOfPrevMeasure(this.getNowTime()),this.Start(this._measurePeriods)},NetworkLatencyMonitor.prototype.getTimeOfPrevMeasure=function(){var e=this.readCookie(this._cookieKeyNetworkLatency);return null!=e?e:0},NetworkLatencyMonitor.prototype.setTimeOfPrevMeasure=function(e){var t=this.getNowTime()+this._measurePeriods;this.setCookie(this._cookieKeyNetworkLatency,e,t)},NetworkLatencyMonitor.prototype.setCookie=function(e,t,r){var o="";if(r){var n=new Date;n.setTime(r);o="; expires="+n.toGMTString()}document.cookie=e+"="+t+o+"; path=/"},NetworkLatencyMonitor.prototype.readCookie=function(e){for(var t=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var n=r[o];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null},NetworkLatencyMonitor.prototype.startTimer=function(){this._timerStartTime=new Date},NetworkLatencyMonitor.prototype.stopTimer=function(){this._timerEndTime=new Date},NetworkLatencyMonitor.prototype.getTimerValue=function(){return this._timerEndTime.getTime()-this._timerStartTime.getTime()},NetworkLatencyMonitor.prototype.callServer=function(e,t,r){CCL.CommonFunctions.safeAjaxPost({url:e,data:t}).done(this.createHandler(this,r))},NetworkLatencyMonitor.prototype.createHandler=function(e,t){return function(){return t.apply(e,arguments)}},NetworkLatencyMonitor.prototype.getNowTime=function(){return(new Date).getTime()};