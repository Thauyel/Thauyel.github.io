function Notifications(t){window[t]=this;var e=this;function s(){return window[e.settings.previewModalClientId]}function i(t){t.status>=CCL.CommonConstants.httpStatusCodes.badRequest&&($.alerts.okButton=e.settings.terms.ok,jAlert(e.settings.terms.errorMessage,e.settings.terms.alertDialogTitle),CssModal.closeDialog())}return e.initialize=function(t){e.settings=t},e.openPreviewTopicPlan=function(t,n){var a=e.settings.terms.loading,o=s();o.setIframeUrl(n),o.setIframeTitle(a);var r=o.getHeaderContainer()[0];r.getElementsByTagName("h2").length||r.prepend(document.createElement("h2")),o.setTitle(a),function(t){CCL.CommonFunctions.safeAjaxPost({url:e.settings.webMethods.getFavoriteInfoServiceUrl,data:{plannerShareableObjectId:t}}).done(function(n){!function(t,n,a,o){var r=s(),l=r.getHeader(),d=$("h2",l);if(d){if(d.empty(),o){var f=$("<a>").appendTo(d).prop("href","#").addClass(e.settings.css.favoriteLinkCss),g=$("<img>").appendTo(f).prop("src",e.settings.onePixelTransparentImageUrl).addClass(e.settings.css.favoriteBaseImgCss).prop("title",n?e.settings.terms.favoriteOnTooltip:e.settings.terms.favoriteOffTooltip);n||g.addClass(e.settings.css.favoriteOffImgCss),f.click(function(){var n=g.hasClass(e.settings.css.favoriteOffImgCss);return function(t,n){CCL.CommonFunctions.safeAjaxPost({url:e.settings.webMethods.plannerToggleFavoriteServiceUrl,data:{plannerShareableObjectId:t,makeFavorite:n}}).done(function(){!function(t){var i=s(),n=i.getHeader(),a=$("h2",n);if(a){var o=a.find("."+e.settings.css.favoriteBaseImgCss);t?o.removeClass(e.settings.css.favoriteOffImgCss).prop("title",e.settings.terms.favoriteOnTooltip):o.addClass(e.settings.css.favoriteOffImgCss).prop("title",e.settings.terms.favoriteOffTooltip)}}(n)}).fail(i)}(t,n),!1})}d.append(a)}}(t,n.isFavorite,n.title,n.isValid)}).fail(i)}(t),o.openDialog()},e.expandNewlyAddedElementsList=function(t,s,n){var a=$(t),o=a.closest("[data-"+e.settings.dataAttributes.listOfElementsPlaceholder+"]"),r=o.find("[data-"+e.settings.dataAttributes.listOfElements+"]");return r.length>0?r.toggle():a.data("clicked")||(a.data("clicked",!0),$.ajax({type:"GET",url:e.settings.webMethods.getElementsLinksUrl,timeout:2e3,data:{groupNotificationId:s,parentFolderId:n}}).done(function(t){o.append(t)}).fail(i)),!1},e}Notifications.openPreviewTopicPlan=function(t,e,s){return window[t].openPreviewTopicPlan(e,s)},Notifications.expandNewlyAddedElementsList=function(t,e,s,i){return window[t].expandNewlyAddedElementsList(e,s,i)};