!function(){var e,n=!1,t=".js-menuitem--dropdown.active div.active-shadow",o="aria-hidden",i=CCL.CommonConstants.keyCodes.escape,d=CCL.CommonConstants.keyCodes.enter,r=CCL.CommonConstants.keyCodes.tab,a=CCL.CommonConstants.mediaScreenSizes.mobile,s=$(".js-menuitem--dropdown"),c="courses",l="data-projects-dropdown",u="data-project-dropdown",p="data-children-dropdown";document.hideDropDowns=hideDropDowns=function(){$(".js-menuitem--dropdown > div").hide(),$(t).show(),$("ul.l-main-menu-items li.l-tab-menu-text a.l-main-menu-lnk").removeClass("hover")},$(".js-menuitem--dropdown > button").on("keyup",function(e){e.which==CCL.CommonConstants.keyCodes.space&&$(e.currentTarget).click()});var f=CCL.CommonFunctions.isMobileDevice()?"touchstart":"click",w=CCL.CommonFunctions.isMobileDevice()?CommonTriggers.touchstartInInnerFrame:CommonTriggers.clickInInnerFrame;s.find(".js-titlesFilter").on("keyup",function(e){var n=$(e.currentTarget),t=n.parents("div[data-dropdown]"),o=t.find("[data-title]"),i=n.parent().find(".js-titlesFilter__clear"),r=t.find(".c-dropdownMenu__empty"),a=t.find(".c-dropdownMenu__content"),s=t.find(".c-dropdownMenu__skiplink"),c=e.currentTarget.value;e.which==d&&e.preventDefault();var l=e.currentTarget.value.toLowerCase();S(o,l)?(r.hide(),a.show(),s.show()):(r.show(),a.hide(),s.hide());0===c.length?i.hide():i.show(),t.find(".js-content").perfectScrollbar("update");var u=coursesSortDropdownScope.kpi;CommonFunctions.measureKpi(u.url,u.section,u.measures.search,u.context)}),s.find(".js-titlesFilter__clear").on(f,function(e){e.preventDefault();var n=$(e.currentTarget).parents("div[data-dropdown]");return n.find("[data-title]").each(function(e,n){$(n).show()}),n.find(".c-dropdownMenu__empty").hide(),n.find(".c-dropdownMenu__content").show(),n.find(".js-titlesFilter").val(""),n.find(".js-content").perfectScrollbar("update"),$(this).hide(),e.currentTarget.previousElementSibling.focus(),!1}),s.children("button[data-action]").on(f,function(i){var d=$(i.currentTarget);if(d.parents("li.l-more-menu-btn").length)return;i.preventDefault();var r=d.next();if(r.is(":visible"))return void C(r);$(".ccl-context-dialog").not(r).not(".static").hide(),"false"===$(".c-messages-popup").attr(o)&&$(".c-messages__overlay").click();r.show(),$(document).on(w,v),$("body").get(0).addEventListener(f,h,!0),(e=d.parent().hasClass("active"))?$(t).toggle():$(t).show(),r.attr(o,!1),$(".ccl-context-dialog").not(r).not(".static").attr(o,!0);var a=r.hasClass("js-onboarding");if(r.find(".js-content").length>0||n||a)j(r);else{n=!0;var s=d.data("action"),l=r.find(".c-spinner-bounce"),m=r.data("dropdown")+"_"+r.data("personid"),k=JSON.parse(localStorage.getItem(m));$.get("/TopMenu/TopMenu/"+s).then(function(e){l.hide(),r.append(e);var t=r.find("[data-title]"),o=r.find(".js-titlesFilter");o.length&&""!==o.val()&&S(t,o.val().toLowerCase()),t.length>5?(r.find(".c-search").css("visibility","visible"),r.find(".c-dropdown").css("visibility","visible")):k&&(k.sortField="lastUpdated");var i=r.find(".js-content");if(i.perfectScrollbar({suppressScrollX:!0}),i.find(".ps-scrollbar-y-rail").css("opacity",.6),i.find(".ps-scrollbar-y").attr("tabindex",-1),i.perfectScrollbar("update"),n=!1,$(".js-menuitem--dropdown").find(".c-dropdownMenu, .c-dropdownMenu__content").on(f,b),null!==k){if(r.find(".c-dropdown > select").val(k.sortField),"title"===k.sortField){var d=t.find('[data-column="lastUpdated"]');d.siblings("[data-column]").each(M),d.each(F)}else{var a=t.find('[data-column="'+k.sortField+'"]');a.siblings("[data-column]").each(M),a.each(F)}"title"===k.sortField?D(t,k.sortField):D(t,k.sortField,!0),t.detach().appendTo(r.find(".c-dropdownMenu__content > ul"))}$firstEl=L(r),dropdownAttribute=r.data().dropdown,dropdownAttribute!=p?($allLink=r.find(".c-dropdownMenu__all:not(.c-dropdownMenu__skiplink)"),$allLink.keydown($firstEl,_),$firstEl.keydown($allLink,y)):($lastLink=r.find(".c-dropdownMenu__content > ul > li > a").last(),$lastLink.keydown($firstEl,_),$firstEl.keydown($lastLink,y)),dropdownAttribute!=c&&dropdownAttribute!=u&&r.find(".c-dropdownMenu__skiplink").hide(),j(r)})}r.keyup({button:d,dropdown:r},g)}),s.find(".c-dropdown > select").on("change",function(e){var n=e.currentTarget,t=$(n).parents(".c-dropdownMenu"),o=t.find("[data-title]"),i=t.data("dropdown"),d=t.data("personid"),r=i+"_"+d,a=(JSON.parse(localStorage.getItem(r)),n.options[n.selectedIndex].value);if(localStorage.setItem(r,JSON.stringify({sortField:a})),"title"===a){var s=o.find('[data-column="lastUpdated"]');s.siblings("[data-column]").each(M),s.each(F)}else{var c=o.find('[data-column="'+a+'"]');c.siblings("[data-column]").each(M),c.each(F)}"title"===a?D(o,a):D(o,a,!0),o.detach().appendTo(t.find(".c-dropdownMenu__content > ul")),t.find(".c-dropdown-menu").slideUp()});var m=new CCL.CallbackDebouncer(function(e){$(window).width()<=a&&hideDropDowns()});function h(n){$(n.target).parents(".js-menuitem--dropdown").length>0||(k(),$(".js-menuitem--dropdown > div").hide(),e&&$(t).toggle(),e=!1)}function v(n){k(),$(".js-menuitem--dropdown > div").hide(),e&&$(t).toggle(),e=!1}function b(e){0===$(e.target).parents(".c-dropdown").length&&$(this).parents(".js-menuitem--dropdown").find(".c-dropdown-menu").hide()}function g(e){e.keyCode==i&&(e.preventDefault(),C(e.data.dropdown),e.data.button.focus())}function C(n){n.hide(),$(t).show(),e=!1}function k(){$("body").get(0).removeEventListener(f,h,!0),$(document).off(w,v)}function _(e){e.keyCode!=r||e.shiftKey||(e.preventDefault(),e.data.focus())}function y(e){e.keyCode==r&&e.shiftKey&&(e.preventDefault(),e.data.focus())}function j(e){el=L(e),el&&el.focus()}function L(e){if(dropdownAttribute=e.data().dropdown,dropdownAttribute===u||dropdownAttribute===p)return e.find("a:not(.c-dropdownMenu__skiplink):first");if(dropdownAttribute===l)return e.find("h3:first");if(dropdownAttribute===c){var n=e.find(".c-search")[0],t=e.find(".c-dropdown:visible")[0],o=e.find("#course-add-btn:visible")[0],i=e.find(".c-dropdown--emptyState:visible")[0];return n&&"hidden"!==n.style.visibility?$(n.children[0]):t&&"hidden"!==n.style.visibility?$(t.children[0]):o?$(o):i?$(i):e.find('li[role="menuitem"] > a').first()}return null}function S(e,n){var t=!1;return e.each(function(e,o){-1==$(o).data().title.toString().toLowerCase().indexOf(n)?$(o).hide():($(o).show(),t=!0)}),t}function F(e,n){$column=$(n),$column.show()}function M(e,n){$column=$(n),$column.hide()}function D(e,n,t){var o=coursesSortDropdownScope.kpi;CommonFunctions.measureKpi(o.url,o.section,o.measures[n],o.context),t=t||!1,e.sort(function(e,o){e=e.getAttribute("data-"+n).toLowerCase(),o=o.getAttribute("data-"+n).toLowerCase();if("title"!==n&&(e=parseInt(e),o=parseInt(o)),t){if(e>o)return-1;if(e<o)return 1}else{if(e>o)return 1;if(e<o)return-1}return 0})}$(window).on("resize",function(){m.invokeCallback(null,100)})}();