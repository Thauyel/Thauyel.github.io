var hf=Object.defineProperty;var gf=(n,e,t)=>e in n?hf(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ct=(n,e,t)=>(gf(n,typeof e!="symbol"?e+"":e,t),t);/* empty css                *//* empty css                  */(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();const re=window.IM2Config;function we(){}function Nt(n,e){for(const t in e)n[t]=e[t];return n}function vr(n){return n()}function tl(){return Object.create(null)}function nn(n){n.forEach(vr)}function ei(n){return typeof n=="function"}function Le(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let ts;function Rt(n,e){return n===e?!0:(ts||(ts=document.createElement("a")),ts.href=e,n===ts.href)}function _f(n){return Object.keys(n).length===0}function Sr(n,...e){if(n==null){for(const i of e)i(void 0);return we}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function bf(n){let e;return Sr(n,t=>e=t)(),e}function yi(n,e,t){n.$$.on_destroy.push(Sr(e,t))}function Qn(n,e,t,i){if(n){const s=Er(n,e,t,i);return n[0](s)}}function Er(n,e,t,i){return n[1]&&i?Nt(t.ctx.slice(),n[1](i(e))):t.ctx}function xn(n,e,t,i){if(n[2]&&i){const s=n[2](i(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const l=[],a=Math.max(e.dirty.length,s.length);for(let o=0;o<a;o+=1)l[o]=e.dirty[o]|s[o];return l}return e.dirty|s}return e.dirty}function $n(n,e,t,i,s,l){if(s){const a=Er(e,t,i,l);n.p(a,s)}}function et(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function pf(n){const e={};for(const t in n)e[t]=!0;return e}function jt(n,e,t){return n.set(t),e}function wf(n){return n&&ei(n.destroy)?n.destroy:we}const Ws=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function S(n,e){n.appendChild(e)}function P(n,e,t){n.insertBefore(e,t||null)}function R(n){n.parentNode&&n.parentNode.removeChild(n)}function Vn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function B(n){return document.createElement(n)}function kf(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ge(n){return document.createTextNode(n)}function W(){return ge(" ")}function Ye(){return ge("")}function Q(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function Tf(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function m(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}const Mf=["width","height"];function zn(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const i in e)e[i]==null?n.removeAttribute(i):i==="style"?n.style.cssText=e[i]:i==="__value"?n.value=n[i]=e[i]:t[i]&&t[i].set&&Mf.indexOf(i)===-1?n[i]=e[i]:m(n,i,e[i])}function yf(n,e){Object.keys(e).forEach(t=>{_n(n,t,e[t])})}function _n(n,e,t){const i=e.toLowerCase();i in n?n[i]=typeof n[i]=="boolean"&&t===""?!0:t:e in n?n[e]=typeof n[e]=="boolean"&&t===""?!0:t:m(n,e,t)}function If(n){return/-/.test(n)?yf:zn}function Cf(n){let e;return{p(...t){e=t,e.forEach(i=>n.push(i))},r(){e.forEach(t=>n.splice(n.indexOf(t),1))}}}function Ar(n){return n===""?null:+n}function vf(n){return Array.from(n.childNodes)}function Te(n,e){e=""+e,n.data!==e&&(n.data=e)}function hn(n,e){n.value=e??""}function Sf(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,i?"important":"")}function oe(n,e,t){n.classList.toggle(e,!!t)}function Ef(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}class zs{constructor(e=!1){Ct(this,"is_svg",!1);Ct(this,"e");Ct(this,"n");Ct(this,"t");Ct(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=kf(t.nodeName):this.e=B(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)P(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(R)}}let Zi;function ji(n){Zi=n}function hs(){if(!Zi)throw new Error("Function called outside component initialization");return Zi}function nt(n){hs().$$.on_mount.push(n)}function Af(n){hs().$$.after_update.push(n)}function Qi(n){hs().$$.on_destroy.push(n)}function Qe(){const n=hs();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const l=Ef(e,t,{cancelable:i});return s.slice().forEach(a=>{a.call(n,l)}),!l.defaultPrevented}return!0}}function J(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const _i=[],le=[];let wi=[];const Ss=[],Br=Promise.resolve();let Es=!1;function Rr(){Es||(Es=!0,Br.then(Pr))}function ln(){return Rr(),Br}function As(n){wi.push(n)}function Be(n){Ss.push(n)}const ws=new Set;let mi=0;function Pr(){if(mi!==0)return;const n=Zi;do{try{for(;mi<_i.length;){const e=_i[mi];mi++,ji(e),Bf(e.$$)}}catch(e){throw _i.length=0,mi=0,e}for(ji(null),_i.length=0,mi=0;le.length;)le.pop()();for(let e=0;e<wi.length;e+=1){const t=wi[e];ws.has(t)||(ws.add(t),t())}wi.length=0}while(_i.length);for(;Ss.length;)Ss.pop()();Es=!1,ws.clear(),ji(n)}function Bf(n){if(n.fragment!==null){n.update(),nn(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(As)}}function Rf(n){const e=[],t=[];wi.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),wi=e}const as=new Set;let Zt;function me(){Zt={r:0,c:[],p:Zt}}function he(){Zt.r||nn(Zt.c),Zt=Zt.p}function I(n,e){n&&n.i&&(as.delete(n),n.i(e))}function A(n,e,t,i){if(n&&n.o){if(as.has(n))return;as.add(n),Zt.c.push(()=>{as.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function en(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Pf(n,e){A(n,1,1,()=>{e.delete(n.key)})}function Lf(n,e,t,i,s,l,a,o,r,u,f,d){let c=n.length,h=l.length,p=c;const _={};for(;p--;)_[n[p].key]=p;const y=[],k=new Map,g=new Map,b=[];for(p=h;p--;){const v=d(s,l,p),T=t(v);let E=a.get(T);E?i&&b.push(()=>E.p(v,e)):(E=u(T,v),E.c()),k.set(T,y[p]=E),T in _&&g.set(T,Math.abs(p-_[T]))}const w=new Set,M=new Set;function C(v){I(v,1),v.m(o,f),a.set(v.key,v),f=v.first,h--}for(;c&&h;){const v=y[h-1],T=n[c-1],E=v.key,N=T.key;v===T?(f=v.first,c--,h--):k.has(N)?!a.has(E)||w.has(E)?C(v):M.has(N)?c--:g.get(E)>g.get(N)?(M.add(E),C(v)):(w.add(N),c--):(r(T,a),c--)}for(;c--;){const v=n[c];k.has(v.key)||r(v,a)}for(;h;)C(y[h-1]);return nn(b),y}function ni(n,e){const t={},i={},s={$$scope:1};let l=n.length;for(;l--;){const a=n[l],o=e[l];if(o){for(const r in a)r in o||(i[r]=1);for(const r in o)s[r]||(t[r]=o[r],s[r]=1);n[l]=o}else for(const r in a)s[r]=1}for(const a in i)a in t||(t[a]=void 0);return t}function Re(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function ie(n){n&&n.c()}function ne(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),As(()=>{const l=n.$$.on_mount.map(vr).filter(ei);n.$$.on_destroy?n.$$.on_destroy.push(...l):nn(l),n.$$.on_mount=[]}),s.forEach(As)}function te(n,e){const t=n.$$;t.fragment!==null&&(Rf(t.after_update),nn(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Nf(n,e){n.$$.dirty[0]===-1&&(_i.push(n),Rr(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function De(n,e,t,i,s,l,a=null,o=[-1]){const r=Zi;ji(n);const u=n.$$={fragment:null,ctx:[],props:l,update:we,not_equal:s,bound:tl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:tl(),dirty:o,skip_bound:!1,root:e.target||r.$$.root};a&&a(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(d,c,...h)=>{const p=h.length?h[0]:c;return u.ctx&&s(u.ctx[d],u.ctx[d]=p)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](p),f&&Nf(n,d)),c}):[],u.update(),f=!0,nn(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const d=vf(e.target);u.fragment&&u.fragment.l(d),d.forEach(R)}else u.fragment&&u.fragment.c();e.intro&&I(n.$$.fragment),ne(n,e.target,e.anchor),Pr()}ji(r)}class Ue{constructor(){Ct(this,"$$");Ct(this,"$$set")}$destroy(){te(this,1),this.$destroy=we}$on(e,t){if(!ei(t))return we;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!_f(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ff="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ff);function Of(n){const e=t=>{n.contains(t.target)||n.dispatchEvent(new CustomEvent("outClick",{detail:{previousEvent:t}}))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}class Df extends Error{constructor(e,t){super(e),this.response=t}}const Pt=Object.freeze({ok:200,created:201,accepted:202,nonAuthoritativeInformation:203,noContent:204,resetContent:205,partialContent:206,multipleChoices:300,movedPermanently:301,found:302,seeOther:303,notModified:304,useProxy:305,temporaryRedirect:307,badRequest:400,unauthorized:401,paymentRequired:402,forbidden:403,notFound:404,methodNotAllowed:405,notAcceptable:406,proxyAuthenticationRequired:407,requestTimeout:408,conflict:409,gone:410,internalServerError:500,notImplemented:501,badGateway:502,serviceUnavailable:503,gatewayTimeout:504,httpVersionNotSupported:505});function gs(n,e,t={}){return new Promise((i,s)=>{fetch(n,vi("POST",JSON.stringify(e),t)).then(Ci).then(i).catch(s)})}function xi(n,e,t={}){return new Promise((i,s)=>{fetch(n,vi("PUT",JSON.stringify(e),t)).then(Ci).then(i).catch(s)})}function Uf(n,e,t={}){return new Promise((i,s)=>{fetch(n,vi("PATCH",JSON.stringify(e),t)).then(Ci).then(i).catch(s)})}function Vs(n,e,t={}){return new Promise((i,s)=>{fetch(n,vi("DELETE",JSON.stringify(e),t)).then(Ci).then(i).catch(s)})}function gt(n,e={}){return new Promise((t,i)=>{fetch(n,vi("GET",void 0,e)).then(Ci).then(t).catch(i)})}function Ci(n){if(!n.ok)throw new Df(n.statusText,n);return n.status===Pt.noContent?new Promise(e=>e(void 0)):n.clone().json().catch(()=>n.text())}function vi(n,e,t){return{method:n,mode:t.mode!==void 0?t.mode:"cors",cache:t.cache!==void 0?t.cache:"default",credentials:t.credentials!==void 0?t.credentials:"same-origin",headers:Object.assign({"Content-Type":"application/json; charset=utf-8"},t.headers),body:e}}const st=re.i18n,Hf=200,il=15,xt=Object.freeze({default:15,searchResults:25}),Ii=Object.freeze({none:"None",shared:"Shared",replied:"Replied",abuseReported:"AbuseReported",abuseReportedThread:"AbuseReportedThread"}),Oe=Object.freeze({course:"Course",group:"Group",oneToOne:"OneToOne",project:"Project",groupPlaceHolder:"GroupPlaceHolder",collaboration:"Collaboration"}),On=Object.freeze({none:1,oneWay:2,broadcast:3}),Jt=Object.freeze({conversation:1,conversationSettings:2,newMessage:3}),fn=Object.freeze({threadList:1,conversation:2,newMessage:3,search:4}),Se=Object.freeze({loading:1,session:2,connection:3,personNotAvailable:4,editFailed:5,deleteFailed:6,messageTextInvalid:7,participantsInvalid:8,participantDeleteFailed:9,sendingMessageToMoreThanMaxPersonsPerThread:10,genericErrorMessage:11,closeOpenConversation:12,errorAttachmentsExceedCombinedMaximumAllowedFileSize:13,errorWithSomeIndividualAttachment:14}),Wf=Object.freeze({[Se.loading]:st.errorMessage,[Se.session]:st.loggedOutError,[Se.connection]:st.offlineError,[Se.personNotAvailable]:st.errorMessage,[Se.editFailed]:st.editErrorMessage,[Se.deleteFailed]:st.deleteErrorMessage,[Se.messageTextInvalid]:st.messagesEmptyMessageError,[Se.participantsInvalid]:st.messagesEmptyRecipientsError,[Se.participantDeleteFailed]:st.errorMessage,[Se.sendingMessageToMoreThanMaxPersonsPerThread]:st.errorMessage,[Se.genericErrorMessage]:st.errorMessage,[Se.closeOpenConversation]:st.errorMessage}),dt=Object.freeze({delete:1,edit:2,forward:3,markAsUnread:4}),Tn=Object.freeze({first:1,last:2}),yn=Object.freeze({person:"Person",course:"Course",project:"Project"}),is=Object.freeze({sendIndividually:1,sendToGroupConversation:2}),Ae=Object.freeze({renameConversation:1,reportAbuse:2,leaveConversation:4,blockMessages:5,unblockConversation:6,closeConversation:7,deleteConversation:8,reopenConversation:9,delete360ReportThread:10,searchInConversation:11,markAsUnread:12}),sl=Object.freeze({remove:1}),mt=Object.freeze({default:1,forward:2}),Yt=Object.freeze({singleMessage:1,conversation:2}),zf=Object.freeze({student:2,teacher:3}),ks=Object.freeze({MarkMessageAsRead:"MarkMessageAsRead",MarkMessageAsUnread:"MarkMessageAsUnread",MarkConversationAsUnread:"MarkConversationAsUnread"}),tt=()=>({headers:{[re.antiForgeryHeaderSettings.headerName]:re.antiForgeryHeaderSettings.headerValue}}),ll=n=>gt(`/restapi/personal/instantmessages/messagethreads/v4?pageSize=${xt.default}${n?`&fromSortIndex=${n}`:""}`),al=(n,e,t=xt.default)=>gt(`/restapi/personal/instantmessages/messagethreads/${n}/messages/v3?pageSize=${t}${e?`&fromId=${e}`:""}`),qs=n=>gs("/restapi/personal/instantmessages/v2",n,tt()),Vf=(n,e)=>qs({InstantMessageThreadId:n,Text:e}),qf=(n,e)=>qs({InstantMessageThreadId:n,FileIds:e}),Lr=({courseIds:n=[],originInstantMessageId:e=null,originMessageThreadId:t=null,projectIds:i=[],referencedInstantMessageType:s=Ii.none,sendAsIndividualMessages:l=!1,text:a="",toPersonIds:o=[]}={})=>qs({CourseIds:n,OriginInstantMessageId:e,OriginMessageThreadId:t,ProjectIds:i,ReferencedInstantMessageType:s,SendAsIndividualMessages:l,Text:a,ToPersonIds:o}),Xf=n=>{const e=new FormData;for(const[i,s]of Array.from(n).entries())e.append(`fileAttachment${i}`,s);const t=vi("POST",e,tt());return delete t.headers["Content-Type"],new Promise((i,s)=>{fetch("/restapi/personal/instantmessages/attachment/v1",t).then(Ci).then(i).catch(s)})},ol=()=>gt("/restapi/personal/instantmessages/messagethreads/unread/count/v1"),Kf=(n,e,t,i)=>xi(`/restapi/personal/instantmessages/messagethreads/${n}/updatelastread/${e}/v1?sortIndex=${t}&operation=${i}`,{},tt()),jf=n=>Vs(`/restapi/personal/instantmessages/${n}/v1`,{},tt()),Yf=(n,e)=>Uf("/restapi/personal/instantmessages/v1",{InstantMessageId:n,Text:e},tt()),Gf=n=>{const e=new URLSearchParams;for(const[t,i]of Object.entries(n))e.set(t,String(i));return gt(`/restapi/personal/instantmessages/recipients/v2?${e.toString()}`)},Zf=n=>gs("/restapi/personal/instantmessages/recipients/persons/v1",n,tt()),Jf=n=>gt(`/restapi/personal/instantmessages/messagethreads/collaborations/${n}/v1`);function Nr({searchText:n="",instantMessageThreadId:e=void 0,recipientRoles:t=void 0}={}){let i=`/restapi/personal/instantmessages/recipients/search/v1?searchText=${encodeURIComponent(n)}`;return e&&(i+=`&instantMessageThreadId=${e}`),t&&(i+=`&recipientRoles=${encodeURIComponent(t)}`),gt(i)}function Qf(n){return gt(`/restapi/personal/instantmessages/messagethreads/${n}/participants/messages-disabled/v1`)}const xf=(n,e)=>gt(`/restapi/personal/instantmessages/messagethreads/${n}/messages/search/v1?searchText=${encodeURIComponent(e)}`),$f=({attachmentFilter:n=null,maxThreadCount:e=xt.default,searchText:t=null,sentFilter:i=null,threadPageIndex:s=0,unreadFilter:l=null}={})=>gs("/restapi/personal/instantmessages/messagethreads/search/v1",{attachmentFilter:n!==!0?void 0:!0,threadPage:s,maxThreadCount:e,searchText:t,sentFilter:i!==!0?void 0:!0,unreadFilter:l!==!0?void 0:!0},tt()),ed=n=>gt(`/restapi/personal/instantmessages/messagethreads/suggestions/v1?searchText=${encodeURIComponent(n)}`),Fr=(n,e)=>xi(`/restapi/personal/instantmessages/messagethreads/${n}/v1`,e,tt()),Or=(n,...e)=>Vs(`/restapi/personal/instantmessages/messagethreads/${n}/participants/v1`,{PersonIds:e},tt()),nd=(n,e)=>xi(`/restapi/personal/instantmessages/messagethreads/${n}/toggleEnableDisableReplies/v1`,{InstantMessageThreadId:n,RepliesAreEnabled:!e,ToggleEnableDisableReplies:!0},tt()),td=n=>xi(`/restapi/personal/instantmessages/togglepersonblock/${n}/v1`,void 0,tt()),id=n=>Vs(`/restapi/personal/instantmessages/messagethreads/${n}/v1`,void 0,tt()),sd=(n,...e)=>xi(`/restapi/personal/instantmessages/messagethreads/${n}/moderators/v1`,{personIds:e,updateParticipants:!0,instantMessageThreadId:n},tt()),ld=n=>gt(`/restapi/personal/person/relations/${n}/v1`),ce={BACKSPACE:"Backspace",DOWN:"Down",ENTER:"Enter",ESCAPE:"Escape",LEFT:"Left",RIGHT:"Right",SHIFT:"Shift",SPACE:"Space",TAB:"Tab",UP:"Up"};function ad({url:n="/restapi/common/kpi/v1",section:e,measurement:t,context:i=null}){return gs(n,{measureSection:e,measurement:t,measureContext:i})}function Ke(n){switch(n){case"Down":case"ArrowDown":return ce.DOWN;case"Left":case"ArrowLeft":return ce.LEFT;case"Right":case"ArrowRight":return ce.RIGHT;case"Up":case"ArrowUp":return ce.UP;case"Enter":return ce.ENTER;case"Esc":case"Escape":return ce.ESCAPE;case"Spacebar":case" ":return ce.SPACE;case"Tab":return ce.TAB;case"Backspace":return ce.BACKSPACE;default:return n}}const hi=[];function Dr(n,e=we){let t;const i=new Set;function s(o){if(Le(n,o)&&(n=o,t)){const r=!hi.length;for(const u of i)u[1](),hi.push(u,n);if(r){for(let u=0;u<hi.length;u+=2)hi[u][0](hi[u+1]);hi.length=0}}}function l(o){s(o(n))}function a(o,r=we){const u=[o,r];return i.add(u),i.size===1&&(t=e(s,l)||we),o(n),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:s,update:l,subscribe:a}}const $t=Dr(!1),Gt=Dr(!0);function od(n,e,...t){if(!n)throw TypeError("Template not specified");if(typeof n!="string")throw TypeError("Template is not a string");return n.replace(e,(i,s)=>s in t?t[s]:i)}function $(n,...e){return od(n,/\{(\d+)\}/g,...e)}function Ve(n){if(typeof n!="string")throw new Error("Input `text` parameter should be a valid string.");const e={"&":"&amp;","<":"&lt;",">":"&gt;"};return n.replace(/[&<>]/g,t=>e[t])}function kn(n,...e){return $(Ve(n),...e.map(t=>`<b>${Ve(String(t))}</b>`))}function rt(n,e,t=void 0){if(!n&&!t)throw Error('Either "dispatch" or "addErrorHandler" property is obligatory.');const i=t??((s,l)=>n("raiseError",{errorType:s,errorText:l}));if(e.response)switch(e.response.status){case Pt.unauthorized:i(Se.session);break;default:i(Se.genericErrorMessage);break}else i(Se.genericErrorMessage)}function Ur(n){Ke(n.key)===ce.ENTER&&n.preventDefault()}function Hr(n){return`itsl-im2-conversation-message-${n}`}function Wr(n){return`${Hr(n)}-bubble`}function Yi(n,e,t){return Math.min(n,e)>t}const rd=re.i18n,ki=n=>({canShowParticipantsPage:n.CanShowParticipantsPage,cclCourseAvatarClass:n.ColorSchema??"",createdBy:n.CreatedBy,createdByTeacher:n.CreatedByTeacher,hasActiveParticipants:n.HasActiveParticipants,hasAnyMessage:n.Messages.EntityArray.length>0,hasCreatorInThread:n.HasCreatorInThread,id:n.InstantMessageThreadId,inactiveParticipantFullName:n.InactiveParticipantFullName,instantMessageLocationId:n.InstantMessageLocationId,is360ReportThread:n.CanDelete,isAbuseReportedByCurrentUser:n.IsAbuseReportedByCurrentUser,isBlocked:n.IsBlocked,isCurrentUserARecipientWithSourceLocation:n.IsCurrentUserARecipientWithSourceLocation,isThreadAdministrator:n.IsThreadAdministrator,isThreadModerator:n.IsThreadModerator,isUnread:us(n),lastReadInstantMessageId:n.LastReadInstantMessageId,locationTitles:Vr(n),massMessageType:n.MassMessageType,matchingMessageIds:n.MatchingMessageIds,name:zr(n),nameFromServer:n.Name,numberOfInactiveParticipants:n.NumberOfInactiveParticipants,onlyThreadAdminCanSendToThread:n.OnlyThreadAdminCanSendToThread,participants:n.Participants,participantsCount:n.ParticipantsCount,personFullNames:Xr(n.Participants),sortIndex:n.SortIndex,type:n.Type,userAllowToBlockThread:n.UserAllowToBlockThread});function zr(n){if(n.Name)return n.Name;const e=Vr(n).concat(Xr(n.Participants));return n.Type===Oe.oneToOne&&e.length>0?e[0]:e.length>2?e.join(re.constants.personNameSeparator):e.length===2?$(rd.threadNoOther,e[0],e[1]):e.length>0?e[0]:n.Participants.length>0?n.Participants[0].FullName:(console.log(`Unexpected participants count in threadId = ${n.InstantMessageThreadId}`),"")}const us=n=>!!n.LastMessage&&Yi(n.LastMessage.MessageId,n.SortIndex,n.LastReadInstantMessageId),Vr=n=>n.LocationRecipients&&n.LocationRecipients.map(e=>e.Title)||[];function qr(n){return n==null?void 0:n.filter(e=>e.PersonId!==re.personId&&e.PersonId>0)}function Xr(n){var e;return(e=qr(n))==null?void 0:e.map(t=>t.FullName)}function ht(n,e){return n==null?void 0:n.find(t=>t.PersonId!==e)}function ud(n){return n.OnlyThreadAdminCanSendToThread&&n.MassMessageType===On.none&&[Oe.course,Oe.group,Oe.collaboration].includes(n.Type)}const fd=re.i18n,rl=re.constants.cultureSpecificPeriodSeparator;function Kr(n){return n.map(({CanReceive:e,Code:t,ColorSchema:i,Id:s,Label:l,ParticipantsCount:a,ProfileImageUrl:o,RoleInHierarchyTitle:r,TypeName:u,UserName:f,ExtraUserInformation:d})=>({canReceive:u!==yn.person||e,cssIconClass:dd(u,i),icon:o,id:s,isUser:u===yn.person,label:l,participantsCount:a,secondLabel:cd(u,t,r,e,f,d),type:u,value:s}))}function jr(n){const e=n.filter(l=>!l.canReceive),t=n.filter(l=>l.canReceive),i=e.length>0,s=e.map(l=>l.label).join(re.constants.personNameSeparator);return{hasRecipientsWithMessagesDisabled:i,recipientNamesWithMessagesDisabled:s,recipientsWithMessagesEnabled:t}}function dd(n,e){switch(n){case yn.person:return null;case yn.course:return`course-hat ${e??""}`;case yn.project:return"itsl-im2-conversation-avatar itsl-im2-conversation-avatar--multiselector itsl-im2-conversation-avatar--project";default:throw Error(`Unknown recipientType: ${n}`)}}function cd(n,e,t,i,s,l){switch(n){case yn.course:return e;case yn.person:{const a=[l,s,t].filter(Boolean);return i||a.push(fd.messagesDisabled),a.length===1?a[0]:`${a.join(rl)}${rl.trimEnd()}`}default:return""}}const St={_count:0,get count(){const n=document.getElementById(re.instantMessageBadgeId);return this._count=parseInt(n==null?void 0:n.textContent,10)||0,this._count},set count(n){const e=document.getElementById(re.instantMessageBadgeId);e?(e.textContent=n>0?n:"",e.style.display=n>0?null:"none"):document.dispatchEvent(new CustomEvent("setBadge",{detail:{id:re.instantMessageButtonId,value:n}})),this._count=n}};function md(n){let e,t,i,s,l,a,o;return{c(){e=B("button"),t=B("span"),i=B("span"),s=ge(n[3]),m(i,"class",n[17]),m(t,"class","prom-button__text"),m(e,"aria-haspopup",n[6]),m(e,"aria-expanded",n[7]),m(e,"aria-label",n[13]),m(e,"aria-labelledby",n[9]),m(e,"aria-describedby",n[8]),m(e,"id",n[1]),m(e,"type",n[5]),m(e,"class",l="prom-button prom-button__"+n[0]+" "+n[2]+" "+n[15]+" "+n[16]),e.disabled=n[4],m(e,"data-active",n[14])},m(r,u){P(r,e,u),S(e,t),S(t,i),S(i,s),a||(o=[Q(e,"click",n[28]),Q(e,"focus",n[29]),Q(e,"blur",n[30]),Q(e,"keyup",n[31]),Q(e,"keydown",n[32])],a=!0)},p(r,u){u[0]&8&&Te(s,r[3]),u[0]&131072&&m(i,"class",r[17]),u[0]&64&&m(e,"aria-haspopup",r[6]),u[0]&128&&m(e,"aria-expanded",r[7]),u[0]&8192&&m(e,"aria-label",r[13]),u[0]&512&&m(e,"aria-labelledby",r[9]),u[0]&256&&m(e,"aria-describedby",r[8]),u[0]&2&&m(e,"id",r[1]),u[0]&32&&m(e,"type",r[5]),u[0]&98309&&l!==(l="prom-button prom-button__"+r[0]+" "+r[2]+" "+r[15]+" "+r[16])&&m(e,"class",l),u[0]&16&&(e.disabled=r[4]),u[0]&16384&&m(e,"data-active",r[14])},d(r){r&&R(e),a=!1,nn(o)}}}function hd(n){let e,t,i,s;return{c(){e=B("sl-button"),t=ge(n[3]),_n(e,"id",n[1]),_n(e,"size",n[18]),_n(e,"fill",n[11]),_n(e,"variant",n[12]),_n(e,"disabled",n[4]),_n(e,"buttontype",n[5]),_n(e,"aria-haspopup",n[6]),_n(e,"aria-expanded",n[7]),_n(e,"aria-label",n[13]),_n(e,"aria-labelledby",n[9]),_n(e,"aria-describedby",n[8])},m(l,a){P(l,e,a),S(e,t),i||(s=[Q(e,"click",n[23]),Q(e,"focus",n[24]),Q(e,"blur",n[25]),Q(e,"keyup",n[26]),Q(e,"keydown",n[27])],i=!0)},p(l,a){a[0]&8&&Te(t,l[3]),a[0]&2&&_n(e,"id",l[1]),a[0]&262144&&_n(e,"size",l[18]),a[0]&2048&&_n(e,"fill",l[11]),a[0]&4096&&_n(e,"variant",l[12]),a[0]&16&&_n(e,"disabled",l[4]),a[0]&32&&_n(e,"buttontype",l[5]),a[0]&64&&_n(e,"aria-haspopup",l[6]),a[0]&128&&_n(e,"aria-expanded",l[7]),a[0]&8192&&_n(e,"aria-label",l[13]),a[0]&512&&_n(e,"aria-labelledby",l[9]),a[0]&256&&_n(e,"aria-describedby",l[8])},d(l){l&&R(e),i=!1,nn(s)}}}function gd(n){let e;function t(l,a){return l[10]?hd:md}let i=t(n),s=i(n);return{c(){s.c(),e=Ye()},m(l,a){s.m(l,a),P(l,e,a)},p(l,a){i===(i=t(l))&&s?s.p(l,a):(s.d(1),s=i(l),s&&(s.c(),s.m(e.parentNode,e)))},i:we,o:we,d(l){l&&R(e),s.d(l)}}}function _d(n,e,t){let i,s,l,a,o,r,{type:u="basic"}=e,{iconOnly:f=!1}=e,{id:d=void 0}=e,{cssClass:c=""}=e,{text:h=""}=e,{large:p=!1}=e,{disabled:_=!1}=e,{loading:y=!1}=e,{htmlType:k="submit"}=e,{haspopup:g=void 0}=e,{expanded:b=void 0}=e,{ariaLabel:w=void 0}=e,{describedby:M=void 0}=e,{labelledby:C=void 0}=e,{useSL:v=!1}=e,T="solid",E="secondary";function N(ae){J.call(this,n,ae)}function F(ae){J.call(this,n,ae)}function L(ae){J.call(this,n,ae)}function O(ae){J.call(this,n,ae)}function j(ae){J.call(this,n,ae)}function ee(ae){J.call(this,n,ae)}function X(ae){J.call(this,n,ae)}function ue(ae){J.call(this,n,ae)}function ke(ae){J.call(this,n,ae)}function ye(ae){J.call(this,n,ae)}return n.$$set=ae=>{"type"in ae&&t(0,u=ae.type),"iconOnly"in ae&&t(19,f=ae.iconOnly),"id"in ae&&t(1,d=ae.id),"cssClass"in ae&&t(2,c=ae.cssClass),"text"in ae&&t(3,h=ae.text),"large"in ae&&t(20,p=ae.large),"disabled"in ae&&t(4,_=ae.disabled),"loading"in ae&&t(21,y=ae.loading),"htmlType"in ae&&t(5,k=ae.htmlType),"haspopup"in ae&&t(6,g=ae.haspopup),"expanded"in ae&&t(7,b=ae.expanded),"ariaLabel"in ae&&t(22,w=ae.ariaLabel),"describedby"in ae&&t(8,M=ae.describedby),"labelledby"in ae&&t(9,C=ae.labelledby),"useSL"in ae&&t(10,v=ae.useSL)},n.$$.update=()=>{n.$$.dirty[0]&1048576&&t(18,i=p?"lg":"md"),n.$$.dirty[0]&1&&(u==="basic"&&(t(11,T="outline"),t(12,E="primary")),u==="basic-negative"&&(t(11,T="solid"),t(12,E="secondary")),u==="primary"&&(t(11,T="solid"),t(12,E="primary")),u==="secondary"&&(t(11,T="outline"),t(12,E="secondary")),u==="destructive"&&(t(11,T="solid"),t(12,E="danger")),u==="plain"&&(t(11,T="ghost"),t(12,E="secondary"))),n.$$.dirty[0]&524288&&t(17,s=f?"prom-button__text--hidden":""),n.$$.dirty[0]&1048576&&t(16,l=p?"prom-button--large":""),n.$$.dirty[0]&2097152&&t(15,a=y?"prom-button--loading":""),n.$$.dirty[0]&2097168&&t(14,o=!y&&!_),n.$$.dirty[0]&4718600&&t(13,r=w||(f?h:void 0))},[u,d,c,h,_,k,g,b,M,C,v,T,E,r,o,a,l,s,i,f,p,y,w,N,F,L,O,j,ee,X,ue,ke,ye]}class Yn extends Ue{constructor(e){super(),De(this,e,_d,gd,Le,{type:0,iconOnly:19,id:1,cssClass:2,text:3,large:20,disabled:4,loading:21,htmlType:5,haspopup:6,expanded:7,ariaLabel:22,describedby:8,labelledby:9,useSL:10},null,[-1,-1])}}function bd(n){let e,t;return e=new Yn({props:{cssClass:"prom-icon-button "+n[17]+" "+n[15]+" "+n[4],disabled:n[0],haspopup:n[1],expanded:n[2],iconOnly:n[5],id:n[6],large:n[7],loading:n[8],text:n[9],type:n[11],htmlType:n[3],ariaLabel:n[12],labelledby:n[13],describedby:n[14]}}),e.$on("blur",n[29]),e.$on("click",n[30]),e.$on("focus",n[31]),e.$on("keyup",n[32]),e.$on("keydown",n[33]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&163856&&(l.cssClass="prom-icon-button "+i[17]+" "+i[15]+" "+i[4]),s[0]&1&&(l.disabled=i[0]),s[0]&2&&(l.haspopup=i[1]),s[0]&4&&(l.expanded=i[2]),s[0]&32&&(l.iconOnly=i[5]),s[0]&64&&(l.id=i[6]),s[0]&128&&(l.large=i[7]),s[0]&256&&(l.loading=i[8]),s[0]&512&&(l.text=i[9]),s[0]&2048&&(l.type=i[11]),s[0]&8&&(l.htmlType=i[3]),s[0]&4096&&(l.ariaLabel=i[12]),s[0]&8192&&(l.labelledby=i[13]),s[0]&16384&&(l.describedby=i[14]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function pd(n){let e,t;return e=new Yn({props:{cssClass:"prom-icon-button "+n[16],disabled:n[0],haspopup:n[1],expanded:n[2],iconOnly:n[5],id:n[6],large:n[7],loading:n[8],text:n[9],type:n[11],htmlType:n[3],ariaLabel:n[12],labelledby:n[13],describedby:n[14]}}),e.$on("blur",n[24]),e.$on("click",n[25]),e.$on("focus",n[26]),e.$on("keyup",n[27]),e.$on("keydown",n[28]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&65536&&(l.cssClass="prom-icon-button "+i[16]),s[0]&1&&(l.disabled=i[0]),s[0]&2&&(l.haspopup=i[1]),s[0]&4&&(l.expanded=i[2]),s[0]&32&&(l.iconOnly=i[5]),s[0]&64&&(l.id=i[6]),s[0]&128&&(l.large=i[7]),s[0]&256&&(l.loading=i[8]),s[0]&512&&(l.text=i[9]),s[0]&2048&&(l.type=i[11]),s[0]&8&&(l.htmlType=i[3]),s[0]&4096&&(l.ariaLabel=i[12]),s[0]&8192&&(l.labelledby=i[13]),s[0]&16384&&(l.describedby=i[14]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function wd(n){let e,t;return e=new Yn({props:{cssClass:"prom-icon-button "+n[15]+" "+n[4],disabled:n[0],haspopup:n[1],expanded:n[2],id:n[6],large:n[7],loading:n[8],text:n[9],type:n[11],htmlType:n[3],ariaLabel:n[12],labelledby:n[13],describedby:n[14]}}),e.$on("blur",n[19]),e.$on("click",n[20]),e.$on("focus",n[21]),e.$on("keyup",n[22]),e.$on("keydown",n[23]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&32784&&(l.cssClass="prom-icon-button "+i[15]+" "+i[4]),s[0]&1&&(l.disabled=i[0]),s[0]&2&&(l.haspopup=i[1]),s[0]&4&&(l.expanded=i[2]),s[0]&64&&(l.id=i[6]),s[0]&128&&(l.large=i[7]),s[0]&256&&(l.loading=i[8]),s[0]&512&&(l.text=i[9]),s[0]&2048&&(l.type=i[11]),s[0]&8&&(l.htmlType=i[3]),s[0]&4096&&(l.ariaLabel=i[12]),s[0]&8192&&(l.labelledby=i[13]),s[0]&16384&&(l.describedby=i[14]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function kd(n){let e,t,i,s;const l=[wd,pd,bd],a=[];function o(r,u){return r[10]&&r[5]?0:r[10]?1:2}return e=o(n),t=a[e]=l[e](n),{c(){t.c(),i=Ye()},m(r,u){a[e].m(r,u),P(r,i,u),s=!0},p(r,u){let f=e;e=o(r),e===f?a[e].p(r,u):(me(),A(a[f],1,1,()=>{a[f]=null}),he(),t=a[e],t?t.p(r,u):(t=a[e]=l[e](r),t.c()),I(t,1),t.m(i.parentNode,i))},i(r){s||(I(t),s=!0)},o(r){A(t),s=!1},d(r){r&&R(i),a[e].d(r)}}}function Td(n,e,t){let i,s,l,{disabled:a=!1}=e,{haspopup:o=void 0}=e,{expanded:r=void 0}=e,{htmlType:u="submit"}=e,{iconClass:f=""}=e,{iconOnly:d=!1}=e,{iconPlacement:c="start"}=e,{id:h=void 0}=e,{large:p=!1}=e,{loading:_=!1}=e,{text:y=""}=e,{textOnly:k=!1}=e,{type:g="basic"}=e,{ariaLabel:b=void 0}=e,{labelledby:w=void 0}=e,{describedby:M=void 0}=e;function C(K){J.call(this,n,K)}function v(K){J.call(this,n,K)}function T(K){J.call(this,n,K)}function E(K){J.call(this,n,K)}function N(K){J.call(this,n,K)}function F(K){J.call(this,n,K)}function L(K){J.call(this,n,K)}function O(K){J.call(this,n,K)}function j(K){J.call(this,n,K)}function ee(K){J.call(this,n,K)}function X(K){J.call(this,n,K)}function ue(K){J.call(this,n,K)}function ke(K){J.call(this,n,K)}function ye(K){J.call(this,n,K)}function ae(K){J.call(this,n,K)}return n.$$set=K=>{"disabled"in K&&t(0,a=K.disabled),"haspopup"in K&&t(1,o=K.haspopup),"expanded"in K&&t(2,r=K.expanded),"htmlType"in K&&t(3,u=K.htmlType),"iconClass"in K&&t(4,f=K.iconClass),"iconOnly"in K&&t(5,d=K.iconOnly),"iconPlacement"in K&&t(18,c=K.iconPlacement),"id"in K&&t(6,h=K.id),"large"in K&&t(7,p=K.large),"loading"in K&&t(8,_=K.loading),"text"in K&&t(9,y=K.text),"textOnly"in K&&t(10,k=K.textOnly),"type"in K&&t(11,g=K.type),"ariaLabel"in K&&t(12,b=K.ariaLabel),"labelledby"in K&&t(13,w=K.labelledby),"describedby"in K&&t(14,M=K.describedby)},n.$$.update=()=>{n.$$.dirty[0]&1056&&d&&k&&console.warn("The attributes iconOnly and textOnly cannot be both set to false."),n.$$.dirty[0]&262144&&(!c||typeof c!="string"||c!=="start"&&c!=="end")&&console.warn('Valid values for iconPlacement is "start" and "end".'),n.$$.dirty[0]&32&&t(17,i=d?"prom-icon-button--icon-only":""),n.$$.dirty[0]&1024&&t(16,s=k?"prom-icon-button--text-only":""),n.$$.dirty[0]&262144&&t(15,l=c==="end"?"prom-icon-button--icon-end":"")},[a,o,r,u,f,d,h,p,_,y,k,g,b,w,M,l,s,i,c,C,v,T,E,N,F,L,O,j,ee,X,ue,ke,ye,ae]}class Bn extends Ue{constructor(e){super(),De(this,e,Td,kd,Le,{disabled:0,haspopup:1,expanded:2,htmlType:3,iconClass:4,iconOnly:5,iconPlacement:18,id:6,large:7,loading:8,text:9,textOnly:10,type:11,ariaLabel:12,labelledby:13,describedby:14},null,[-1,-1])}}function ul(n){let e,t,i,s,l,a,o,r=n[5]&&fl(n),u=n[4]&&ml(n);return{c(){e=B("div"),t=B("div"),i=W(),s=B("span"),r&&r.c(),l=W(),u&&u.c(),m(t,"class","prom-banner__icon"),m(t,"aria-hidden","true"),m(s,"class","prom-banner__message"),m(s,"aria-live",n[6]),m(s,"role",n[7]),m(s,"aria-atomic","true"),m(e,"class",a="prom-banner prom-banner--"+n[1])},m(f,d){P(f,e,d),S(e,t),S(e,i),S(e,s),r&&r.m(s,null),S(e,l),u&&u.m(e,null),o=!0},p(f,d){f[5]?r?(r.p(f,d),d&32&&I(r,1)):(r=fl(f),r.c(),I(r,1),r.m(s,null)):r&&(me(),A(r,1,1,()=>{r=null}),he()),(!o||d&64)&&m(s,"aria-live",f[6]),(!o||d&128)&&m(s,"role",f[7]),f[4]?u?(u.p(f,d),d&16&&I(u,1)):(u=ml(f),u.c(),I(u,1),u.m(e,null)):u&&(me(),A(u,1,1,()=>{u=null}),he()),(!o||d&2&&a!==(a="prom-banner prom-banner--"+f[1]))&&m(e,"class",a)},i(f){o||(I(r),I(u),o=!0)},o(f){A(r),A(u),o=!1},d(f){f&&R(e),r&&r.d(),u&&u.d()}}}function fl(n){let e,t,i,s,l,a,o=n[2]&&dl(n),r=n[3]&&cl(n);const u=n[17].default,f=Qn(u,n,n[16],null);return{c(){e=B("span"),t=ge(n[8]),i=W(),o&&o.c(),s=W(),r&&r.c(),l=W(),f&&f.c(),m(e,"class","screen-reader")},m(d,c){P(d,e,c),S(e,t),P(d,i,c),o&&o.m(d,c),P(d,s,c),r&&r.m(d,c),P(d,l,c),f&&f.m(d,c),a=!0},p(d,c){(!a||c&256)&&Te(t,d[8]),d[2]?o?o.p(d,c):(o=dl(d),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null),d[3]?r?r.p(d,c):(r=cl(d),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),f&&f.p&&(!a||c&65536)&&$n(f,u,d,d[16],a?xn(u,d[16],c,null):et(d[16]),null)},i(d){a||(I(f,d),a=!0)},o(d){A(f,d),a=!1},d(d){d&&(R(e),R(i),R(s),R(l)),o&&o.d(d),r&&r.d(d),f&&f.d(d)}}}function dl(n){let e;return{c(){e=ge(n[2])},m(t,i){P(t,e,i)},p(t,i){i&4&&Te(e,t[2])},d(t){t&&R(e)}}}function cl(n){let e,t;return{c(){e=new zs(!1),t=Ye(),e.a=t},m(i,s){e.m(n[3],i,s),P(i,t,s)},p(i,s){s&8&&e.p(i[3])},d(i){i&&(R(t),e.d())}}}function ml(n){let e,t;return e=new Bn({props:{type:"plain",htmlType:"button",iconOnly:!0,text:n[9],iconClass:"close-button"}}),e.$on("click",n[10]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&512&&(l.text=i[9]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Md(n){let e,t,i=n[0]&&ul(n);return{c(){i&&i.c(),e=Ye()},m(s,l){i&&i.m(s,l),P(s,e,l),t=!0},p(s,[l]){s[0]?i?(i.p(s,l),l&1&&I(i,1)):(i=ul(s),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(me(),A(i,1,1,()=>{i=null}),he())},i(s){t||(I(i),t=!0)},o(s){A(i),t=!1},d(s){s&&R(e),i&&i.d(s)}}}function yd(n,e,t){let i,s,{$$slots:l={},$$scope:a}=e;const o=Qe();let{type:r="info"}=e,{visible:u=!1}=e,{text:f=null}=e,{html:d=null}=e,{close:c=null}=e,{closable:h=!0}=e,{infoText:p="information"}=e,{warningText:_="warning"}=e,{loadingText:y="loading"}=e,{successText:k="success"}=e,g=!1,b="",w="";function M(C){t(0,u=!1),o("hidden",{event:C})}return n.$$set=C=>{"type"in C&&t(1,r=C.type),"visible"in C&&t(0,u=C.visible),"text"in C&&t(2,f=C.text),"html"in C&&t(3,d=C.html),"close"in C&&t(11,c=C.close),"closable"in C&&t(4,h=C.closable),"infoText"in C&&t(12,p=C.infoText),"warningText"in C&&t(13,_=C.warningText),"loadingText"in C&&t(14,y=C.loadingText),"successText"in C&&t(15,k=C.successText),"$$scope"in C&&t(16,a=C.$$scope)},n.$$.update=()=>{n.$$.dirty&2064&&t(9,i=c||!h||console.warn("Banner close text is required but not included!")),n.$$.dirty&2&&t(6,b={info:"polite",warning:"assertive"}[r]||"polite"),n.$$.dirty&2&&t(7,w={info:"status",warning:"alert"}[r]||"status"),n.$$.dirty&61442&&t(8,s={info:p,warning:_,loading:y,success:k}[r]),n.$$.dirty&1&&nt(()=>{u&&setTimeout(()=>{t(5,g=u)},200)}),n.$$.dirty&1&&(u?setTimeout(()=>{t(5,g=!0)},100):t(5,g=!1))},[u,r,f,d,h,g,b,w,s,i,M,c,p,_,y,k,a,l]}class Qt extends Ue{constructor(e){super(),De(this,e,yd,Md,Le,{type:1,visible:0,text:2,html:3,close:11,closable:4,infoText:12,warningText:13,loadingText:14,successText:15})}}const Yr={[Ae.renameConversation]:Bd,[Ae.reportAbuse]:Pd,[Ae.leaveConversation]:Rd,[Ae.blockMessages]:Ld,[Ae.unblockConversation]:Od,[Ae.closeConversation]:Nd,[Ae.deleteConversation]:Fd,[Ae.reopenConversation]:ds,[Ae.delete360ReportThread]:xr,[Ae.searchInConversation]:Ed,[Ae.markAsUnread]:Ad};function Ti(n){return n.type===Oe.group}function Gr(n){return Ti(n)||n.type===Oe.collaboration}function fs(n){return n.type===Oe.oneToOne}function Xs(n){return n.type===Oe.groupPlaceHolder}function Lt(n){return n.massMessageType!==On.none}function $i(n){return n.massMessageType===On.broadcast}function Ks(n){return n.hasActiveParticipants&&!n.onlyThreadAdminCanSendToThread}function Id(n){return n.userAllowToBlockThread}function hl(n,e){return(n.isThreadAdministrator||n.isThreadModerator)&&e!==re.personId&&n.type===Oe.group&&n.massMessageType===On.none}function js(n){return n.isBlocked&&n.userAllowToBlockThread}function Cd(n){return Zr(n)&&!n.isBlocked}function Zr(n){return!n.onlyThreadAdminCanSendToThread&&!Lt(n)&&!Xs(n)&&n.hasActiveParticipants}function Jr(n){return!Zr(n)&&!Xs(n)&&!js(n)&&!$i(n)}function ds(n){return(n.isThreadAdministrator||n.isThreadModerator)&&Jr(n)&&n.hasActiveParticipants}function Qr(n){return Jr(n)&&!n.hasActiveParticipants}function ut(n,e){return Yr[n](e)}function Bs(n){return Object.values(Yr).some(e=>e(n))}function Ji(n){return!(xr(n)||Lt(n))}function vd(n){return Ji(n)||Bs(n)}function Ys(n){return re.constants.maxPersonsPerThread-n.participantsCount}function Sd(n){return Ys(n)===1}function cs(n){return Ys(n)===0}function xr(n){return n.instantMessageLocationId>0&&$i(n)&&n.createdBy===re.internalUserIds.system}function Ed(n){return!bf($t)&&n.hasAnyMessage&&!$i(n)}function Ad(n){return!n.isUnread&&n.hasAnyMessage}function Bd(n){return(Ti(n)||Xs(n)&&re.customerSettings.oneWayMassMessagesEnabled)&&(!re.isStudent||!n.createdByTeacher||!n.hasCreatorInThread)&&Ks(n)&&!$i(n)}function Rd(n){return Ti(n)&&!n.isCurrentUserARecipientWithSourceLocation&&(!re.isStudent||!n.createdByTeacher||!n.hasCreatorInThread)&&!Lt(n)}function Pd(n){return re.customerSettings.reportAbuseEnabled&&!n.isAbuseReportedByCurrentUser&&Gr(n)&&!Lt(n)&&!fs(n)}function $r(n){return re.customerSettings.userBlockingEnabled&&fs(n)&&Id(n)&&!Lt(n)}function Ld(n){return!js(n)&&$r(n)}function Nd(n){return(n.isThreadAdministrator||n.isThreadModerator)&&!Lt(n)&&Ks(n)}function Fd(n){return(n.isThreadModerator&&Gr(n)||(n.isThreadAdministrator||n.isThreadModerator)&&n.type===Oe.course)&&!$i(n)}function Od(n){return js(n)&&$r(n)}const ms=window.CryptoJS,Gs=window.localStorage,at={sending:1,editing:2};function gl(n,e){return Dd(Zs(n,e))}function Rs(n,e,t){return Ud(Zs(n,e),t)}function Gi(n,e){return Hd(Zs(n,e))}function Dd(n){const e=Gs.getItem(n);return e?ms.AES.decrypt(e,n).toString(ms.enc.Utf8):""}function Ud(n,e){Gs.setItem(n,ms.AES.encrypt(e,n).toString())}function Hd(n){Gs.removeItem(n)}function Zs(n,e){const t=`${re.customerId}_${re.personId}_${e}`;let i;switch(n){case at.sending:i=`itsl_im_d_${t}`;break;case at.editing:i=`itsl_im2_editing_draft_${t}`;break}return ms.MD5(i).toString()}const sn=re.i18n;function Wd(n,e,t,i){const s={0:{0:()=>({startText:"",emptyStateDescription:""}),1:()=>({startText:kn(sn.conversationWithX,n[0]),emptyStateDescription:$(sn.writeNewMessageTo,n[0])}),2:()=>({startText:kn(sn.conversationWithXAndY,n[0],n[1]),emptyStateDescription:$(sn.writeNewMessageToXAndY,n[0],n)}),3:()=>({startText:kn(sn.conversationWithXYAndZ,n[0],n[1],n[2]),emptyStateDescription:$(sn.writeNewMessageToXYAndZ,n[0],n[1],n[2])}),lotsOfPersons:()=>({startText:kn(sn.conversationWithXYZAndWMore,n[0],n[1],n[2],n.length-3),emptyStateDescription:$(sn.writeNewMessageToXYZAndWMore,n[0],n[1],n[2],n.length-3)})},1:{1:()=>({startText:kn(sn.conversationTheParticipantsInXAndY,e[0],n[0]),emptyStateDescription:$(sn.writeNewMessageToXAndY,e[0],n[0])}),2:()=>({startText:kn(sn.conversationTheParticipantsInXAsWellAsYAndZ,e[0],n[0],n[1]),emptyStateDescription:$(sn.writeNewMessageToXAsWellAsYAndZ,e[0],n[0],n[1])}),lotsOfPersons:()=>({startText:kn(sn.conversationTheParticipantsInXAsWellAsYZAndWMore,e[0],n[0],n[1],n.length-2),emptyStateDescription:$(sn.writeNewMessageToXAsWellAsYZAndWMore,e[0],n[0],n[1],n.length-2)})},2:{0:()=>({startText:kn(sn.conversationTheParticipantsInXAndY,e[0],e[1]),emptyStateDescription:$(sn.writeNewMessageToXAndY,e[0],e[1])}),1:()=>({startText:kn(sn.conversationTheParticipantsInXAndYAsWellAsZ,e[0],e[1],n[0]),emptyStateDescription:$(sn.writeNewMessageToXAndYAsWellAsZ,e[0],e[1],n[0])}),lotsOfPersons:()=>({startText:kn(sn.conversationTheParticipantsInXAndYAsWellAsZAndW,e[0],e[1],n[0],n.length-1),emptyStateDescription:$(sn.writeNewMessageToXAndYAsWellAsZAndWMore,e[0],e[1],n[0],n.length-1)})},3:{0:()=>({startText:kn(sn.conversationTheParticipantsInXYAndZ,e[0],e[1],e[2]),emptyStateDescription:$(sn.writeNewMessageToXYAndZ,e[0],e[1],e[2])}),lotsOfPersons:()=>({startText:kn(sn.conversationTheParticipantsInXYZAndWMore,e[0],e[1],e[2],n.length),emptyStateDescription:$(sn.writeNewMessageToXYZAndWMore,e[0],e[1],e[2],n.length)})},lotsOfLocations:{0:()=>({startText:kn(sn.conversationTheParticipantsInXYZAndWMore,e[0],e[1],e[2],e.length-3),emptyStateDescription:$(sn.writeNewMessageToXYZAndWMore,e[0],e[1],e[2],e.length-3)}),lotsOfPersons:()=>({startText:kn(sn.conversationTheParticipantsInXYZAndWMore,e[0],e[1],e[2],e.length+n.length-3),emptyStateDescription:$(sn.writeNewMessageToXYZAndWMore,e[0],e[1],e[2],e.length+n.length-3)})}},l=s[e.length]||s.lotsOfLocations;switch(t){case Oe.oneToOne:case Oe.group:return(l[n.length]||l.lotsOfPersons)();case Oe.course:case Oe.project:return{startText:kn(sn.conversationTheParticipantsInX,i),emptyStateDescription:$(sn.writeNewMessageTo,i)};default:return{startText:"",emptyStateDescription:""}}}const zd=re.constants.commaSeparator,bn=re.i18n;function Vd(n,e,t,i,s){if(s===0)if(n){const l=Ps(n);return i?e||t?$(Ve(bn.noResultsFoundForXStringInYFiltersWithAttachment),l,lt(e,t)):$(Ve(bn.noResultsFoundForXStringWithAttachment),l):e||t?$(Ve(bn.noResultsFoundForXStringInYFilters),l,lt(e,t)):$(Ve(bn.noResultsFoundForX),l)}else return i?e||t?$(Ve(bn.noResultsFoundInXFiltersWithAttachment),lt(e,t)):Ve(bn.noResultsFoundWithAttachment):e||t?$(Ve(bn.noResultsFoundInXFilters),lt(e,t)):"";else{const l=`<b>${Ve(String(s))}</b>`;if(n){const a=Ps(n);return i?e||t?$(Ve(bn.resultsForXStringInYFiltersWithAttachmentZCount),a,lt(e,t),l):$(Ve(bn.resultsForXStringWithAttachmentYCount),a,l):e||t?$(Ve(bn.resultsForXStringInYFiltersZCount),a,lt(e,t),l):$(Ve(bn.resultsForXStringYCount),a,l)}else return i?e||t?$(Ve(bn.resultsInXFiltersWithAttachmentYCount),lt(e,t),l):$(Ve(bn.resultsWithAttachmentXCount),l):e||t?$(Ve(bn.resultsInXFiltersYCount),lt(e,t),l):""}}function _l(n,e,t,i){if(n){const s=Ps(n);return i?e||t?$(Ve(bn.resultsForXStringInYFiltersWithAttachment),s,lt(e,t)):$(Ve(bn.resultsForXStringWithAttachment),s):e||t?$(Ve(bn.resultsForXStringInYFilters),s,lt(e,t)):$(Ve(bn.resultsForX),s)}else return i?e||t?$(Ve(bn.resultsInXFiltersWithAttachment),lt(e,t)):$(Ve(bn.resultsWithAttachment)):e||t?$(Ve(bn.resultsInXFilters),lt(e,t)):""}function Ps(n){const e=n.length>il?`${n.substring(0,il)}...`:n;return`<b>${Ve(e)}</b>`}function lt(n,e){const t=[];return n&&t.push(bn.unread),e&&t.push(bn.sentByMe),Ve(t.join(zd))}function Ls(n,e,t){let i;return function(...s){const l=t&&!i;window.clearTimeout(i),i=window.setTimeout(()=>{i=null,t||n.apply(this,s)},e),l&&n.apply(this,s)}}function Js(n){qd(n,Se.errorAttachmentsExceedCombinedMaximumAllowedFileSize,Se.errorWithSomeIndividualAttachment)}function qd(n,...e){n("resolveError",{errorTypes:e})}function Qs(n,e,t){const i=window.itslTop?window.itslTop:window.top;if(i.document.showProfileCard)e?i.document.showProfileCard(n,e):i.document.showProfileCard(n);else if(i.newProfileCardSupported){const s=new CustomEvent("openProfileCard",{detail:{personId:n,page:e}});i.document.dispatchEvent(s)}else{const s="resizable,scrollbars,height=500,width=750",l="_blank";window.open(t,l,s).focus()}}function bl(n,e,t){const i=n.slice();return i[9]=e[t],i[11]=t,i}function Xd(n){let e;return{c(){e=B("div"),m(e,"class","prom-avatar__image")},m(t,i){P(t,e,i)},p:we,d(t){t&&R(e)}}}function Kd(n){let e;function t(l,a){return typeof l[0]!="string"&&l[2]>1?Gd:l[5][0]?Yd:jd}let i=t(n),s=i(n);return{c(){s.c(),e=Ye()},m(l,a){s.m(l,a),P(l,e,a)},p(l,a){i===(i=t(l))&&s?s.p(l,a):(s.d(1),s=i(l),s&&(s.c(),s.m(e.parentNode,e)))},d(l){l&&R(e),s.d(l)}}}function jd(n){let e;return{c(){e=B("div"),m(e,"class","prom-avatar__image")},m(t,i){P(t,e,i)},p:we,d(t){t&&R(e)}}}function Yd(n){let e,t,i;return{c(){e=B("img"),m(e,"class","prom-avatar__image"),Rt(e.src,t=n[5][0])||m(e,"src",t),m(e,"alt",i=n[4][0]||"")},m(s,l){P(s,e,l)},p(s,l){l&32&&!Rt(e.src,t=s[5][0])&&m(e,"src",t),l&16&&i!==(i=s[4][0]||"")&&m(e,"alt",i)},d(s){s&&R(e)}}}function Gd(n){let e,t,i=en(n[5]),s=[];for(let l=0;l<i.length;l+=1)s[l]=pl(bl(n,i,l));return{c(){e=B("div");for(let l=0;l<s.length;l+=1)s[l].c();m(e,"class",t="prom-avatar__images "+n[3])},m(l,a){P(l,e,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(l,a){if(a&34){i=en(l[5]);let o;for(o=0;o<i.length;o+=1){const r=bl(l,i,o);s[o]?s[o].p(r,a):(s[o]=pl(r),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}a&8&&t!==(t="prom-avatar__images "+l[3])&&m(e,"class",t)},d(l){l&&R(e),Vn(s,l)}}}function Zd(n){let e;return{c(){e=B("div"),m(e,"class","prom-avatar__image")},m(t,i){P(t,e,i)},p:we,d(t){t&&R(e)}}}function Jd(n){let e,t,i;return{c(){e=B("img"),m(e,"class","prom-avatar__image"),Rt(e.src,t=n[9])||m(e,"src",t),m(e,"alt",i=n[1][n[11]]||"")},m(s,l){P(s,e,l)},p(s,l){l&32&&!Rt(e.src,t=s[9])&&m(e,"src",t),l&2&&i!==(i=s[1][s[11]]||"")&&m(e,"alt",i)},d(s){s&&R(e)}}}function pl(n){let e;function t(l,a){return l[9]?Jd:Zd}let i=t(n),s=i(n);return{c(){s.c(),e=Ye()},m(l,a){s.m(l,a),P(l,e,a)},p(l,a){i===(i=t(l))&&s?s.p(l,a):(s.d(1),s=i(l),s&&(s.c(),s.m(e.parentNode,e)))},d(l){l&&R(e),s.d(l)}}}function Qd(n){let e,t;function i(a,o){return a[2]?Kd:Xd}let s=i(n),l=s(n);return{c(){e=B("div"),l.c(),m(e,"class",t="prom-avatar "+n[6])},m(a,o){P(a,e,o),l.m(e,null)},p(a,[o]){s===(s=i(a))&&l?l.p(a,o):(l.d(1),l=s(a),l&&(l.c(),l.m(e,null))),o&64&&t!==(t="prom-avatar "+a[6])&&m(e,"class",t)},i:we,o:we,d(a){a&&R(e),l.d()}}}function wl(n){return Array.isArray(n)?n.slice(0,3):n}function xd(n,e,t){let i,s,l,a,o,{size:r=200}=e,{src:u=[]}=e,{alternativeText:f=[]}=e;function d(c){switch(c){case 1:return"prom-avatar--1";case 2:return"prom-avatar--2";default:return"prom-avatar--3"}}return n.$$set=c=>{"size"in c&&t(7,r=c.size),"src"in c&&t(0,u=c.src),"alternativeText"in c&&t(1,f=c.alternativeText)},n.$$.update=()=>{n.$$.dirty&128&&t(6,i=`prom-avatar--${r}`),n.$$.dirty&1&&t(2,s=u?u.length:void 0),n.$$.dirty&1&&t(5,l=typeof u=="string"?[u]:wl(u)),n.$$.dirty&2&&t(4,a=typeof f=="string"?[f]:wl(f)),n.$$.dirty&5&&t(3,o=typeof u=="string"?"":d(s))},[u,f,s,o,a,l,i,r]}class es extends Ue{constructor(e){super(),De(this,e,xd,Qd,Le,{size:7,src:0,alternativeText:1})}}function $d(n){let e;return{c(){e=B("div"),m(e,"class","itsl-im2-conversation-avatar "+n[7]())},m(t,i){P(t,e,i)},p:we,i:we,o:we,d(t){t&&R(e)}}}function ec(n){let e,t;return{c(){e=B("div"),m(e,"class",t="course-hat "+(n[0]??""))},m(i,s){P(i,e,s)},p(i,s){s&1&&t!==(t="course-hat "+(i[0]??""))&&m(e,"class",t)},i:we,o:we,d(i){i&&R(e)}}}function nc(n){let e,t;return e=new es({props:{size:n[1],src:n[2]}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&2&&(l.size=i[1]),s&4&&(l.src=i[2]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function tc(n){let e,t;return e=new es({props:{size:n[1],src:n[3]}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&2&&(l.size=i[1]),s&8&&(l.src=i[3]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function ic(n){let e,t,i,s,l;const a=[tc,nc,ec,$d],o=[];function r(u,f){return u[6]?0:u[5]?1:u[4]?2:3}return i=r(n),s=o[i]=a[i](n),{c(){e=W(),t=B("div"),s.c(),m(t,"class","itsl-im2-conversation-avatar__container"),oe(t,"itsl-im2-conversation-avatar__container--200",n[1]===200),oe(t,"itsl-im2-conversation-avatar__container--300",n[1]===300)},m(u,f){P(u,e,f),P(u,t,f),o[i].m(t,null),l=!0},p(u,[f]){let d=i;i=r(u),i===d?o[i].p(u,f):(me(),A(o[d],1,1,()=>{o[d]=null}),he(),s=o[i],s?s.p(u,f):(s=o[i]=a[i](u),s.c()),I(s,1),s.m(t,null)),(!l||f&2)&&oe(t,"itsl-im2-conversation-avatar__container--200",u[1]===200),(!l||f&2)&&oe(t,"itsl-im2-conversation-avatar__container--300",u[1]===300)},i(u){l||(I(s),l=!0)},o(u){A(s),l=!1},d(u){u&&(R(e),R(t)),o[i].d()}}}function sc(n,e,t){let i,s,l,a,o,r,{colorSchema:u}=e,{is360ReportThread:f}=e,{massMessageType:d}=e,{oneToOneAvatarUrl:c}=e,{participants:h}=e,{size:p=300}=e,{threadType:_}=e;nt(()=>y());function y(){if(p!==200&&p!==300)throw Error("'size' property supports only values: 200, 300.")}function k(){if(f)return"itsl-im2-conversation-avatar--360-reports";if(d!==On.none)return"itsl-im2-conversation-avatar--mass-message";switch(_){case Oe.project:return"itsl-im2-conversation-avatar--project";case Oe.groupPlaceHolder:return"itsl-im2-conversation-avatar--group-placeholder";default:return""}}function g(b){return b.ProfileImageUrl!==re.constants.genericPersonImageUrl}return n.$$set=b=>{"colorSchema"in b&&t(0,u=b.colorSchema),"is360ReportThread"in b&&t(8,f=b.is360ReportThread),"massMessageType"in b&&t(9,d=b.massMessageType),"oneToOneAvatarUrl"in b&&t(10,c=b.oneToOneAvatarUrl),"participants"in b&&t(11,h=b.participants),"size"in b&&t(1,p=b.size),"threadType"in b&&t(12,_=b.threadType)},n.$$.update=()=>{var b,w;n.$$.dirty&4608&&t(6,i=d===On.none&&_===Oe.oneToOne),n.$$.dirty&4608&&t(5,s=d===On.none&&(_===Oe.group||_===Oe.collaboration)),n.$$.dirty&4608&&t(4,l=d===On.none&&_===Oe.course),n.$$.dirty&3072&&t(3,a=c??((b=ht(h,re.personId))==null?void 0:b.ProfileImageUrl)),n.$$.dirty&2048&&t(13,o=(w=qr(h))==null?void 0:w.sort((M,C)=>g(C)-g(M))),n.$$.dirty&8192&&t(2,r=o==null?void 0:o.map(M=>M.ProfileImageUrl))},[u,p,r,a,l,s,i,k,f,d,c,h,_,o]}class ti extends Ue{constructor(e){super(),De(this,e,sc,ic,Le,{colorSchema:0,is360ReportThread:8,massMessageType:9,oneToOneAvatarUrl:10,participants:11,size:1,threadType:12})}}const lc=n=>({}),kl=n=>({}),ac=n=>({}),Tl=n=>({});function oc(n){let e,t;return e=new ti({props:{colorSchema:n[1].cclCourseAvatarClass,is360ReportThread:n[1].is360ReportThread,massMessageType:n[1].massMessageType,participants:n[1].participants,threadType:n[1].type}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&2&&(l.colorSchema=i[1].cclCourseAvatarClass),s&2&&(l.is360ReportThread=i[1].is360ReportThread),s&2&&(l.massMessageType=i[1].massMessageType),s&2&&(l.participants=i[1].participants),s&2&&(l.threadType=i[1].type),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function rc(n){let e,t,i,s,l,a;return t=new ti({props:{colorSchema:n[1].cclCourseAvatarClass,is360ReportThread:n[1].is360ReportThread,massMessageType:n[1].massMessageType,participants:n[1].participants,threadType:n[1].type}}),{c(){e=B("button"),ie(t.$$.fragment),m(e,"type","button"),m(e,"class","itsl-im2__profile_card_button"),m(e,"aria-label",i=$(n[5].openProfileCard,n[1].name))},m(o,r){P(o,e,r),ne(t,e,null),s=!0,l||(a=Q(e,"click",n[7]),l=!0)},p(o,r){const u={};r&2&&(u.colorSchema=o[1].cclCourseAvatarClass),r&2&&(u.is360ReportThread=o[1].is360ReportThread),r&2&&(u.massMessageType=o[1].massMessageType),r&2&&(u.participants=o[1].participants),r&2&&(u.threadType=o[1].type),t.$set(u),(!s||r&2&&i!==(i=$(o[5].openProfileCard,o[1].name)))&&m(e,"aria-label",i)},i(o){s||(I(t.$$.fragment,o),s=!0)},o(o){A(t.$$.fragment,o),s=!1},d(o){o&&R(e),te(t),l=!1,a()}}}function Ml(n){let e,t=(n[1].participantsCount===1?n[5].oneParticipant:$(n[5].xParticipants,n[1].participantsCount))+"",i;return{c(){e=B("div"),i=ge(t),m(e,"class","itsl-im2-shared__info")},m(s,l){P(s,e,l),S(e,i)},p(s,l){l&2&&t!==(t=(s[1].participantsCount===1?s[5].oneParticipant:$(s[5].xParticipants,s[1].participantsCount))+"")&&Te(i,t)},d(s){s&&R(e)}}}function uc(n){let e,t,i,s,l,a,o,r,u,f,d=n[1].name+"",c,h,p=n[1].type!==Oe.oneToOne&&Ji(n[1]),_,y,k;i=new Bn({props:{ariaLabel:n[0],htmlType:"button",iconClass:"itsl-im2-shared__back-button",iconOnly:!0,id:eu,large:!0,type:"plain"}}),i.$on("click",n[11]),i.$on("keydown",n[6]);const g=[rc,oc],b=[];function w(N,F){return N[4]?0:1}a=w(n),o=b[a]=g[a](n);let M=p&&Ml(n);const C=n[10]["inner-header"],v=Qn(C,n,n[9],Tl),T=n[10]["outside-header"],E=Qn(T,n,n[9],kl);return{c(){e=B("div"),t=B("header"),ie(i.$$.fragment),s=W(),l=B("div"),o.c(),r=W(),u=B("div"),f=B("div"),c=ge(d),h=W(),M&&M.c(),_=W(),v&&v.c(),y=W(),E&&E.c(),m(l,"class","itsl-im2-conversation__avatar-container"),m(f,"id","itsl-im2-conversation__name"),m(f,"class","itsl-im2-shared__title"),m(u,"class","itsl-im2-conversation__title"),m(t,"aria-describedby","itsl-im2-conversation__name"),m(t,"class","itsl-im2-shared__header--layout itsl-im2-shared__header--padding--default itsl-im2-shared__header--padding--narrow-left "),oe(t,"itsl-im2-shared__header--padding--narrow-right",n[3]),m(e,"class","itsl-im2-conversation__header--wrapper itsl-im2-shared__header--theme ")},m(N,F){P(N,e,F),S(e,t),ne(i,t,null),S(t,s),S(t,l),b[a].m(l,null),S(t,r),S(t,u),S(u,f),S(f,c),S(u,h),M&&M.m(u,null),S(t,_),v&&v.m(t,null),S(e,y),E&&E.m(e,null),k=!0},p(N,[F]){const L={};F&1&&(L.ariaLabel=N[0]),i.$set(L);let O=a;a=w(N),a===O?b[a].p(N,F):(me(),A(b[O],1,1,()=>{b[O]=null}),he(),o=b[a],o?o.p(N,F):(o=b[a]=g[a](N),o.c()),I(o,1),o.m(l,null)),(!k||F&2)&&d!==(d=N[1].name+"")&&Te(c,d),F&2&&(p=N[1].type!==Oe.oneToOne&&Ji(N[1])),p?M?M.p(N,F):(M=Ml(N),M.c(),M.m(u,null)):M&&(M.d(1),M=null),v&&v.p&&(!k||F&512)&&$n(v,C,N,N[9],k?xn(C,N[9],F,ac):et(N[9]),Tl),(!k||F&8)&&oe(t,"itsl-im2-shared__header--padding--narrow-right",N[3]),E&&E.p&&(!k||F&512)&&$n(E,T,N,N[9],k?xn(T,N[9],F,lc):et(N[9]),kl)},i(N){k||(I(i.$$.fragment,N),I(o),I(v,N),I(E,N),k=!0)},o(N){A(i.$$.fragment,N),A(o),A(v,N),A(E,N),k=!1},d(N){N&&R(e),te(i),b[a].d(),M&&M.d(),v&&v.d(N),E&&E.d(N)}}}const eu="itsl-im2-conversation__header__back-button";function nu(){document.getElementById(eu).focus()}function fc(n,e,t){let i,{$$slots:s={},$$scope:l}=e,{backButtonAriaLabel:a}=e,{conversationData:o}=e,{goBack:r}=e,{narrowRight:u=!1}=e;const f=Qe(),d=re.i18n;function c(_){f("backButtonKeyDown",_)}function h(){const _=ht(o.participants,re.personId);Qs(_.PersonId,null,_.ProfileUrl)}const p=()=>r();return n.$$set=_=>{"backButtonAriaLabel"in _&&t(0,a=_.backButtonAriaLabel),"conversationData"in _&&t(1,o=_.conversationData),"goBack"in _&&t(2,r=_.goBack),"narrowRight"in _&&t(3,u=_.narrowRight),"$$scope"in _&&t(9,l=_.$$scope)},n.$$.update=()=>{n.$$.dirty&2&&t(4,i=o.type===Oe.oneToOne)},[a,o,r,u,i,d,c,h,nu,l,s,p]}class dc extends Ue{constructor(e){super(),De(this,e,fc,uc,Le,{backButtonAriaLabel:0,conversationData:1,goBack:2,narrowRight:3,focusBackButton:8})}get focusBackButton(){return nu}}const cc=['[aria-hidden="true"]',"[disabled]","[hidden]",'[type="hidden"]','[tabindex="-1"]'].map(n=>`:not(${n})`).join(""),yl=["button",'[role="button"]',"a[href]","input","[contentEditable=true]","select","textarea","iframe",'[tabindex="0"]',"audio","video"].map(n=>`${n}${cc}`).join(",");class xs{constructor(e){this.tabbables=[],this.element=e,this.innerDocBody=null,this.element.addEventListener("keydown",this.maybeLoopFocus.bind(this))}teardown(){this.element.removeEventListener("keydown",this.maybeLoopFocus),this.innerDocBody&&this.innerDocBody.removeEventListener("keydown",this.maybeLoopFocus.bind(this))}init(){const e=this.element.querySelectorAll(yl),t=Il(e);this.firstTabbable=t[0],this.lastTabbable=t[t.length-1],this.tabbableElements=t}maybeLoopFocus(e){if(e.key==="Tab"){if(!e.shiftKey&&e.target===this.lastTabbable)if(e.preventDefault(),this.firstTabbable.nodeName==="INPUT"&&this.firstTabbable.type==="radio"){const t=document.querySelector(`input[name="${this.firstTabbable.name}"]:checked`);t?t.focus():this.firstTabbable.focus()}else this.firstTabbable.focus();e.shiftKey&&(e.target===this.firstTabbable||mc(e.target,this.firstTabbable))&&(e.preventDefault(),this.lastTabbable.focus())}}updateLastTabbableIfIframeIsTheLastElement(e){this.innerDocBody=e;const t=e.querySelectorAll(yl),i=Il(t);i.length===0?this.lastTabbable=e:this.lastTabbable=i[i.length-1],e.addEventListener("keydown",this.maybeLoopFocus.bind(this))}}function Il(n){return[].filter.call(n,e=>e.style.visibility!=="hidden"&&e.style.display!=="none")}function mc(n,e){return n.nodeName==="INPUT"&&n.type==="radio"&&e.nodeName==="INPUT"&&e.type==="radio"&&n.name===e.name}const{window:Cl}=Ws,hc=n=>({}),vl=n=>({}),gc=n=>({}),Sl=n=>({}),_c=n=>({}),El=n=>({}),bc=n=>({}),Al=n=>({});function Bl(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g,b,w;const M=n[32].title,C=Qn(M,n,n[31],Al);let v=n[4]&&Rl(n),T=n[24].banner&&Pl(n),E=!n[1]&&Ll(n);const N=n[32].footer,F=Qn(N,n,n[31],vl),L=F||pc(n);return{c(){e=B("div"),t=B("div"),i=W(),s=B("section"),l=B("h1"),C&&C.c(),a=W(),v&&v.c(),r=W(),u=B("div"),f=B("div"),T&&T.c(),d=W(),E&&E.c(),c=W(),h=B("div"),p=B("div"),_=W(),y=B("div"),L&&L.c(),m(t,"class","prom-modal2__backdrop"),m(l,"id",o=n[10]+"-header"),m(l,"class","prom-modal2__header"),m(f,"class","prom-modal2__content"),m(p,"class","prom-modal2__content-gradient--inner"),m(p,"style",n[17]),m(h,"class","prom-modal2__content-gradient"),m(y,"class","prom-modal2__footer"),m(u,"class","prom-modal2__inner"),m(s,"id",n[10]),m(s,"role","dialog"),m(s,"class","prom-modal2__dialog"),m(s,"style",n[14]),m(s,"aria-labelledby",k=n[10]+"-header"),m(s,"aria-describedby",n[18]),m(s,"aria-modal","true"),oe(s,"prom-modal2__dialog--wide",n[11]),m(e,"class","prom-modal2__wrapper")},m(O,j){P(O,e,j),S(e,t),S(e,i),S(e,s),S(s,l),C&&C.m(l,null),S(l,a),v&&v.m(l,null),S(s,r),S(s,u),S(u,f),T&&T.m(f,null),S(f,d),E&&E.m(f,null),n[34](f),S(u,c),S(u,h),S(h,p),S(u,_),S(u,y),L&&L.m(y,null),n[35](s),g=!0,b||(w=[Q(t,"click",n[33]),Q(f,"scroll",n[23])],b=!0)},p(O,j){C&&C.p&&(!g||j[1]&1)&&$n(C,M,O,O[31],g?xn(M,O[31],j,bc):et(O[31]),Al),O[4]?v?v.p(O,j):(v=Rl(O),v.c(),v.m(l,null)):v&&(v.d(1),v=null),(!g||j[0]&1024&&o!==(o=O[10]+"-header"))&&m(l,"id",o),O[24].banner?T?(T.p(O,j),j[0]&16777216&&I(T,1)):(T=Pl(O),T.c(),I(T,1),T.m(f,d)):T&&(me(),A(T,1,1,()=>{T=null}),he()),O[1]?E&&(me(),A(E,1,1,()=>{E=null}),he()):E?(E.p(O,j),j[0]&2&&I(E,1)):(E=Ll(O),E.c(),I(E,1),E.m(f,null)),(!g||j[0]&131072)&&m(p,"style",O[17]),F?F.p&&(!g||j[1]&1)&&$n(F,N,O,O[31],g?xn(N,O[31],j,hc):et(O[31]),vl):L&&L.p&&(!g||j[0]&908)&&L.p(O,g?j:[-1,-1]),(!g||j[0]&1024)&&m(s,"id",O[10]),(!g||j[0]&16384)&&m(s,"style",O[14]),(!g||j[0]&1024&&k!==(k=O[10]+"-header"))&&m(s,"aria-labelledby",k),(!g||j[0]&262144)&&m(s,"aria-describedby",O[18]),(!g||j[0]&2048)&&oe(s,"prom-modal2__dialog--wide",O[11])},i(O){g||(I(C,O),I(T),I(E),I(L,O),g=!0)},o(O){A(C,O),A(T),A(E),A(L,O),g=!1},d(O){O&&R(e),C&&C.d(O),v&&v.d(),T&&T.d(),E&&E.d(),n[34](null),L&&L.d(O),n[35](null),b=!1,nn(w)}}}function Rl(n){let e;return{c(){e=ge(n[4])},m(t,i){P(t,e,i)},p(t,i){i[0]&16&&Te(e,t[4])},d(t){t&&R(e)}}}function Pl(n){let e,t;const i=n[32].banner,s=Qn(i,n,n[31],El);return{c(){e=B("div"),s&&s.c(),m(e,"class","prom-modal2__banner-slot")},m(l,a){P(l,e,a),s&&s.m(e,null),t=!0},p(l,a){s&&s.p&&(!t||a[1]&1)&&$n(s,i,l,l[31],t?xn(i,l[31],a,_c):et(l[31]),El)},i(l){t||(I(s,l),t=!0)},o(l){A(s,l),t=!1},d(l){l&&R(e),s&&s.d(l)}}}function Ll(n){let e,t,i,s,l;const a=n[32].body,o=Qn(a,n,n[31],Sl);let r=n[5]&&Nl(n),u=n[6]&&Fl(n);return{c(){e=B("div"),o&&o.c(),t=W(),r&&r.c(),i=W(),u&&u.c(),m(e,"id",s=n[10]+"-body"),m(e,"class","prom-modal2__body"),oe(e,"prom-modal2__body--scroll",n[12])},m(f,d){P(f,e,d),o&&o.m(e,null),S(e,t),r&&r.m(e,null),S(e,i),u&&u.m(e,null),l=!0},p(f,d){o&&o.p&&(!l||d[1]&1)&&$n(o,a,f,f[31],l?xn(a,f[31],d,gc):et(f[31]),Sl),f[5]?r?r.p(f,d):(r=Nl(f),r.c(),r.m(e,i)):r&&(r.d(1),r=null),f[6]?u?u.p(f,d):(u=Fl(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null),(!l||d[0]&1024&&s!==(s=f[10]+"-body"))&&m(e,"id",s),(!l||d[0]&4096)&&oe(e,"prom-modal2__body--scroll",f[12])},i(f){l||(I(o,f),l=!0)},o(f){A(o,f),l=!1},d(f){f&&R(e),o&&o.d(f),r&&r.d(),u&&u.d()}}}function Nl(n){let e;return{c(){e=ge(n[5])},m(t,i){P(t,e,i)},p(t,i){i[0]&32&&Te(e,t[5])},d(t){t&&R(e)}}}function Fl(n){let e,t;return{c(){e=new zs(!1),t=Ye(),e.a=t},m(i,s){e.m(n[6],i,s),P(i,t,s)},p(i,s){s[0]&64&&e.p(i[6])},d(i){i&&(R(t),e.d())}}}function Ol(n){let e,t;return e=new Yn({props:{type:n[9],htmlType:"button",text:n[3],large:!0}}),e.$on("click",n[21]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&512&&(l.type=i[9]),s[0]&8&&(l.text=i[3]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function pc(n){let e,t,i,s;e=new Yn({props:{type:n[8],htmlType:"button",text:n[2],large:!0}}),e.$on("click",n[22]);let l=n[7]&&Ol(n);return{c(){ie(e.$$.fragment),t=W(),l&&l.c(),i=Ye()},m(a,o){ne(e,a,o),P(a,t,o),l&&l.m(a,o),P(a,i,o),s=!0},p(a,o){const r={};o[0]&256&&(r.type=a[8]),o[0]&4&&(r.text=a[2]),e.$set(r),a[7]?l?(l.p(a,o),o[0]&128&&I(l,1)):(l=Ol(a),l.c(),I(l,1),l.m(i.parentNode,i)):l&&(me(),A(l,1,1,()=>{l=null}),he())},i(a){s||(I(e.$$.fragment,a),I(l),s=!0)},o(a){A(e.$$.fragment,a),A(l),s=!1},d(a){a&&(R(t),R(i)),te(e,a),l&&l.d(a)}}}function wc(n){let e,t,i,s,l=n[0]&&Bl(n);return{c(){l&&l.c(),e=Ye()},m(a,o){l&&l.m(a,o),P(a,e,o),t=!0,i||(s=[Q(Cl,"keyup",n[19]),Q(Cl,"resize",n[20])],i=!0)},p(a,o){a[0]?l?(l.p(a,o),o[0]&1&&I(l,1)):(l=Bl(a),l.c(),I(l,1),l.m(e.parentNode,e)):l&&(me(),A(l,1,1,()=>{l=null}),he())},i(a){t||(I(l),t=!0)},o(a){A(l),t=!1},d(a){a&&R(e),l&&l.d(a),i=!1,nn(s)}}}function kc(n,e,t){let i,{$$slots:s={},$$scope:l}=e;const a=pf(s),o=Qe();let{id:r=Math.random().toString(36).substr(2,16)}=e,{enabled:u=!1}=e,{wide:f=!1}=e,{titleOnly:d=!1}=e,{confirmText:c=void 0}=e,{cancelText:h=void 0}=e,{titleText:p=void 0}=e,{bodyText:_=void 0}=e,{bodyHtml:y=void 0}=e,{showCancel:k=!0}=e,{scrollBody:g=!1}=e,{describedBy:b=void 0}=e,{confirmButtonType:w="primary"}=e,{cancelButtonType:M="secondary"}=e,{clickOutsideCloses:C=!0}=e,v=!1,T=50,E=document.querySelector("html"),N,F="",L,O,j,ee,X,ue=!1;function ke(){L=document.activeElement,E.classList.add("prom-modal2--open-within"),pe(),setTimeout(()=>{if(j){const se=j.querySelectorAll("button");O=new xs(j),O.init(),se.length&&se[se.length-1].focus()}},0),setTimeout(()=>pe(),300)}function ye(){O&&O.init()}function ae(){E.classList.remove("prom-modal2--open-within"),L&&L.focus(),O&&O.teardown()}function K(se){u&&Ke(se.key)===ce.ESCAPE&&Y()}function pe(){if(!u)return;const se=24*2;let x=window.innerWidth>640?Math.min(window.innerHeight-se,f?1200:600):window.innerHeight-se;t(14,F=`max-height: ${x}px;`),setTimeout(()=>{ee&&t(28,v=ee.clientHeight!==ee.scrollHeight)},0)}function Y(){t(0,u=!1),o("close",{confirmed:!1}),o("cancel"),N&&N(!1)}function qe(){t(0,u=!1),o("close",{confirmed:!0}),o("confirm"),N&&N(!0)}function Ce(se){return se.titleOnly!==void 0&&t(1,d=se.titleOnly),se.confirmText!==void 0&&t(2,c=se.confirmText),se.cancelText!==void 0&&t(3,h=se.cancelText),se.titleText!==void 0&&t(4,p=se.titleText),se.bodyText!==void 0&&t(5,_=se.bodyText),se.bodyHtml!==void 0&&t(6,y=se.bodyHtml),se.titleOnly!==void 0&&t(1,d=se.titleOnly),se.showCancel!==void 0&&t(7,k=se.showCancel),se.describedBy!==void 0&&t(25,b=se.describedBy),se.confirmButtonType!==void 0&&t(8,w=se.confirmButtonType),se.cancelButtonType!==void 0&&t(9,M=se.cancelButtonType),t(0,u=!0),new Promise(x=>{N=x})}function be(){const se=ee.scrollHeight,x=ee.clientHeight,Me=ee.scrollTop;t(29,T=se-(x+Me))}const Xe=()=>C&&Y();function We(se){le[se?"unshift":"push"](()=>{ee=se,t(16,ee)})}function je(se){le[se?"unshift":"push"](()=>{j=se,t(15,j)})}return n.$$set=se=>{"id"in se&&t(10,r=se.id),"enabled"in se&&t(0,u=se.enabled),"wide"in se&&t(11,f=se.wide),"titleOnly"in se&&t(1,d=se.titleOnly),"confirmText"in se&&t(2,c=se.confirmText),"cancelText"in se&&t(3,h=se.cancelText),"titleText"in se&&t(4,p=se.titleText),"bodyText"in se&&t(5,_=se.bodyText),"bodyHtml"in se&&t(6,y=se.bodyHtml),"showCancel"in se&&t(7,k=se.showCancel),"scrollBody"in se&&t(12,g=se.scrollBody),"describedBy"in se&&t(25,b=se.describedBy),"confirmButtonType"in se&&t(8,w=se.confirmButtonType),"cancelButtonType"in se&&t(9,M=se.cancelButtonType),"clickOutsideCloses"in se&&t(13,C=se.clickOutsideCloses),"$$scope"in se&&t(31,l=se.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&805306368){let se=0;v&&(se=Math.min(T,30)),t(17,X=`height: ${se}px;`)}n.$$.dirty[0]&33555456&&t(18,i=b||`${r}-body`),n.$$.dirty[0]&1073741825&&(u&&!ue?(t(30,ue=u),ke()):!u&&ue&&(t(30,ue=u),ae())),n.$$.dirty[0]&2049&&u&&f&&pe()},[u,d,c,h,p,_,y,k,w,M,r,f,g,C,F,j,ee,X,i,K,pe,Y,qe,be,a,b,ye,Ce,v,T,ue,l,s,Xe,We,je]}class _s extends Ue{constructor(e){super(),De(this,e,kc,wc,Le,{id:10,enabled:0,wide:11,titleOnly:1,confirmText:2,cancelText:3,titleText:4,bodyText:5,bodyHtml:6,showCancel:7,scrollBody:12,describedBy:25,confirmButtonType:8,cancelButtonType:9,clickOutsideCloses:13,reinitTabTrapper:26,prompt:27},null,[-1,-1])}get reinitTabTrapper(){return this.$$.ctx[26]}get prompt(){return this.$$.ctx[27]}}function Tc(n){let e,t,i,s=[{id:n[9]},{class:n[2]},{disabled:n[3]},{placeholder:n[5]},{required:n[6]},{autocomplete:n[8]},{"aria-describedby":n[4]},{minlength:n[13]},{maxlength:n[14]},{cols:n[15]},{rows:n[16]},n[17]],l={};for(let a=0;a<s.length;a+=1)l=Nt(l,s[a]);return{c(){e=B("textarea"),zn(e,l),oe(e,"prom-input-field__input--has-error",n[7])},m(a,o){P(a,e,o),e.autofocus&&e.focus(),hn(e,n[0]),t||(i=[Q(e,"input",n[74]),Q(e,"focus",n[61]),Q(e,"blur",n[62]),Q(e,"click",n[63]),Q(e,"keyup",n[64]),Q(e,"keydown",n[65]),Q(e,"input",n[66]),Q(e,"paste",n[67])],t=!0)},p(a,o){zn(e,l=ni(s,[o[0]&512&&{id:a[9]},o[0]&4&&{class:a[2]},o[0]&8&&{disabled:a[3]},o[0]&32&&{placeholder:a[5]},o[0]&64&&{required:a[6]},o[0]&256&&{autocomplete:a[8]},o[0]&16&&{"aria-describedby":a[4]},o[0]&8192&&{minlength:a[13]},o[0]&16384&&{maxlength:a[14]},o[0]&32768&&{cols:a[15]},o[0]&65536&&{rows:a[16]},o[0]&131072&&a[17]])),o[0]&1&&hn(e,a[0]),oe(e,"prom-input-field__input--has-error",a[7])},d(a){a&&R(e),t=!1,nn(i)}}}function Mc(n){let e,t,i,s=[{id:n[9]},{class:n[2]},{disabled:n[3]},{placeholder:n[5]},{required:n[6]},{type:"number"},{autocomplete:n[8]},{"aria-describedby":n[4]},{step:n[10]},{min:n[11]},{max:n[12]},{minlength:n[13]},{maxlength:n[14]},n[17]],l={};for(let a=0;a<s.length;a+=1)l=Nt(l,s[a]);return{c(){e=B("input"),zn(e,l),oe(e,"prom-input-field__input--has-error",n[7])},m(a,o){P(a,e,o),e.autofocus&&e.focus(),hn(e,n[0]),t||(i=[Q(e,"input",n[73]),Q(e,"focus",n[54]),Q(e,"blur",n[55]),Q(e,"click",n[56]),Q(e,"keyup",n[57]),Q(e,"keydown",n[58]),Q(e,"input",n[59]),Q(e,"paste",n[60])],t=!0)},p(a,o){zn(e,l=ni(s,[o[0]&512&&{id:a[9]},o[0]&4&&{class:a[2]},o[0]&8&&{disabled:a[3]},o[0]&32&&{placeholder:a[5]},o[0]&64&&{required:a[6]},{type:"number"},o[0]&256&&{autocomplete:a[8]},o[0]&16&&{"aria-describedby":a[4]},o[0]&1024&&{step:a[10]},o[0]&2048&&{min:a[11]},o[0]&4096&&{max:a[12]},o[0]&8192&&{minlength:a[13]},o[0]&16384&&{maxlength:a[14]},o[0]&131072&&a[17]])),o[0]&1&&Ar(e.value)!==a[0]&&hn(e,a[0]),oe(e,"prom-input-field__input--has-error",a[7])},d(a){a&&R(e),t=!1,nn(i)}}}function yc(n){let e,t,i,s=[{id:n[9]},{class:n[2]},{disabled:n[3]},{placeholder:n[5]},{required:n[6]},{type:"tel"},{autocomplete:n[8]},{"aria-describedby":n[4]},{minlength:n[13]},{maxlength:n[14]},n[17]],l={};for(let a=0;a<s.length;a+=1)l=Nt(l,s[a]);return{c(){e=B("input"),zn(e,l),oe(e,"prom-input-field__input--has-error",n[7])},m(a,o){P(a,e,o),e.autofocus&&e.focus(),hn(e,n[0]),t||(i=[Q(e,"input",n[72]),Q(e,"focus",n[47]),Q(e,"blur",n[48]),Q(e,"click",n[49]),Q(e,"keyup",n[50]),Q(e,"keydown",n[51]),Q(e,"input",n[52]),Q(e,"paste",n[53])],t=!0)},p(a,o){zn(e,l=ni(s,[o[0]&512&&{id:a[9]},o[0]&4&&{class:a[2]},o[0]&8&&{disabled:a[3]},o[0]&32&&{placeholder:a[5]},o[0]&64&&{required:a[6]},{type:"tel"},o[0]&256&&{autocomplete:a[8]},o[0]&16&&{"aria-describedby":a[4]},o[0]&8192&&{minlength:a[13]},o[0]&16384&&{maxlength:a[14]},o[0]&131072&&a[17]])),o[0]&1&&hn(e,a[0]),oe(e,"prom-input-field__input--has-error",a[7])},d(a){a&&R(e),t=!1,nn(i)}}}function Ic(n){let e,t,i,s=[{id:n[9]},{class:n[2]},{disabled:n[3]},{placeholder:n[5]},{required:n[6]},{type:"url"},{autocomplete:n[8]},{"aria-describedby":n[4]},{minlength:n[13]},{maxlength:n[14]},n[17]],l={};for(let a=0;a<s.length;a+=1)l=Nt(l,s[a]);return{c(){e=B("input"),zn(e,l),oe(e,"prom-input-field__input--has-error",n[7])},m(a,o){P(a,e,o),e.autofocus&&e.focus(),hn(e,n[0]),t||(i=[Q(e,"input",n[71]),Q(e,"focus",n[40]),Q(e,"blur",n[41]),Q(e,"click",n[42]),Q(e,"keyup",n[43]),Q(e,"keydown",n[44]),Q(e,"input",n[45]),Q(e,"paste",n[46])],t=!0)},p(a,o){zn(e,l=ni(s,[o[0]&512&&{id:a[9]},o[0]&4&&{class:a[2]},o[0]&8&&{disabled:a[3]},o[0]&32&&{placeholder:a[5]},o[0]&64&&{required:a[6]},{type:"url"},o[0]&256&&{autocomplete:a[8]},o[0]&16&&{"aria-describedby":a[4]},o[0]&8192&&{minlength:a[13]},o[0]&16384&&{maxlength:a[14]},o[0]&131072&&a[17]])),o[0]&1&&e.value!==a[0]&&hn(e,a[0]),oe(e,"prom-input-field__input--has-error",a[7])},d(a){a&&R(e),t=!1,nn(i)}}}function Cc(n){let e,t,i,s=[{id:n[9]},{class:n[2]},{disabled:n[3]},{placeholder:n[5]},{required:n[6]},{type:"password"},{autocomplete:n[8]},{"aria-describedby":n[4]},{minlength:n[13]},{maxlength:n[14]},n[17]],l={};for(let a=0;a<s.length;a+=1)l=Nt(l,s[a]);return{c(){e=B("input"),zn(e,l),oe(e,"prom-input-field__input--has-error",n[7])},m(a,o){P(a,e,o),e.autofocus&&e.focus(),hn(e,n[0]),t||(i=[Q(e,"input",n[70]),Q(e,"focus",n[33]),Q(e,"blur",n[34]),Q(e,"click",n[35]),Q(e,"keyup",n[36]),Q(e,"keydown",n[37]),Q(e,"input",n[38]),Q(e,"paste",n[39])],t=!0)},p(a,o){zn(e,l=ni(s,[o[0]&512&&{id:a[9]},o[0]&4&&{class:a[2]},o[0]&8&&{disabled:a[3]},o[0]&32&&{placeholder:a[5]},o[0]&64&&{required:a[6]},{type:"password"},o[0]&256&&{autocomplete:a[8]},o[0]&16&&{"aria-describedby":a[4]},o[0]&8192&&{minlength:a[13]},o[0]&16384&&{maxlength:a[14]},o[0]&131072&&a[17]])),o[0]&1&&e.value!==a[0]&&hn(e,a[0]),oe(e,"prom-input-field__input--has-error",a[7])},d(a){a&&R(e),t=!1,nn(i)}}}function vc(n){let e,t,i,s=[{id:n[9]},{class:n[2]},{disabled:n[3]},{placeholder:n[5]},{required:n[6]},{type:"email"},{autocomplete:n[8]},{"aria-describedby":n[4]},{minlength:n[13]},{maxlength:n[14]},n[17]],l={};for(let a=0;a<s.length;a+=1)l=Nt(l,s[a]);return{c(){e=B("input"),zn(e,l),oe(e,"prom-input-field__input--has-error",n[7])},m(a,o){P(a,e,o),e.autofocus&&e.focus(),hn(e,n[0]),t||(i=[Q(e,"input",n[69]),Q(e,"focus",n[26]),Q(e,"blur",n[27]),Q(e,"click",n[28]),Q(e,"keyup",n[29]),Q(e,"keydown",n[30]),Q(e,"input",n[31]),Q(e,"paste",n[32])],t=!0)},p(a,o){zn(e,l=ni(s,[o[0]&512&&{id:a[9]},o[0]&4&&{class:a[2]},o[0]&8&&{disabled:a[3]},o[0]&32&&{placeholder:a[5]},o[0]&64&&{required:a[6]},{type:"email"},o[0]&256&&{autocomplete:a[8]},o[0]&16&&{"aria-describedby":a[4]},o[0]&8192&&{minlength:a[13]},o[0]&16384&&{maxlength:a[14]},o[0]&131072&&a[17]])),o[0]&1&&e.value!==a[0]&&hn(e,a[0]),oe(e,"prom-input-field__input--has-error",a[7])},d(a){a&&R(e),t=!1,nn(i)}}}function Sc(n){let e,t,i,s=[{id:n[9]},{class:n[2]},{disabled:n[3]},{placeholder:n[5]},{required:n[6]},{type:"text"},{autocomplete:n[8]},{"aria-describedby":n[4]},{minlength:n[13]},{maxlength:n[14]},n[17]],l={};for(let a=0;a<s.length;a+=1)l=Nt(l,s[a]);return{c(){e=B("input"),zn(e,l),oe(e,"prom-input-field__input--has-error",n[7])},m(a,o){P(a,e,o),e.autofocus&&e.focus(),hn(e,n[0]),t||(i=[Q(e,"input",n[68]),Q(e,"focus",n[19]),Q(e,"blur",n[20]),Q(e,"click",n[21]),Q(e,"keyup",n[22]),Q(e,"keydown",n[23]),Q(e,"input",n[24]),Q(e,"paste",n[25])],t=!0)},p(a,o){zn(e,l=ni(s,[o[0]&512&&{id:a[9]},o[0]&4&&{class:a[2]},o[0]&8&&{disabled:a[3]},o[0]&32&&{placeholder:a[5]},o[0]&64&&{required:a[6]},{type:"text"},o[0]&256&&{autocomplete:a[8]},o[0]&16&&{"aria-describedby":a[4]},o[0]&8192&&{minlength:a[13]},o[0]&16384&&{maxlength:a[14]},o[0]&131072&&a[17]])),o[0]&1&&e.value!==a[0]&&hn(e,a[0]),oe(e,"prom-input-field__input--has-error",a[7])},d(a){a&&R(e),t=!1,nn(i)}}}function Ec(n){let e;function t(l,a){if(l[1]==="text")return Sc;if(l[1]==="email")return vc;if(l[1]==="password")return Cc;if(l[1]==="url")return Ic;if(l[1]==="tel")return yc;if(l[1]==="number")return Mc;if(l[1]==="area")return Tc}let i=t(n),s=i&&i(n);return{c(){s&&s.c(),e=Ye()},m(l,a){s&&s.m(l,a),P(l,e,a)},p(l,a){i===(i=t(l))&&s?s.p(l,a):(s&&s.d(1),s=i&&i(l),s&&(s.c(),s.m(e.parentNode,e)))},i:we,o:we,d(l){l&&R(e),s&&s.d(l)}}}function Ac(n,e,t){let{value:i}=e,{type:s}=e,{classText:l}=e,{disabled:a}=e,{describedby:o}=e,{placeholder:r}=e,{required:u}=e,{hasError:f=!1}=e,{autocomplete:d}=e,{id:c}=e,{step:h}=e,{min:p}=e,{max:_}=e,{minlength:y=0}=e,{maxlength:k=99}=e,{spellcheck:g}=e,{cols:b=20}=e,{rows:w=2}=e,M;function C(G){J.call(this,n,G)}function v(G){J.call(this,n,G)}function T(G){J.call(this,n,G)}function E(G){J.call(this,n,G)}function N(G){J.call(this,n,G)}function F(G){J.call(this,n,G)}function L(G){J.call(this,n,G)}function O(G){J.call(this,n,G)}function j(G){J.call(this,n,G)}function ee(G){J.call(this,n,G)}function X(G){J.call(this,n,G)}function ue(G){J.call(this,n,G)}function ke(G){J.call(this,n,G)}function ye(G){J.call(this,n,G)}function ae(G){J.call(this,n,G)}function K(G){J.call(this,n,G)}function pe(G){J.call(this,n,G)}function Y(G){J.call(this,n,G)}function qe(G){J.call(this,n,G)}function Ce(G){J.call(this,n,G)}function be(G){J.call(this,n,G)}function Xe(G){J.call(this,n,G)}function We(G){J.call(this,n,G)}function je(G){J.call(this,n,G)}function se(G){J.call(this,n,G)}function x(G){J.call(this,n,G)}function Me(G){J.call(this,n,G)}function V(G){J.call(this,n,G)}function H(G){J.call(this,n,G)}function q(G){J.call(this,n,G)}function fe(G){J.call(this,n,G)}function Ne(G){J.call(this,n,G)}function Ge(G){J.call(this,n,G)}function Ee(G){J.call(this,n,G)}function gn(G){J.call(this,n,G)}function an(G){J.call(this,n,G)}function vn(G){J.call(this,n,G)}function dn(G){J.call(this,n,G)}function _e(G){J.call(this,n,G)}function Fe(G){J.call(this,n,G)}function cn(G){J.call(this,n,G)}function Ie(G){J.call(this,n,G)}function on(G){J.call(this,n,G)}function Dn(G){J.call(this,n,G)}function In(G){J.call(this,n,G)}function Sn(G){J.call(this,n,G)}function En(G){J.call(this,n,G)}function Un(G){J.call(this,n,G)}function Nn(G){J.call(this,n,G)}function qn(){i=this.value,t(0,i)}function Rn(){i=this.value,t(0,i)}function it(){i=this.value,t(0,i)}function pn(){i=this.value,t(0,i)}function Hn(){i=this.value,t(0,i)}function wn(){i=Ar(this.value),t(0,i)}function Xn(){i=this.value,t(0,i)}return n.$$set=G=>{"value"in G&&t(0,i=G.value),"type"in G&&t(1,s=G.type),"classText"in G&&t(2,l=G.classText),"disabled"in G&&t(3,a=G.disabled),"describedby"in G&&t(4,o=G.describedby),"placeholder"in G&&t(5,r=G.placeholder),"required"in G&&t(6,u=G.required),"hasError"in G&&t(7,f=G.hasError),"autocomplete"in G&&t(8,d=G.autocomplete),"id"in G&&t(9,c=G.id),"step"in G&&t(10,h=G.step),"min"in G&&t(11,p=G.min),"max"in G&&t(12,_=G.max),"minlength"in G&&t(13,y=G.minlength),"maxlength"in G&&t(14,k=G.maxlength),"spellcheck"in G&&t(18,g=G.spellcheck),"cols"in G&&t(15,b=G.cols),"rows"in G&&t(16,w=G.rows)},n.$$.update=()=>{if(n.$$.dirty[0]&262144){const G={};g!=null&&(G.spellcheck=g),t(17,M=G)}},[i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,b,w,M,g,C,v,T,E,N,F,L,O,j,ee,X,ue,ke,ye,ae,K,pe,Y,qe,Ce,be,Xe,We,je,se,x,Me,V,H,q,fe,Ne,Ge,Ee,gn,an,vn,dn,_e,Fe,cn,Ie,on,Dn,In,Sn,En,Un,Nn,qn,Rn,it,pn,Hn,wn,Xn]}class Bc extends Ue{constructor(e){super(),De(this,e,Ac,Ec,Le,{value:0,type:1,classText:2,disabled:3,describedby:4,placeholder:5,required:6,hasError:7,autocomplete:8,id:9,step:10,min:11,max:12,minlength:13,maxlength:14,spellcheck:18,cols:15,rows:16},null,[-1,-1,-1])}}function Dl(n){let e;return{c(){e=B("span"),e.textContent="*",m(e,"aria-hidden","true"),m(e,"class","prom-input__required-star")},m(t,i){P(t,e,i)},d(t){t&&R(e)}}}function Ul(n){let e,t;return{c(){e=B("span"),t=ge(n[6]),m(e,"class","prom-input-field__hint")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s[0]&64&&Te(t,i[6])},d(i){i&&R(e)}}}function Hl(n){let e;return{c(){e=ge(n[8])},m(t,i){P(t,e,i)},p(t,i){i[0]&256&&Te(e,t[8])},d(t){t&&R(e)}}}function Rc(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_=n[3]&&Dl(),y=n[6]&&Ul(n);function k(w){n[28](w)}let g={type:n[2],id:"prom-input-"+n[1],classText:"prom-input-field__input "+n[24],disabled:n[5],placeholder:n[4],required:n[3],hasError:n[7],spellcheck:n[15],autocomplete:n[14],describedby:n[21],cols:n[16],rows:n[17],step:n[9],min:n[10],max:n[11],minlength:n[12],maxlength:n[13]};n[0]!==void 0&&(g.value=n[0]),u=new Bc({props:g}),le.push(()=>Re(u,"value",k)),u.$on("focus",n[29]),u.$on("blur",n[30]),u.$on("click",n[31]),u.$on("keyup",n[32]),u.$on("keydown",n[33]),u.$on("input",n[34]),u.$on("paste",n[35]);let b=n[7]&&n[8]&&Hl(n);return{c(){e=B("div"),t=B("label"),i=B("span"),s=ge(n[22]),l=W(),_&&_.c(),a=W(),y&&y.c(),r=W(),ie(u.$$.fragment),d=W(),c=B("div"),b&&b.c(),m(i,"class",o="prom-input-field__label "+n[20]),oe(t,"prom-input-field--label-left",n[18]==="left"),m(c,"aria-live",n[19]),m(c,"class","prom-error-message"),m(c,"id",n[21]),oe(c,"prom-error-message--shown",n[7]&&n[8]),m(e,"id",n[1]),m(e,"class",h="prom-input-field "+n[23])},m(w,M){P(w,e,M),S(e,t),S(t,i),S(i,s),S(i,l),_&&_.m(i,null),S(i,a),y&&y.m(i,null),S(t,r),ne(u,t,null),S(e,d),S(e,c),b&&b.m(c,null),p=!0},p(w,M){(!p||M[0]&4194304)&&Te(s,w[22]),w[3]?_||(_=Dl(),_.c(),_.m(i,a)):_&&(_.d(1),_=null),w[6]?y?y.p(w,M):(y=Ul(w),y.c(),y.m(i,null)):y&&(y.d(1),y=null),(!p||M[0]&1048576&&o!==(o="prom-input-field__label "+w[20]))&&m(i,"class",o);const C={};M[0]&4&&(C.type=w[2]),M[0]&2&&(C.id="prom-input-"+w[1]),M[0]&16777216&&(C.classText="prom-input-field__input "+w[24]),M[0]&32&&(C.disabled=w[5]),M[0]&16&&(C.placeholder=w[4]),M[0]&8&&(C.required=w[3]),M[0]&128&&(C.hasError=w[7]),M[0]&32768&&(C.spellcheck=w[15]),M[0]&16384&&(C.autocomplete=w[14]),M[0]&2097152&&(C.describedby=w[21]),M[0]&65536&&(C.cols=w[16]),M[0]&131072&&(C.rows=w[17]),M[0]&512&&(C.step=w[9]),M[0]&1024&&(C.min=w[10]),M[0]&2048&&(C.max=w[11]),M[0]&4096&&(C.minlength=w[12]),M[0]&8192&&(C.maxlength=w[13]),!f&&M[0]&1&&(f=!0,C.value=w[0],Be(()=>f=!1)),u.$set(C),(!p||M[0]&262144)&&oe(t,"prom-input-field--label-left",w[18]==="left"),w[7]&&w[8]?b?b.p(w,M):(b=Hl(w),b.c(),b.m(c,null)):b&&(b.d(1),b=null),(!p||M[0]&524288)&&m(c,"aria-live",w[19]),(!p||M[0]&2097152)&&m(c,"id",w[21]),(!p||M[0]&384)&&oe(c,"prom-error-message--shown",w[7]&&w[8]),(!p||M[0]&2)&&m(e,"id",w[1]),(!p||M[0]&8388608&&h!==(h="prom-input-field "+w[23]))&&m(e,"class",h)},i(w){p||(I(u.$$.fragment,w),p=!0)},o(w){A(u.$$.fragment,w),p=!1},d(w){w&&R(e),_&&_.d(),y&&y.d(),te(u),b&&b.d()}}}function Pc(n,e,t){let i,s,l,a,o,{id:r="rnd"+Math.random().toString(36).substring(7)}=e,{label:u}=e,{type:f="text"}=e,{required:d=!1}=e,{placeholder:c=void 0}=e,{disabled:h=!1}=e,{value:p=null}=e,{hint:_=null}=e,{hasError:y=!1}=e,{errorMessage:k=void 0}=e,{height:g=null}=e,{step:b="any"}=e,{min:w=void 0}=e,{max:M=void 0}=e,{minlength:C=1}=e,{maxlength:v=99}=e,{labelHidden:T=!1}=e,{autocomplete:E="off"}=e,{spellcheck:N=void 0}=e,{cols:F=20}=e,{rows:L=2}=e,{labelPosition:O="top"}=e,{ariaLiveUpdateType:j=null}=e;function ee(Y){p=Y,t(0,p)}function X(Y){J.call(this,n,Y)}function ue(Y){J.call(this,n,Y)}function ke(Y){J.call(this,n,Y)}function ye(Y){J.call(this,n,Y)}function ae(Y){J.call(this,n,Y)}function K(Y){J.call(this,n,Y)}function pe(Y){J.call(this,n,Y)}return n.$$set=Y=>{"id"in Y&&t(1,r=Y.id),"label"in Y&&t(25,u=Y.label),"type"in Y&&t(2,f=Y.type),"required"in Y&&t(3,d=Y.required),"placeholder"in Y&&t(4,c=Y.placeholder),"disabled"in Y&&t(5,h=Y.disabled),"value"in Y&&t(0,p=Y.value),"hint"in Y&&t(6,_=Y.hint),"hasError"in Y&&t(7,y=Y.hasError),"errorMessage"in Y&&t(8,k=Y.errorMessage),"height"in Y&&t(26,g=Y.height),"step"in Y&&t(9,b=Y.step),"min"in Y&&t(10,w=Y.min),"max"in Y&&t(11,M=Y.max),"minlength"in Y&&t(12,C=Y.minlength),"maxlength"in Y&&t(13,v=Y.maxlength),"labelHidden"in Y&&t(27,T=Y.labelHidden),"autocomplete"in Y&&t(14,E=Y.autocomplete),"spellcheck"in Y&&t(15,N=Y.spellcheck),"cols"in Y&&t(16,F=Y.cols),"rows"in Y&&t(17,L=Y.rows),"labelPosition"in Y&&t(18,O=Y.labelPosition),"ariaLiveUpdateType"in Y&&t(19,j=Y.ariaLiveUpdateType)},n.$$.update=()=>{n.$$.dirty[0]&67108868&&t(24,i=f==="area"&&g?"prom-input-field--"+g+"-area":""),n.$$.dirty[0]&128&&t(23,s=y?"prom-input-field--has-error":""),n.$$.dirty[0]&33554432&&t(22,l=!u||typeof u!="string"?console.warn("Label must be supplied"):u),n.$$.dirty[0]&2&&t(21,a=r+"__error-message"),n.$$.dirty[0]&134217728&&t(20,o=T?"screen-reader":"")},[p,r,f,d,c,h,_,y,k,b,w,M,C,v,E,N,F,L,O,j,o,a,l,s,i,u,g,T,ee,X,ue,ke,ye,ae,K,pe]}class $s extends Ue{constructor(e){super(),De(this,e,Pc,Rc,Le,{id:1,label:25,type:2,required:3,placeholder:4,disabled:5,value:0,hint:6,hasError:7,errorMessage:8,height:26,step:9,min:10,max:11,minlength:12,maxlength:13,labelHidden:27,autocomplete:14,spellcheck:15,cols:16,rows:17,labelPosition:18,ariaLiveUpdateType:19},null,[-1,-1])}}function Wl(n){let e,t,i;function s(a){n[8](a)}let l={labelHidden:"true",minlength:"1",maxlength:"255",hasError:n[2],errorMessage:n[1],type:"text"};return n[5]!==void 0&&(l.value=n[5]),e=new $s({props:l}),le.push(()=>Re(e,"value",s)),{c(){ie(e.$$.fragment)},m(a,o){ne(e,a,o),i=!0},p(a,o){const r={};o&4&&(r.hasError=a[2]),o&2&&(r.errorMessage=a[1]),!t&&o&32&&(t=!0,r.value=a[5],Be(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){A(e.$$.fragment,a),i=!1},d(a){te(e,a)}}}function Lc(n){let e,t,i=n[0]===Ae.renameConversation&&Wl(n);return{c(){e=B("div"),i&&i.c(),m(e,"slot","body")},m(s,l){P(s,e,l),i&&i.m(e,null),t=!0},p(s,l){s[0]===Ae.renameConversation?i?(i.p(s,l),l&1&&I(i,1)):(i=Wl(s),i.c(),I(i,1),i.m(e,null)):i&&(me(),A(i,1,1,()=>{i=null}),he())},i(s){t||(I(i),t=!0)},o(s){A(i),t=!1},d(s){s&&R(e),i&&i.d()}}}function Nc(n){let e,t,i;function s(a){n[10](a)}let l={cancelText:re.i18n.cancel,$$slots:{body:[Lc]},$$scope:{ctx:n}};return n[3]!==void 0&&(l.enabled=n[3]),e=new _s({props:l}),n[9](e),le.push(()=>Re(e,"enabled",s)),e.$on("cancel",n[11]),e.$on("confirm",n[6]),{c(){ie(e.$$.fragment)},m(a,o){ne(e,a,o),i=!0},p(a,[o]){const r={};o&8231&&(r.$$scope={dirty:o,ctx:a}),!t&&o&8&&(t=!0,r.enabled=a[3],Be(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){A(e.$$.fragment,a),i=!1},d(a){n[9](null),te(e,a)}}}function Fc(n,e,t){const i=Qe();let s,l,a,o,r,u;function f(y){if(t(2,a=!1),t(3,o=!0),!y.actionType)throw Error("actionType property is obligatory.");t(0,{actionType:s,conversationName:u}=y,s,t(5,u));const k={bodyHtml:"",bodyText:"",cancelButtonType:"secondary",cancelText:re.i18n.cancel,confirmButtonType:"primary",confirmText:"",describedBy:"",showCancel:!0,titleOnly:!1,titleText:""};return r.prompt(Object.assign(k,y))}function d(){if(s===Ae.renameConversation&&(!u||!u.trim())){t(3,o=!0),t(2,a=!0),t(1,l=re.i18n.requiredField);return}i("confirm",{conversationName:u,actionType:s})}function c(y){u=y,t(5,u)}function h(y){le[y?"unshift":"push"](()=>{r=y,t(4,r)})}function p(y){o=y,t(3,o)}function _(y){J.call(this,n,y)}return[s,l,a,o,r,u,d,f,c,h,p,_]}class Oc extends Ue{constructor(e){super(),De(this,e,Fc,Nc,Le,{prompt:7})}get prompt(){return this.$$.ctx[7]}}function Dc(n,e){const t=n?n.toLocaleLowerCase():"",i=e.toLocaleLowerCase();return t.startsWith(i)}function tu(n){return n.length===1&&!!n.match(/\S| /)}function Uc(n){let e,t,i,s,l,a;return{c(){e=B("div"),t=B("input"),i=W(),s=B("div"),m(t,"class","prom-combo__value-input"),m(t,"id",n[0]),t.required=n[4],m(t,"role","combobox"),m(t,"aria-controls",n[7]),m(t,"aria-expanded",n[2]),m(t,"aria-haspopup",n[10]),m(t,"aria-autocomplete",n[9]),m(t,"aria-activedescendant",n[1]),m(s,"class","prom-combo__focus-wrapper"),m(e,"class","prom-combo__value"),m(e,"id",n[11]),m(e,"aria-controls",n[8]),oe(e,"focused",n[2]),oe(e,"prom-combo__value--chevron-visible",n[3])},m(o,r){P(o,e,r),S(e,t),n[26](t),S(e,i),S(e,s),n[27](e),l||(a=[Q(t,"keyup",n[13]),Q(t,"keydown",n[12]),Q(e,"click",n[14])],l=!0)},p(o,r){r[0]&1&&m(t,"id",o[0]),r[0]&16&&(t.required=o[4]),r[0]&128&&m(t,"aria-controls",o[7]),r[0]&4&&m(t,"aria-expanded",o[2]),r[0]&1024&&m(t,"aria-haspopup",o[10]),r[0]&512&&m(t,"aria-autocomplete",o[9]),r[0]&2&&m(t,"aria-activedescendant",o[1]),r[0]&2048&&m(e,"id",o[11]),r[0]&256&&m(e,"aria-controls",o[8]),r[0]&4&&oe(e,"focused",o[2]),r[0]&8&&oe(e,"prom-combo__value--chevron-visible",o[3])},i:we,o:we,d(o){o&&R(e),n[26](null),n[27](null),l=!1,nn(a)}}}function Hc(n,e,t){let i,s,l,a,o,{id:r}=e,{enableAutoComplete:u}=e,{enableInlineAutoComplete:f}=e,{listboxFocusedID:d=void 0}=e,{expanded:c}=e,{dataProvider:h}=e,{chevronVisible:p}=e,{required:_}=e,y,k="",g,b;const w=Qe();function M(){return document.activeElement===g||document.activeElement===b}function C(K){return g===K||g.contains(K)}function v(){b.focus()}function T(){y=void 0,N(null)}function E(){return b.value}function N(K){b&&t(6,b.value=K||null,b)}function F(K){y=K}function L(){return!b.value}function O(K){Ke(K.key)===ce.TAB&&(y=b.value)}async function j(K){let pe=!1,Y=!1;const qe=K.key;switch(tu(qe)?k+=qe:Y=!0,b.value.length<k.length&&(k=b.value),Ke(K.key)){case ce.ENTER:{y=b.value,ee(0,y.length),w("commit",y),w("closePopup",y),Y=!0,pe=!0;break}case ce.TAB:case ce.UP:case ce.DOWN:case ce.ESCAPE:case"Control":case"Alt":case"Shift":{pe=!0;break}}pe||w("filter",k),!Y&&f&&await X()}function ee(K,pe){b.focus(),b.setSelectionRange(K,pe)}async function X(){const K=await ue(k);K&&(t(6,b.value=K.guess,b),ee(K.index,K.guess.length))}async function ue(K){const pe=await Promise.resolve(h.getOptions(K));return pe.length===0?null:{guess:pe[0].label,index:K.length}}function ke(K){K.target!==b&&b.focus()}function ye(K){le[K?"unshift":"push"](()=>{b=K,t(6,b)})}function ae(K){le[K?"unshift":"push"](()=>{g=K,t(5,g)})}return n.$$set=K=>{"id"in K&&t(0,r=K.id),"enableAutoComplete"in K&&t(15,u=K.enableAutoComplete),"enableInlineAutoComplete"in K&&t(16,f=K.enableInlineAutoComplete),"listboxFocusedID"in K&&t(1,d=K.listboxFocusedID),"expanded"in K&&t(2,c=K.expanded),"dataProvider"in K&&t(17,h=K.dataProvider),"chevronVisible"in K&&t(3,p=K.chevronVisible),"required"in K&&t(4,_=K.required)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(11,i=`container_${r}`),n.$$.dirty[0]&4&&t(10,s=c?"listbox":void 0),n.$$.dirty[0]&98304&&t(9,l=u?f?"both":"list":"none"),n.$$.dirty[0]&1&&t(8,a=`listbox_${r}`),n.$$.dirty[0]&5&&t(7,o=c?"listbox_"+r:void 0)},[r,d,c,p,_,g,b,o,a,l,s,i,O,j,ke,u,f,h,M,C,v,T,E,N,F,L,ye,ae]}class Wc extends Ue{constructor(e){super(),De(this,e,Hc,Uc,Le,{id:0,enableAutoComplete:15,enableInlineAutoComplete:16,listboxFocusedID:1,expanded:2,dataProvider:17,chevronVisible:3,required:4,checkIfFocused:18,containsTarget:19,focus:20,reset:21,getStrValue:22,setDisplayValue:23,setValue:24,checkIfEmpty:25},null,[-1,-1])}get checkIfFocused(){return this.$$.ctx[18]}get containsTarget(){return this.$$.ctx[19]}get focus(){return this.$$.ctx[20]}get reset(){return this.$$.ctx[21]}get getStrValue(){return this.$$.ctx[22]}get setDisplayValue(){return this.$$.ctx[23]}get setValue(){return this.$$.ctx[24]}get checkIfEmpty(){return this.$$.ctx[25]}}function zl(n,e,t){const i=n.slice();return i[23]=e[t],i[25]=t,i}function Vl(n){let e,t,i=n[23].label+"",s,l,a,o,r;function u(){return n[9](n[23])}return{c(){e=B("div"),t=B("div"),s=ge(i),l=W(),m(t,"class","prom-combo__option-content"),m(e,"class","prom-combo__option-container"),m(e,"role","option"),m(e,"id","option_"+n[25]),m(e,"aria-selected",a=n[23].value===n[1])},m(f,d){P(f,e,d),S(e,t),S(t,s),S(e,l),o||(r=Q(e,"click",u),o=!0)},p(f,d){n=f,d&1&&i!==(i=n[23].label+"")&&Te(s,i),d&3&&a!==(a=n[23].value===n[1])&&m(e,"aria-selected",a)},d(f){f&&R(e),o=!1,r()}}}function zc(n){let e,t,i,s=en(n[0]),l=[];for(let a=0;a<s.length;a+=1)l[a]=Vl(zl(n,s,a));return{c(){e=B("div");for(let a=0;a<l.length;a+=1)l[a].c();m(e,"class","prom-combo__list-box"),m(e,"role","listbox"),m(e,"id",n[3]),m(e,"aria-labelledby",n[4]),m(e,"tabindex","-1")},m(a,o){P(a,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);n[10](e),t||(i=Q(window,"keydown",n[6]),t=!0)},p(a,[o]){if(o&35){s=en(a[0]);let r;for(r=0;r<s.length;r+=1){const u=zl(a,s,r);l[r]?l[r].p(u,o):(l[r]=Vl(u),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=s.length}o&8&&m(e,"id",a[3]),o&16&&m(e,"aria-labelledby",a[4])},i:we,o:we,d(a){a&&R(e),Vn(l,a),n[10](null),t=!1,i()}}}function Vc(n,e,t){switch(t){case"down":return e===n-1?0:e+1>=n?n-1:e+1;case"up":return e===0?n-1:e-1<0?0:e-1}}function qc(n,e,t){let i,s,{id:l}=e,{options:a}=e,{selected:o}=e,r,u;const f=Qe();nt(()=>{y()});function d(N){f("select",N)}function c(){return document.activeElement===r}function h(N){const F=Ke(N.key);if(tu(F)){_(),f("returnFocusAfterKeyPressed",F);return}if(!N.shiftKey)switch(F){case ce.DOWN:{k("down","single"),N.preventDefault();break}case ce.UP:{k("up","single"),N.preventDefault();break}case"PageDown":k("down","page"),N.preventDefault();break;case"PageUp":k("up","page"),N.preventDefault();break;case"Home":k("up","all"),N.preventDefault();break;case"End":k("down","all"),N.preventDefault();break;case ce.ENTER:{const L=Array.from(r.querySelectorAll(".prom-combo__option-container")),O=r.querySelector(".focused"),j=L.findIndex(ee=>ee===O);j>=0&&(N.preventDefault(),N.stopPropagation(),f("select",a[j]));break}}}function p(N){if(N>=0){_();const F=`option_${N}`,L=r.querySelector("#"+F);v(L,N),C(L)}}function _(){const N=r.querySelector(".focused");N&&N.classList.remove("focused")}function y(){u=o?a.findIndex(N=>N.value===o):0,p(u)}function k(N,F){if(r){const L=Array.from(r.querySelectorAll(".prom-combo__option-container")),O=r.querySelector(".focused");if(L.length>0){const j=O?L.findIndex(ue=>ue===O):0,ee=O?w(L.length,j,N,F):0,X=L[ee];v(X,ee),C(X),g(a[ee])}}}function g(N){f("focusedOptionChanged",N)}function b(){const N=r.querySelectorAll(".prom-combo__option-container"),F=[];for(let L=0;L<N.length;L++){const O=N[L];F.push(O.offsetTop)}return F}function w(N,F,L,O){switch(O){case"all":return L==="down"?N-1:0;case"page":return M(N,F,L);case"single":return Vc(N,F,L)}}function M(N,F,L){const O=r.offsetHeight,j=b(),ee=j[F];let X,ue,ke;switch(L){case"down":return X=ee+O,ke=j.filter(ye=>ye<=X),ue=ke.length-1,ue===F?0:ue;case"up":return X=ee-O,ke=j.filter(ye=>ye<=X),ue=ke.length-1<0?0:ke.length-1,ue===F?N-1:ue}}function C(N){const F=N.offsetTop,L=F+N.offsetHeight+1;L>r.scrollTop+r.offsetHeight&&t(2,r.scrollTop=L-r.offsetHeight+1,r),F<r.scrollTop&&t(2,r.scrollTop=F,r)}function v(N,F=0){const L=r.querySelector(".focused");L&&(L.classList.remove("focused"),L.removeAttribute("aria-selected")),N.classList.add("focused"),N.setAttribute("aria-selected","true"),u=F}const T=N=>d(N);function E(N){le[N?"unshift":"push"](()=>{r=N,t(2,r)})}return n.$$set=N=>{"id"in N&&t(7,l=N.id),"options"in N&&t(0,a=N.options),"selected"in N&&t(1,o=N.selected)},n.$$.update=()=>{n.$$.dirty&128&&t(4,i="label_"+l),n.$$.dirty&128&&t(3,s="listbox_"+l)},[a,o,r,s,i,d,h,l,c,T,E]}class Xc extends Ue{constructor(e){super(),De(this,e,qc,zc,Le,{id:7,options:0,selected:1,checkIfFocused:8})}get checkIfFocused(){return this.$$.ctx[8]}}class Kc{constructor(e){this.options=e||[]}setOptions(e){this.options=e}getOptions(e=void 0){return e?this.options.filter(i=>Dc(i.label,e)):this.options}createNewItem(e){const t={value:Math.random().toString(36),label:e};return this.options.push(t),t}getNameById(e){const t=this.options.find(i=>i.value===e);return t?t.label:void 0}}function ql(n){let e,t,i,s=n[3]&&Xl();return{c(){e=B("label"),t=ge(n[2]),i=W(),s&&s.c(),m(e,"class","prom-combo__label-text"),m(e,"id",n[16]),m(e,"for",n[1])},m(l,a){P(l,e,a),S(e,t),S(e,i),s&&s.m(e,null)},p(l,a){a[0]&4&&Te(t,l[2]),l[3]?s||(s=Xl(),s.c(),s.m(e,null)):s&&(s.d(1),s=null),a[0]&65536&&m(e,"id",l[16]),a[0]&2&&m(e,"for",l[1])},d(l){l&&R(e),s&&s.d()}}}function Xl(n){let e;return{c(){e=B("span"),e.textContent="*",m(e,"aria-hidden","true"),m(e,"class","prom-input__required-star")},m(t,i){P(t,e,i)},d(t){t&&R(e)}}}function Kl(n){let e,t,i={id:n[1],options:n[11],selected:n[0]};return e=new Xc({props:i}),n[33](e),e.$on("select",n[19]),e.$on("returnFocusAfterKeyPressed",n[24]),e.$on("focusedOptionChanged",n[25]),e.$on("activedescendantChanged",n[26]),{c(){ie(e.$$.fragment)},m(s,l){ne(e,s,l),t=!0},p(s,l){const a={};l[0]&2&&(a.id=s[1]),l[0]&2048&&(a.options=s[11]),l[0]&1&&(a.selected=s[0]),e.$set(a)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){n[33](null),te(e,s)}}}function jl(n){let e,t;return{c(){e=B("div"),t=ge(n[8]),m(e,"class","prom-combo__error-message"),m(e,"id",n[17])},m(i,s){P(i,e,s),S(e,t)},p(i,s){s[0]&256&&Te(t,i[8]),s[0]&131072&&m(e,"id",i[17])},d(i){i&&R(e)}}}function jc(n){let e,t,i,s,l,a,o,r,u,f,d=n[2]&&ql(n),c={id:n[1],dataProvider:n[10],enableAutoComplete:n[4],enableInlineAutoComplete:n[5],expanded:n[14],listboxFocusedID:n[15],chevronVisible:n[9],required:n[3]};s=new Wc({props:c}),n[31](s),s.$on("filter",n[22]),s.$on("commit",n[32]),s.$on("closePopup",n[21]);let h=n[14]&&Kl(n),p=n[7]&&n[8]&&jl(n);return{c(){e=B("div"),d&&d.c(),t=W(),i=B("div"),ie(s.$$.fragment),l=W(),h&&h.c(),a=W(),p&&p.c(),m(i,"class","prom-combo__container"),oe(i,"prom-combo_has_error",n[7]),m(e,"class",o="prom-combo "+n[6])},m(_,y){P(_,e,y),d&&d.m(e,null),S(e,t),S(e,i),ne(s,i,null),S(i,l),h&&h.m(i,null),S(e,a),p&&p.m(e,null),r=!0,u||(f=[Q(window,"click",n[18]),Q(window,"keydown",n[20])],u=!0)},p(_,y){_[2]?d?d.p(_,y):(d=ql(_),d.c(),d.m(e,t)):d&&(d.d(1),d=null);const k={};y[0]&2&&(k.id=_[1]),y[0]&1024&&(k.dataProvider=_[10]),y[0]&16&&(k.enableAutoComplete=_[4]),y[0]&32&&(k.enableInlineAutoComplete=_[5]),y[0]&16384&&(k.expanded=_[14]),y[0]&32768&&(k.listboxFocusedID=_[15]),y[0]&512&&(k.chevronVisible=_[9]),y[0]&8&&(k.required=_[3]),s.$set(k),_[14]?h?(h.p(_,y),y[0]&16384&&I(h,1)):(h=Kl(_),h.c(),I(h,1),h.m(i,null)):h&&(me(),A(h,1,1,()=>{h=null}),he()),(!r||y[0]&128)&&oe(i,"prom-combo_has_error",_[7]),_[7]&&_[8]?p?p.p(_,y):(p=jl(_),p.c(),p.m(e,null)):p&&(p.d(1),p=null),(!r||y[0]&64&&o!==(o="prom-combo "+_[6]))&&m(e,"class",o)},i(_){r||(I(s.$$.fragment,_),I(h),r=!0)},o(_){A(s.$$.fragment,_),A(h),r=!1},d(_){_&&R(e),d&&d.d(),n[31](null),te(s),h&&h.d(),p&&p.d(),u=!1,nn(f)}}}function Yc(n,e,t){let i,s,{id:l="rnd"+Math.random().toString(36)}=e,{label:a}=e,{options:o=[]}=e,{required:r=!1}=e,{selected:u=void 0}=e,{enableNewValues:f=!1}=e,{enableAutoComplete:d=!0}=e,{enableInlineAutoComplete:c=!1}=e,{cssClass:h=""}=e,{hasError:p=!1}=e,{errorMessage:_=void 0}=e,{chevronVisible:y=!0}=e,{dataProvider:k=new Kc(o)}=e,g,b,w,M,C,v=!1,T="",E,N;const F=Qe();async function L(){N=await ye(u),M&&M.setDisplayValue(N)}async function O(H){M.containsTarget(H.target)?(v||t(11,g=await Xe()),t(14,v=!v),v&&g.length===0&&t(14,v=!1)):(v?be(M.getStrValue()):M.checkIfEmpty()&&t(0,u=void 0),Y())}async function j(H){const q=H.detail.value;await ue(q),await ln(),Y(),T="",M.focus()}async function ee(){await X("")}async function X(H){T=H}async function ue(H){M.setValue(H),H!==u&&(t(0,u=H),F("change",u),T="")}async function ke(){M.reset(),ue(void 0),await ee()}async function ye(H){return!o||H==null?"":await Promise.resolve(k.getNameById(H))}function ae(H){switch(Ke(H.key)){case ce.TAB:if(!g)return;Y(),qe()&&be(M.getStrValue());break;case ce.ESCAPE:{const q=v;Y(),q&&M.focus();break}case ce.DOWN:case ce.UP:case ce.ENTER:case ce.SPACE:{K(H);break}}}function K(H){if(qe()&&!v){const q=Ke(H.key);if((q===ce.UP||q===ce.DOWN)&&H.preventDefault(),q===ce.ENTER||q===ce.SPACE)return;pe()}}async function pe(){await X(),t(11,g=await Xe()),g.length>0&&t(14,v=!0)}function Y(){v&&(t(14,v=!1),t(15,E=void 0))}function qe(){return M.checkIfFocused()||C&&C.checkIfFocused()}async function Ce(H){const q=T||"";T=H.detail,T=T.toLocaleLowerCase(),t(11,g=await Xe(T)),T.length>q.length&&g.length>0&&t(14,v=!0),F("filterChanged",H.detail)}async function be(H){if(!H)ke();else{const q=g.find(fe=>fe.label.toLocaleLowerCase()===H.toLocaleLowerCase());if(q)ue(q.value);else if(f){const fe=await Promise.resolve(k.createNewItem(H));ue(fe.value)}else ke();Y(),await ln(),T="",M.focus()}}async function Xe(H){return await Promise.resolve(k.getOptions(H))}function We(){M.focus()}function je(H){const q=H.detail;c&&M.setValue(q.label),M.focus()}function se(H){t(15,E=H.detail)}function x(H){le[H?"unshift":"push"](()=>{M=H,t(12,M)})}const Me=H=>be(H.detail);function V(H){le[H?"unshift":"push"](()=>{C=H,t(13,C)})}return n.$$set=H=>{"id"in H&&t(1,l=H.id),"label"in H&&t(2,a=H.label),"options"in H&&t(27,o=H.options),"required"in H&&t(3,r=H.required),"selected"in H&&t(0,u=H.selected),"enableNewValues"in H&&t(28,f=H.enableNewValues),"enableAutoComplete"in H&&t(4,d=H.enableAutoComplete),"enableInlineAutoComplete"in H&&t(5,c=H.enableInlineAutoComplete),"cssClass"in H&&t(6,h=H.cssClass),"hasError"in H&&t(7,p=H.hasError),"errorMessage"in H&&t(8,_=H.errorMessage),"chevronVisible"in H&&t(9,y=H.chevronVisible),"dataProvider"in H&&t(10,k=H.dataProvider)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(17,i=`errormessage_${l}`),n.$$.dirty[0]&671089664&&b!==o&&(k.setOptions&&k.setOptions(o),t(29,b=o)),n.$$.dirty[0]&134217728&&(o||console.warn("Options is required")),n.$$.dirty[0]&1073741825&&w!==u&&(L(),t(30,w=u)),n.$$.dirty[0]&2&&t(16,s="label_"+l)},[u,l,a,r,d,c,h,p,_,y,k,g,M,C,v,E,s,i,O,j,ae,Y,Ce,be,We,je,se,o,f,b,w,x,Me,V]}class Gc extends Ue{constructor(e){super(),De(this,e,Yc,jc,Le,{id:1,label:2,options:27,required:3,selected:0,enableNewValues:28,enableAutoComplete:4,enableInlineAutoComplete:5,cssClass:6,hasError:7,errorMessage:8,chevronVisible:9,dataProvider:10},null,[-1,-1])}}class Zc{constructor(e){this.options=[],this.i18n=e}async getOptions(e=void 0){const t=await Nr({searchText:e,recipientRoles:zf.teacher});return this.options=t.map(({Id:i,Label:s,UserName:l})=>({label:l?$(this.i18n.nameOfUserWithUserNameInParentheses,s,l):s,value:i})),this.options}getNameById(e){const t=this.options.find(i=>i.value===e);return t?t.label:void 0}}function Jc(n){let e,t,i,s,l,a,o;function r(c){n[13](c)}let u={dataProvider:n[6],enableAutoComplete:!0,errorMessage:n[5].requiredField,hasError:n[1],label:n[5].reportAbuseTeacherWhoWillReviewYourReport,required:!0};n[4]!==void 0&&(u.selected=n[4]),t=new Gc({props:u}),le.push(()=>Re(t,"selected",r));function f(c){n[14](c)}let d={label:n[5].reportAbuseExplainWhyItIsAbuse,rows:"3",type:"area"};return n[3]!==void 0&&(d.value=n[3]),l=new $s({props:d}),le.push(()=>Re(l,"value",f)),{c(){e=B("div"),ie(t.$$.fragment),s=W(),ie(l.$$.fragment),m(e,"slot","body")},m(c,h){P(c,e,h),ne(t,e,null),S(e,s),ne(l,e,null),o=!0},p(c,h){const p={};h&2&&(p.hasError=c[1]),!i&&h&16&&(i=!0,p.selected=c[4],Be(()=>i=!1)),t.$set(p);const _={};!a&&h&8&&(a=!0,_.value=c[3],Be(()=>a=!1)),l.$set(_)},i(c){o||(I(t.$$.fragment,c),I(l.$$.fragment,c),o=!0)},o(c){A(t.$$.fragment,c),A(l.$$.fragment,c),o=!1},d(c){c&&R(e),te(t),te(l)}}}function Qc(n){let e,t,i,s;function l(o){n[15](o)}let a={cancelText:n[5].cancel,confirmButtonType:"destructive",confirmText:n[5].reportAbuse,titleText:n[7](),$$slots:{body:[Jc]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.enabled=n[0]),t=new _s({props:a}),le.push(()=>Re(t,"enabled",l)),n[16](t),t.$on("cancel",n[17]),t.$on("confirm",n[8]),{c(){e=W(),ie(t.$$.fragment)},m(o,r){P(o,e,r),ne(t,o,r),s=!0},p(o,[r]){const u={};r&16777242&&(u.$$scope={dirty:r,ctx:o}),!i&&r&1&&(i=!0,u.enabled=o[0],Be(()=>i=!1)),t.$set(u)},i(o){s||(I(t.$$.fragment,o),s=!0)},o(o){A(t.$$.fragment,o),s=!1},d(o){o&&R(e),n[16](null),te(t,o)}}}function xc(n,e,t){let{conversationName:i}=e,{instantMessageThreadId:s=null}=e,{mode:l}=e,a,o,r,u="",f=null,d;const c=Qe(),h=re.i18n,p=new Zc(h);function _(){switch(l){case Yt.singleMessage:return h.reportAbuse;case Yt.conversation:return i?$(h.reportAbuseForConversationX,i):h.reportAbuseForConversation}}function y(F){switch(F){case Yt.singleMessage:return Ii.abuseReported;case Yt.conversation:return Ii.abuseReportedThread}}function k(F){if(t(1,o=!1),t(0,a=!0),l===Yt.singleMessage){if(!F.reportedMessageId)throw Error("reportedMessageId property is obligatory when reporting abuse for single message.");({reportedMessageId:f}=F)}return r.prompt(F)}async function g(){if(w(),!d){t(0,a=!0),t(1,o=!0);return}try{await Lr({originInstantMessageId:f,originMessageThreadId:s,referencedInstantMessageType:y(l),text:u.trim(),toPersonIds:[d]}),b(),c("abuseReportSent",{originInstantMessageId:f})}catch(F){rt(c,F)}}function b(){t(4,d=void 0),t(3,u="")}function w(){M(Se.session,Se.genericErrorMessage)}function M(...F){c("resolveError",{errorTypes:F})}function C(F){d=F,t(4,d)}function v(F){u=F,t(3,u)}function T(F){a=F,t(0,a)}function E(F){le[F?"unshift":"push"](()=>{r=F,t(2,r)})}function N(F){J.call(this,n,F)}return n.$$set=F=>{"conversationName"in F&&t(9,i=F.conversationName),"instantMessageThreadId"in F&&t(10,s=F.instantMessageThreadId),"mode"in F&&t(11,l=F.mode)},[a,o,r,u,d,h,p,_,g,i,s,l,k,C,v,T,E,N]}class iu extends Ue{constructor(e){super(),De(this,e,xc,Qc,Le,{conversationName:9,instantMessageThreadId:10,mode:11,prompt:12})}get prompt(){return this.$$.ctx[12]}}function $c(n){const e=[];return ut(Ae.searchInConversation,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__search-in-conversation",id:Ae.searchInConversation,text:re.i18n.searchInConversation}),ut(Ae.renameConversation,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__change-conversation-name",id:Ae.renameConversation,text:re.i18n.renameConversation}),ut(Ae.markAsUnread,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__mark-as-unread",id:Ae.markAsUnread,text:re.i18n.markAsUnread}),ut(Ae.reportAbuse,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__report-abuse",id:Ae.reportAbuse,text:re.i18n.reportAbuse}),ut(Ae.leaveConversation,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__leave-conversation",id:Ae.leaveConversation,text:re.i18n.leaveConversation}),ut(Ae.blockMessages,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__block-conversation",id:Ae.blockMessages,text:re.i18n.blockMessages}),ut(Ae.unblockConversation,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__reopen-and-unblock-conversation",id:Ae.unblockConversation,text:re.i18n.unblockConversation}),ut(Ae.closeConversation,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__close-conversation",id:Ae.closeConversation,text:re.i18n.closeConversation}),ut(Ae.deleteConversation,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__delete-conversation",id:Ae.deleteConversation,text:re.i18n.deleteConversation}),ut(Ae.reopenConversation,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__reopen-and-unblock-conversation",id:Ae.reopenConversation,text:re.i18n.reopenConversation}),ut(Ae.delete360ReportThread,n)&&e.push({iconClass:"itsl-im2-conversation-settings-actions__delete-conversation",id:Ae.delete360ReportThread,text:re.i18n.delete360ReportThread}),e}function Yl(n,e,t){const i=n.slice();return i[21]=e[t],i}function Gl(n){let e,t,i=en(n[3]),s=[];for(let a=0;a<i.length;a+=1)s[a]=Zl(Yl(n,i,a));const l=a=>A(s[a],1,1,()=>{s[a]=null});return{c(){e=B("div");for(let a=0;a<s.length;a+=1)s[a].c();m(e,"class","itsl-im2-conversation-settings-actions")},m(a,o){P(a,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(a,o){if(o&24){i=en(a[3]);let r;for(r=0;r<i.length;r+=1){const u=Yl(a,i,r);s[r]?(s[r].p(u,o),I(s[r],1)):(s[r]=Zl(u),s[r].c(),I(s[r],1),s[r].m(e,null))}for(me(),r=i.length;r<s.length;r+=1)l(r);he()}},i(a){if(!t){for(let o=0;o<i.length;o+=1)I(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)A(s[o]);t=!1},d(a){a&&R(e),Vn(s,a)}}}function Zl(n){let e,t;return e=new Bn({props:{htmlType:"button",iconClass:n[21].iconClass,iconPlacement:"start",text:n[21].text,type:"plain"}}),e.$on("click",function(){ei(n[4][n[21].id])&&n[4][n[21].id].apply(this,arguments)}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){n=i;const l={};s&8&&(l.iconClass=n[21].iconClass),s&8&&(l.text=n[21].text),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function em(n){let e,t,i,s,l,a=n[3].length>0&&Gl(n),o={};t=new Oc({props:o}),n[8](t),t.$on("confirm",n[9]);let r={conversationName:n[0].nameFromServer,instantMessageThreadId:n[0].id,mode:Yt.conversation};return s=new iu({props:r}),n[10](s),s.$on("abuseReportSent",n[6]),s.$on("raiseError",n[11]),s.$on("resolveError",n[12]),{c(){a&&a.c(),e=W(),ie(t.$$.fragment),i=W(),ie(s.$$.fragment)},m(u,f){a&&a.m(u,f),P(u,e,f),ne(t,u,f),P(u,i,f),ne(s,u,f),l=!0},p(u,[f]){u[3].length>0?a?(a.p(u,f),f&8&&I(a,1)):(a=Gl(u),a.c(),I(a,1),a.m(e.parentNode,e)):a&&(me(),A(a,1,1,()=>{a=null}),he());const d={};t.$set(d);const c={};f&1&&(c.conversationName=u[0].nameFromServer),f&1&&(c.instantMessageThreadId=u[0].id),s.$set(c)},i(u){l||(I(a),I(t.$$.fragment,u),I(s.$$.fragment,u),l=!0)},o(u){A(a),A(t.$$.fragment,u),A(s.$$.fragment,u),l=!1},d(u){u&&(R(e),R(i)),a&&a.d(u),n[8](null),te(t,u),n[10](null),te(s,u)}}}function nm(n,e,t){let i,s;yi(n,$t,T=>t(13,s=T));let{conversationData:l}=e,{conversationSettingsModal:a}=e,{reportAbuseModal:o}=e,{conversationShortName:r}=e;const u=Qe(),f={[Ae.renameConversation]:()=>a.prompt({actionType:Ae.renameConversation,confirmText:c.save,conversationName:l.nameFromServer,titleText:c.renameConversation}),[Ae.leaveConversation]:()=>a.prompt({actionType:Ae.leaveConversation,confirmButtonType:"destructive",confirmText:c.leave,bodyText:c.leaveConversationExplanation,titleText:$(c.leaveConversationX,r)}),[Ae.closeConversation]:()=>a.prompt({actionType:Ae.closeConversation,bodyText:c.closeConversationExplanation,confirmButtonType:"destructive",confirmText:c.closeConversation,conversationName:l.name,titleText:c.closeConversationQuestion}),[Ae.reopenConversation]:()=>_(!1),[Ae.blockMessages]:()=>y(),[Ae.unblockConversation]:()=>y(),[Ae.deleteConversation]:()=>a.prompt({actionType:Ae.deleteConversation,bodyText:c.deleteConversationExplanationText,confirmButtonType:"destructive",confirmText:c.deleteConversation,titleText:c.deleteConversationQuestionMark}),[Ae.delete360ReportThread]:()=>a.prompt({actionType:Ae.delete360ReportThread,confirmButtonType:"destructive",confirmText:c.deleteConfirm,titleOnly:!0,titleText:c.delete360ReportThreadQuestion}),[Ae.reportAbuse]:()=>o.prompt({}),[Ae.searchInConversation]:()=>{jt($t,s=!0,s),t(0,l),u("backToConversation")},[Ae.markAsUnread]:async()=>{u("backToConversation"),await ln(),u("markAsUnread",{})}},d={[Ae.renameConversation]:async T=>await h(l,T.detail.conversationName),[Ae.leaveConversation]:async()=>await p(l.id),[Ae.closeConversation]:async()=>_(!0),[Ae.deleteConversation]:async()=>await k(l.id),[Ae.delete360ReportThread]:async()=>await k(l.id)},c=re.i18n;async function h(T,E){if(T.name!==E)try{await Fr(T.id,{instantMessageThreadId:T.id,name:E,updateName:!0})}catch(N){rt(u,N)}}async function p(T){try{await Or(l.id,re.personId),u("deleteThread",{threadId:T}),u("backToConversationList")}catch(E){rt(u,E)}}async function _(T){u("toggleCloseConversation",{closed:T})}async function y(){u("toggleBlockConversation")}async function k(T){try{await id(T),u("deleteThread",{threadId:T}),u("backToConversationList"),u("showBannerOnConversationList",{bannerText:l.nameFromServer?$(c.conversationXHasBeenDeleted,l.nameFromServer):c.theConversationHasBeenDeleted})}catch(E){rt(E)}}function g(){u("abuseReportSent",{originThreadId:l.id})}function b(T){le[T?"unshift":"push"](()=>{a=T,t(1,a)})}const w=T=>d[T.detail.actionType](T);function M(T){le[T?"unshift":"push"](()=>{o=T,t(2,o)})}function C(T){J.call(this,n,T)}function v(T){J.call(this,n,T)}return n.$$set=T=>{"conversationData"in T&&t(0,l=T.conversationData),"conversationSettingsModal"in T&&t(1,a=T.conversationSettingsModal),"reportAbuseModal"in T&&t(2,o=T.reportAbuseModal),"conversationShortName"in T&&t(7,r=T.conversationShortName)},n.$$.update=()=>{n.$$.dirty&1&&t(3,i=$c(l))},[l,a,o,i,f,d,g,r,b,w,M,C,v]}class tm extends Ue{constructor(e){super(),De(this,e,nm,em,Le,{conversationData:0,conversationSettingsModal:1,reportAbuseModal:2,conversationShortName:7})}}function Bt(n){const e=n.querySelector("li > .prom-dropdown__listitem");e&&e.focus()}function ss(n){n.children[n.children.length-1].querySelector(".prom-dropdown__listitem").focus()}function Ns(){const n=document.querySelector(".prom-dropdown__listitems-menu.open");n&&(n.focus(),el())}function el(){const n=document.querySelector(".prom-dropdown__listitems-menu.open");n&&n.classList.remove("open")}function su(n){n.setAttribute("hidden","hidden")}function Jl(n){return n&&n.hasAttribute("hidden")}function Mi(){const n=Array.prototype.slice.call(document.querySelectorAll(".prom-dropdown__submenu"));for(let t=0;t<n.length;t++)su(n[t]);const e=document.querySelectorAll(".prom-dropdown__listitems-menu");for(let t=0;t<e.length;t++)e[t].setAttribute("aria-expanded","false")}function im(n){if(n.style.right=null,n.style.left=null,n.style.top=null,window.innerWidth>480){const e=n.parentElement.getBoundingClientRect(),t=sm(n,"prom-dropdown__body");window.innerWidth-e.right>=e.width?n.style.left=e.width+"px":n.style.right=e.width+"px",n.style.top=e.top-t.getBoundingClientRect().top-5+"px"}n.removeAttribute("hidden")}function sm(n,e){for(;n.parentElement!==null;)if(n=n.parentElement,n.classList.contains(e))return n;return null}function lm(){const n=document.querySelectorAll(".prom-dropdown__submenu");let e=!1;return n.length>0&&n.forEach(t=>{t.hasAttribute("aria-expanded")&&t.getAttribute("aria-expanded")==="true"&&(e=!0)}),e}function Ql(n){return n.classList.contains("prom-dropdown__listitems-menu")}function am(n){let e,t;return{c(){e=B("span"),m(e,"class",t=n[0].iconCssClass)},m(i,s){P(i,e,s)},p(i,s){s&1&&t!==(t=i[0].iconCssClass)&&m(e,"class",t)},d(i){i&&R(e)}}}function om(n){let e,t,i,s;return{c(){e=B("img"),m(e,"alt",""),m(e,"class","prom-dropdown__listitems-icon"),Rt(e.src,t=n[0].icon)||m(e,"src",t),m(e,"height",i=n[0].iconsize),m(e,"width",s=n[0].iconsize)},m(l,a){P(l,e,a)},p(l,a){a&1&&!Rt(e.src,t=l[0].icon)&&m(e,"src",t),a&1&&i!==(i=l[0].iconsize)&&m(e,"height",i),a&1&&s!==(s=l[0].iconsize)&&m(e,"width",s)},d(l){l&&R(e)}}}function xl(n){let e;return{c(){e=ge("")},m(t,i){P(t,e,i)},d(t){t&&R(e)}}}function rm(n){let e,t,i,s=n[0].label+"",l,a,o,r,u,f,d,c;function h(k,g){if(k[0].icon)return om;if(k[0].iconCssClass)return am}let p=h(n),_=p&&p(n),y=n[0].ellipsis&&xl();return{c(){e=B("a"),_&&_.c(),t=W(),i=B("span"),l=ge(s),a=W(),y&&y.c(),m(i,"class","prom-dropdown__listitems-text"),m(e,"class","prom-dropdown__listitem prom-dropdown__listitem-link"),m(e,"href",o=n[0].url),m(e,"ping",r=n[0].ping),m(e,"id",u=n[0].id),m(e,"tabindex","-1"),m(e,"target",f=n[0].target?n[0].target:"mainmenu")},m(k,g){P(k,e,g),_&&_.m(e,null),S(e,t),S(e,i),S(i,l),S(i,a),y&&y.m(i,null),d||(c=[Q(e,"click",n[2]),Q(e,"mouseenter",n[3]),Q(e,"mouseleave",n[4])],d=!0)},p(k,[g]){p===(p=h(k))&&_?_.p(k,g):(_&&_.d(1),_=p&&p(k),_&&(_.c(),_.m(e,t))),g&1&&s!==(s=k[0].label+"")&&Te(l,s),k[0].ellipsis?y||(y=xl(),y.c(),y.m(i,null)):y&&(y.d(1),y=null),g&1&&o!==(o=k[0].url)&&m(e,"href",o),g&1&&r!==(r=k[0].ping)&&m(e,"ping",r),g&1&&u!==(u=k[0].id)&&m(e,"id",u),g&1&&f!==(f=k[0].target?k[0].target:"mainmenu")&&m(e,"target",f)},i:we,o:we,d(k){k&&R(e),_&&_.d(),y&&y.d(),d=!1,nn(c)}}}function um(n,e,t){const i=Qe();let{option:s=null}=e;function l(r){i("dropdownClose",r),s&&s.value&&i("click",{data:s})}const a=r=>i("mouseenter",{event:r,data:s}),o=r=>i("mouseleave",{event:r,data:s});return n.$$set=r=>{"option"in r&&t(0,s=r.option)},[s,i,l,a,o]}class fm extends Ue{constructor(e){super(),De(this,e,um,rm,Le,{option:0})}}function dm(n){let e,t;return{c(){e=B("span"),m(e,"class",t=n[3].iconCssClass)},m(i,s){P(i,e,s)},p(i,s){s&8&&t!==(t=i[3].iconCssClass)&&m(e,"class",t)},d(i){i&&R(e)}}}function cm(n){let e,t,i,s;return{c(){e=B("img"),m(e,"alt",""),m(e,"class","prom-dropdown__listitems-icon"),Rt(e.src,t=n[3].icon)||m(e,"src",t),m(e,"height",i=n[3].iconsize),m(e,"width",s=n[3].iconsize)},m(l,a){P(l,e,a)},p(l,a){a&8&&!Rt(e.src,t=l[3].icon)&&m(e,"src",t),a&8&&i!==(i=l[3].iconsize)&&m(e,"height",i),a&8&&s!==(s=l[3].iconsize)&&m(e,"width",s)},d(l){l&&R(e)}}}function $l(n){let e;return{c(){e=ge("")},m(t,i){P(t,e,i)},d(t){t&&R(e)}}}function mm(n){let e,t,i,s=n[3].label+"",l,a,o,r,u,f,d,c,h;function p(g,b){if(g[3].icon)return cm;if(g[3].iconCssClass)return dm}let _=p(n),y=_&&_(n),k=n[3].ellipsis&&$l();return{c(){e=B("button"),y&&y.c(),t=W(),i=B("span"),l=ge(s),a=W(),k&&k.c(),o=W(),r=B("span"),m(i,"class","prom-dropdown__listitems-text"),m(r,"class","prom-dropdown__listitems-menuicon"),m(e,"class",u="prom-dropdown__listitem prom-dropdown__listitem-action "+n[0]),m(e,"tabindex","-1"),m(e,"type","button"),m(e,"id",f=n[3].id),m(e,"aria-haspopup",n[2]),m(e,"aria-expanded",d=n[2]?n[1]:null)},m(g,b){P(g,e,b),y&&y.m(e,null),S(e,t),S(e,i),S(i,l),S(i,a),k&&k.m(i,null),S(e,o),S(e,r),c||(h=[Q(e,"click",n[5]),Q(e,"mouseenter",n[6]),Q(e,"mouseleave",n[7])],c=!0)},p(g,[b]){_===(_=p(g))&&y?y.p(g,b):(y&&y.d(1),y=_&&_(g),y&&(y.c(),y.m(e,t))),b&8&&s!==(s=g[3].label+"")&&Te(l,s),g[3].ellipsis?k||(k=$l(),k.c(),k.m(i,null)):k&&(k.d(1),k=null),b&1&&u!==(u="prom-dropdown__listitem prom-dropdown__listitem-action "+g[0])&&m(e,"class",u),b&8&&f!==(f=g[3].id)&&m(e,"id",f),b&4&&m(e,"aria-haspopup",g[2]),b&6&&d!==(d=g[2]?g[1]:null)&&m(e,"aria-expanded",d)},i:we,o:we,d(g){g&&R(e),y&&y.d(),k&&k.d(),c=!1,nn(h)}}}function hm(n,e,t){const i=Qe();let{cssClass:s=""}=e,{expanded:l=!1}=e,{hasPopup:a=!1}=e,{option:o=null}=e;const r=d=>i("click",{event:d,data:o}),u=d=>i("mouseenter",{event:d,data:o}),f=d=>i("mouseleave",{event:d,data:o});return n.$$set=d=>{"cssClass"in d&&t(0,s=d.cssClass),"expanded"in d&&t(1,l=d.expanded),"hasPopup"in d&&t(2,a=d.hasPopup),"option"in d&&t(3,o=d.option)},[s,l,a,o,i,r,u,f]}class lu extends Ue{constructor(e){super(),De(this,e,hm,mm,Le,{cssClass:0,expanded:1,hasPopup:2,option:3})}}const gm=window.navigator.userAgent;function ea(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(gm)}function au(n){const t=n.parentElement.parentElement.parentElement.children;if(t.length===0)return;const i=[];for(let s=0;s<t.length;s++){const l=t[s];l.nodeName.toLowerCase()==="ul"&&i.push(l)}return i}function _m(n){const e=au(n);e.length<=1&&Bt(e[0]);let i=n.parentElement.parentElement.nextElementSibling;i?(i.nodeName.toLowerCase()!=="ul"&&(i=i.nextElementSibling),Bt(i)):Bt(e[0])}function bm(n){const e=au(n);if(e.length<=1)ss(e[0]);else{let i=n.parentElement.parentElement.previousElementSibling;i?(i.nodeName.toLowerCase()==="h2"&&(i=i.previousElementSibling),i.nodeName.toLowerCase()==="ul"?ss(i):ss(e[e.length-1])):ss(e[e.length-1])}}function pm(n){const t=n.parentElement.previousElementSibling;return t?(t.querySelector(".prom-dropdown__listitem").focus(),!0):!1}function wm(n){const t=n.parentElement.nextElementSibling;return t?(t.querySelector(".prom-dropdown__listitem").focus(),!0):!1}function na(n,e,t){const i=n.slice();return i[18]=e[t],i[20]=t,i}function km(n){let e,t;return e=new lu({props:{option:n[0],hasPopup:!1}}),e.$on("click",n[12]),e.$on("mouseenter",n[2]),e.$on("mouseleave",n[3]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&1&&(l.option=i[0]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Tm(n){let e,t,i,s,l;e=new lu({props:{option:n[0],cssClass:"prom-dropdown__listitems-menu",hasPopup:!0}}),e.$on("click",n[1]),e.$on("mouseenter",n[2]),e.$on("mouseleave",n[3]);let a=en(n[0].items),o=[];for(let u=0;u<a.length;u+=1)o[u]=ta(na(n,a,u));const r=u=>A(o[u],1,1,()=>{o[u]=null});return{c(){ie(e.$$.fragment),t=W(),i=B("section"),s=B("section");for(let u=0;u<o.length;u+=1)o[u].c();m(s,"class","prom-dropdown__body"),i.hidden=!0,m(i,"class","prom-dropdown prom-dropdown__submenu")},m(u,f){ne(e,u,f),P(u,t,f),P(u,i,f),S(i,s);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(s,null);l=!0},p(u,f){const d={};if(f&1&&(d.option=u[0]),e.$set(d),f&1){a=en(u[0].items);let c;for(c=0;c<a.length;c+=1){const h=na(u,a,c);o[c]?(o[c].p(h,f),I(o[c],1)):(o[c]=ta(h),o[c].c(),I(o[c],1),o[c].m(s,null))}for(me(),c=a.length;c<o.length;c+=1)r(c);he()}},i(u){if(!l){I(e.$$.fragment,u);for(let f=0;f<a.length;f+=1)I(o[f]);l=!0}},o(u){A(e.$$.fragment,u),o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)A(o[f]);l=!1},d(u){u&&(R(t),R(i)),te(e,u),Vn(o,u)}}}function Mm(n){let e,t;return e=new fm({props:{option:n[0]}}),e.$on("click",n[7]),e.$on("dropdownClose",n[8]),e.$on("mouseenter",n[2]),e.$on("mouseleave",n[3]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&1&&(l.option=i[0]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function ta(n){let e,t;return e=new ou({props:{index:n[20],list:n[18],isSubmenu:"true"}}),e.$on("click",n[9]),e.$on("dropdownClose",n[10]),e.$on("keyup",n[11]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&1&&(l.list=i[18]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function ym(n){let e,t,i,s,l,a,o;const r=[Mm,Tm,km],u=[];function f(d,c){return d[0].link?0:d[0].items?1:2}return t=f(n),i=u[t]=r[t](n),{c(){e=B("li"),i.c(),m(e,"class",s="prom-dropdown__listitems "+(n[0].cssClass||"")),m(e,"role","menuitem"),oe(e,"prom-dropdown__listitems--divider",n[0].divider),oe(e,"prom-dropdown__listitems--menu",n[0].items)},m(d,c){P(d,e,c),u[t].m(e,null),l=!0,a||(o=[Q(e,"keyup",n[5]),Q(e,"keydown",n[4])],a=!0)},p(d,[c]){let h=t;t=f(d),t===h?u[t].p(d,c):(me(),A(u[h],1,1,()=>{u[h]=null}),he(),i=u[t],i?i.p(d,c):(i=u[t]=r[t](d),i.c()),I(i,1),i.m(e,null)),(!l||c&1&&s!==(s="prom-dropdown__listitems "+(d[0].cssClass||"")))&&m(e,"class",s),(!l||c&1)&&oe(e,"prom-dropdown__listitems--divider",d[0].divider),(!l||c&1)&&oe(e,"prom-dropdown__listitems--menu",d[0].items)},i(d){l||(I(i),l=!0)},o(d){A(i),l=!1},d(d){d&&R(e),u[t].d(),a=!1,nn(o)}}}function Im(n,e,t){let{isSubmenu:i=!1}=e,{option:s=null}=e;function l({detail:{event:M}}){const C=M.currentTarget,v=M.currentTarget.nextElementSibling;p(C,v,!1)}function a({detail:{event:M}}){if(ea())return;const C=M.currentTarget,v=M.currentTarget.nextElementSibling;Ql(C)?c(C,v,!0):i||Mi()}function o({detail:{event:M}}){if(ea())return;const C=M.currentTarget.nextElementSibling;!i&&C&&!C.contains(M.relatedTarget)&&h(C,!1)}function r(M){wm(M)||_m(M)}function u(M){pm(M)||bm(M)}function f(M){const{key:C}=M,v=M.target;switch(Ke(C)){case ce.UP:M.preventDefault(),u(v);break;case ce.DOWN:M.preventDefault(),r(v);break;default:return}}function d(M){const{key:C}=M,v=M.target,T=M.target.nextElementSibling;switch(Ke(C)){case ce.LEFT:Mi(),Ns();break;case ce.RIGHT:Ql(v)&&p(v,T,!1);break;default:return}}function c(M,C,v){Mi(),el(),im(C),M.classList.add("open"),M.setAttribute("aria-expanded",!0),v||Bt(C)}function h(M,C){if(!Jl(M)){su(M);const v=document.querySelector(".prom-dropdown__listitems-menu.open");v.setAttribute("aria-expanded",!1),v.classList.remove("open"),C||Ns()}}function p(M,C,v){Jl(C)?c(M,C,v):h(C,!0)}function _(M){J.call(this,n,M)}function y(M){J.call(this,n,M)}function k(M){J.call(this,n,M)}function g(M){J.call(this,n,M)}function b(M){J.call(this,n,M)}function w(M){J.call(this,n,M)}return n.$$set=M=>{"isSubmenu"in M&&t(6,i=M.isSubmenu),"option"in M&&t(0,s=M.option)},[s,l,a,o,f,d,i,_,y,k,g,b,w]}class Cm extends Ue{constructor(e){super(),De(this,e,Im,ym,Le,{isSubmenu:6,option:0})}}function bs(){const e=(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&63|128;let t=0;return"xxxx-xx-xx-xx-xxxxxx".replace(/x/g,()=>{const i=("0"+e[t].toString(16)).slice(-2);return t+=1,i})}function ia(n,e,t){const i=n.slice();return i[8]=e[t],i}function sa(n){let e,t=n[3].label+"",i,s;return{c(){e=B("h2"),i=ge(t),m(e,"id",s=""+(n[0]+(n[1]+1))),m(e,"class","prom-dropdown__listheader")},m(l,a){P(l,e,a),S(e,i)},p(l,a){a&8&&t!==(t=l[3].label+"")&&Te(i,t),a&3&&s!==(s=""+(l[0]+(l[1]+1)))&&m(e,"id",s)},d(l){l&&R(e)}}}function la(n){let e,t;return e=new Cm({props:{isSubmenu:n[2],option:n[8]}}),e.$on("dropdownClose",n[5]),e.$on("click",n[6]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&4&&(l.isSubmenu=i[2]),s&8&&(l.option=i[8]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function vm(n){let e,t,i,s,l,a,o=n[3].label&&sa(n),r=en(n[3].options),u=[];for(let d=0;d<r.length;d+=1)u[d]=la(ia(n,r,d));const f=d=>A(u[d],1,1,()=>{u[d]=null});return{c(){o&&o.c(),e=W(),t=B("ul");for(let d=0;d<u.length;d+=1)u[d].c();m(t,"aria-labelledby",i=n[3].label?n[0]+(n[1]+1):null),m(t,"role","menu")},m(d,c){o&&o.m(d,c),P(d,e,c),P(d,t,c);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(t,null);s=!0,l||(a=Q(t,"keyup",n[7]),l=!0)},p(d,[c]){if(d[3].label?o?o.p(d,c):(o=sa(d),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c&12){r=en(d[3].options);let h;for(h=0;h<r.length;h+=1){const p=ia(d,r,h);u[h]?(u[h].p(p,c),I(u[h],1)):(u[h]=la(p),u[h].c(),I(u[h],1),u[h].m(t,null))}for(me(),h=r.length;h<u.length;h+=1)f(h);he()}(!s||c&11&&i!==(i=d[3].label?d[0]+(d[1]+1):null))&&m(t,"aria-labelledby",i)},i(d){if(!s){for(let c=0;c<r.length;c+=1)I(u[c]);s=!0}},o(d){u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)A(u[c]);s=!1},d(d){d&&(R(e),R(t)),o&&o.d(d),Vn(u,d),l=!1,a()}}}function Sm(n,e,t){const i=Qe();let{id:s=bs()}=e,{index:l=0}=e,{isSubmenu:a=!1}=e,{list:o=null}=e;function r(d){J.call(this,n,d)}function u(d){J.call(this,n,d)}const f=d=>i("keyup",d);return n.$$set=d=>{"id"in d&&t(0,s=d.id),"index"in d&&t(1,l=d.index),"isSubmenu"in d&&t(2,a=d.isSubmenu),"list"in d&&t(3,o=d.list)},[s,l,a,o,i,r,u,f]}class ou extends Ue{constructor(e){super(),De(this,e,Sm,vm,Le,{id:0,index:1,isSubmenu:2,list:3})}}const Em=n=>({}),aa=n=>({}),Am=n=>({}),oa=n=>({});function ra(n,e,t){const i=n.slice();return i[20]=e[t],i[22]=t,i}const Bm=n=>({}),ua=n=>({});function Rm(n){let e;const t=n[16].body,i=Qn(t,n,n[15],oa);return{c(){i&&i.c()},m(s,l){i&&i.m(s,l),e=!0},p(s,l){i&&i.p&&(!e||l&32768)&&$n(i,t,s,s[15],e?xn(t,s[15],l,Am):et(s[15]),oa)},i(s){e||(I(i,s),e=!0)},o(s){A(i,s),e=!1},d(s){i&&i.d(s)}}}function Pm(n){let e,t,i=en(n[1]),s=[];for(let a=0;a<i.length;a+=1)s[a]=fa(ra(n,i,a));const l=a=>A(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=Ye()},m(a,o){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(a,o);P(a,e,o),t=!0},p(a,o){if(o&771){i=en(a[1]);let r;for(r=0;r<i.length;r+=1){const u=ra(a,i,r);s[r]?(s[r].p(u,o),I(s[r],1)):(s[r]=fa(u),s[r].c(),I(s[r],1),s[r].m(e.parentNode,e))}for(me(),r=i.length;r<s.length;r+=1)l(r);he()}},i(a){if(!t){for(let o=0;o<i.length;o+=1)I(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)A(s[o]);t=!1},d(a){a&&R(e),Vn(s,a)}}}function fa(n){let e,t;return e=new ou({props:{id:n[0],index:n[22],list:n[20]}}),e.$on("click",n[9]),e.$on("dropdownClose",n[17]),e.$on("keyup",n[8]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&1&&(l.id=i[0]),s&2&&(l.list=i[20]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Lm(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y;const k=n[16].header,g=Qn(k,n,n[15],ua),b=[Pm,Rm],w=[];function M(T,E){return T[1].length?0:1}u=M(n),f=w[u]=b[u](n);const C=n[16].footer,v=Qn(C,n,n[15],aa);return{c(){e=B("section"),t=B("section"),i=W(),s=B("header"),g&&g.c(),l=W(),a=B("section"),o=B("section"),r=W(),f.c(),d=W(),c=B("footer"),v&&v.c(),m(t,"class",n[5]),m(s,"class","prom-dropdown__header"),m(o,"class","prom-dropdown__bodygradient-top"),m(a,"class","prom-dropdown__body"),m(c,"class","prom-dropdown__footer"),m(e,"class",h="prom-dropdown "+n[3]),e.hidden=n[4]},m(T,E){P(T,e,E),S(e,t),S(e,i),S(e,s),g&&g.m(s,null),S(e,l),S(e,a),S(a,o),S(a,r),w[u].m(a,null),S(e,d),S(e,c),v&&v.m(c,null),n[18](e),p=!0,_||(y=[Q(window,"click",n[6]),Q(window,"keyup",n[7])],_=!0)},p(T,[E]){(!p||E&32)&&m(t,"class",T[5]),g&&g.p&&(!p||E&32768)&&$n(g,k,T,T[15],p?xn(k,T[15],E,Bm):et(T[15]),ua);let N=u;u=M(T),u===N?w[u].p(T,E):(me(),A(w[N],1,1,()=>{w[N]=null}),he(),f=w[u],f?f.p(T,E):(f=w[u]=b[u](T),f.c()),I(f,1),f.m(a,null)),v&&v.p&&(!p||E&32768)&&$n(v,C,T,T[15],p?xn(C,T[15],E,Em):et(T[15]),aa),(!p||E&8&&h!==(h="prom-dropdown "+T[3]))&&m(e,"class",h),(!p||E&16)&&(e.hidden=T[4])},i(T){p||(I(g,T),I(f),I(v,T),p=!0)},o(T){A(g,T),A(f),A(v,T),p=!1},d(T){T&&R(e),g&&g.d(T),w[u].d(),v&&v.d(T),n[18](null),_=!1,nn(y)}}}function Nm(n,e,t){let i,s,l,{$$slots:a={},$$scope:o}=e;const r=Qe();let u,f,{arrow:d=!0}=e,{arrowPosition:c="top"}=e,{expanded:h=!1}=e,{id:p="prom-dropdown__list"}=e,{items:_=[]}=e,{responsive:y=!0}=e;function k(v){u.contains(v.target)||r("dropdownClose",v)}function g(v){const{key:T}=v;switch(Ke(T)){case ce.ESCAPE:h&&b(v);break;case ce.TAB:r("dropdownClose",v);break;default:return}}function b(v){const{key:T}=v;switch(Ke(T)){case ce.ESCAPE:lm()?(Mi(),Ns(),v.stopPropagation()):r("dropdownClose",v);break;case ce.UP:break;case ce.DOWN:break;default:return}}function w(v){r("selectedOption",{event:v,data:v.detail.data.value}),r("dropdownClose",v)}nt(()=>{t(14,f=new xs(u))});function M(v){J.call(this,n,v)}function C(v){le[v?"unshift":"push"](()=>{u=v,t(2,u)})}return n.$$set=v=>{"arrow"in v&&t(10,d=v.arrow),"arrowPosition"in v&&t(11,c=v.arrowPosition),"expanded"in v&&t(12,h=v.expanded),"id"in v&&t(0,p=v.id),"items"in v&&t(1,_=v.items),"responsive"in v&&t(13,y=v.responsive),"$$scope"in v&&t(15,o=v.$$scope)},n.$$.update=()=>{n.$$.dirty&3072&&t(5,i=d?`arrow-${c}`:""),n.$$.dirty&4096&&t(4,s=h?"":"hidden"),n.$$.dirty&8192&&t(3,l=y?"":"prom-dropdown--not-responsive"),n.$$.dirty&20482&&(_||h!==null)&&setTimeout(()=>{f.init()},0)},[p,_,u,l,s,i,k,g,b,w,d,c,h,y,f,o,a,M,C]}class ru extends Ue{constructor(e){super(),De(this,e,Nm,Lm,Le,{arrow:10,arrowPosition:11,expanded:12,id:0,items:1,responsive:13})}}function Fm(n){let e,t,i,s,l,a,o,r,u;t=new Bn({props:{ariaLabel:n[2],expanded:n[4],haspopup:!0,htmlType:"button",iconClass:"itsl-im2-options-button-dropdown__button__icon",iconOnly:!0,id:n[8],type:"plain"}}),t.$on("click",n[9]),t.$on("keydown",n[10]);function f(c){n[15](c)}let d={arrow:!1,id:n[0]+"-options-list",items:n[1]};return n[4]!==void 0&&(d.expanded=n[4]),l=new ru({props:d}),le.push(()=>Re(l,"expanded",f)),l.$on("dropdownClose",n[12]),l.$on("selectedOption",n[16]),{c(){e=B("div"),ie(t.$$.fragment),i=W(),s=B("div"),ie(l.$$.fragment),m(s,"class","itsl-im2-options-button-dropdown__dropdown-wrapper"),oe(s,"itsl-im2-options-button-dropdown__dropdown-wrapper--right-sided",n[7]),m(e,"class",n[3]),m(e,"style",n[6]),oe(e,"itsl-im2-options-button-dropdown-container--expanded",n[4])},m(c,h){P(c,e,h),ne(t,e,null),S(e,i),S(e,s),ne(l,s,null),n[17](s),o=!0,r||(u=Q(s,"keydown",n[11]),r=!0)},p(c,[h]){const p={};h&4&&(p.ariaLabel=c[2]),h&16&&(p.expanded=c[4]),t.$set(p);const _={};h&1&&(_.id=c[0]+"-options-list"),h&2&&(_.items=c[1]),!a&&h&16&&(a=!0,_.expanded=c[4],Be(()=>a=!1)),l.$set(_),(!o||h&128)&&oe(s,"itsl-im2-options-button-dropdown__dropdown-wrapper--right-sided",c[7]),(!o||h&8)&&m(e,"class",c[3]),(!o||h&64)&&m(e,"style",c[6]),(!o||h&24)&&oe(e,"itsl-im2-options-button-dropdown-container--expanded",c[4])},i(c){o||(I(t.$$.fragment,c),I(l.$$.fragment,c),o=!0)},o(c){A(t.$$.fragment,c),A(l.$$.fragment,c),o=!1},d(c){c&&R(e),te(t),te(l),n[17](null),r=!1,u()}}}const da=250,Om=40,Dm=10;function Um(n,e,t){let{id:i}=e,{dropdownOptions:s}=e,{buttonReaderDescription:l=""}=e,{parentElement:a}=e,{containerClass:o=""}=e,r,u,f,d="",c=!1;const h=Qe(),p=i.concat("-button");nt(()=>_());async function _(){await ln(),u=document.getElementById(p)}async function y(E,N=!1){t(6,d=w()),t(4,r=!r),r&&N&&(await ln(),Bt(f))}async function k(E){switch(Ke(E.key)){case ce.DOWN:{E.preventDefault(),E.stopPropagation(),t(4,r=!0),await ln(),Bt(f);break}case ce.ENTER:case ce.SPACE:E.preventDefault(),await y(E,!0);break}h("buttonKeyDown",E)}function g(E){[ce.ESCAPE,ce.UP,ce.DOWN].includes(Ke(E.key))&&E.stopPropagation()}function b({detail:E}){if(u&&u.contains(E.target))return;const{key:N}=E;switch(t(4,r=!1),Ke(N)){case ce.ESCAPE:u&&u.focus(),E.stopPropagation();break;default:return}}function w(){const E=s[0].options.length,N=u&&u.offsetWidth||0,F=u&&u.offsetHeight||0,L=u&&u.offsetLeft||0,O=u&&a&&a.offsetTop+a.offsetHeight-u.offsetTop-u.offsetHeight||0,j=E*Om,X=j<O?0:j+F+Dm;t(7,c=L>da);const ue={buttonWidth:`${N}px`,optionsButtonOffsetLeft:`${L}px`,dropdownOffsetTop:`${X}px`,dropdownWidth:`${da}px`};return Object.keys(ue).reduce((ke,ye)=>ke.concat(`--${ye}: ${ue[ye]}; `),"")}function M(){u.focus()}function C(E){r=E,t(4,r)}function v(E){J.call(this,n,E)}function T(E){le[E?"unshift":"push"](()=>{f=E,t(5,f)})}return n.$$set=E=>{"id"in E&&t(0,i=E.id),"dropdownOptions"in E&&t(1,s=E.dropdownOptions),"buttonReaderDescription"in E&&t(2,l=E.buttonReaderDescription),"parentElement"in E&&t(13,a=E.parentElement),"containerClass"in E&&t(3,o=E.containerClass)},[i,s,l,o,r,f,d,c,p,y,k,g,b,a,M,C,v,T]}class uu extends Ue{constructor(e){super(),De(this,e,Um,Fm,Le,{id:0,dropdownOptions:1,buttonReaderDescription:2,parentElement:13,containerClass:3,focus:14})}get focus(){return this.$$.ctx[14]}}function ca(n){let e=n[0].ExtraUserInformation+"",t,i,s;return{c(){t=ge(e),i=W(),s=B("span"),s.textContent="",m(s,"aria-hidden","true")},m(l,a){P(l,t,a),P(l,i,a),P(l,s,a)},p(l,a){a&1&&e!==(e=l[0].ExtraUserInformation+"")&&Te(t,e)},d(l){l&&(R(t),R(i),R(s))}}}function ma(n){let e,t,i=n[5].messagesDisabled+"",s;return{c(){e=B("span"),e.textContent="",t=W(),s=ge(i),m(e,"aria-hidden","true")},m(l,a){P(l,e,a),P(l,t,a),P(l,s,a)},p:we,d(l){l&&(R(e),R(t),R(s))}}}function ha(n){let e,t;return e=new uu({props:{containerClass:"itsl-im2-participant__options",id:n[4],buttonReaderDescription:$(n[5].conversationSettingsParticipantOptions,n[0].FullName),dropdownOptions:n[2],parentElement:n[1]}}),e.$on("selectedOption",n[6]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&16&&(l.id=i[4]),s&1&&(l.buttonReaderDescription=$(i[5].conversationSettingsParticipantOptions,i[0].FullName)),s&4&&(l.dropdownOptions=i[2]),s&2&&(l.parentElement=i[1]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Hm(n){let e,t,i,s,l,a=n[0].FullName+"",o,r,u,f,d=n[0].RoleInHierarchyTitle+"",c,h,p,_,y,k;t=new es({props:{src:n[0].ProfileImageUrlSmall}});let g=n[0].ExtraUserInformation&&ca(n),b=!n[0].CanReceive&&ma(n),w=n[2][0].options.length>0&&ha(n),M={};return y=new _s({props:M}),n[10](y),y.$on("confirm",n[7]),{c(){e=B("li"),ie(t.$$.fragment),i=W(),s=B("div"),l=B("div"),o=ge(a),r=W(),u=B("div"),g&&g.c(),f=W(),c=ge(d),h=W(),b&&b.c(),p=W(),w&&w.c(),_=W(),ie(y.$$.fragment),m(l,"class","itsl-im2-participant__name-details__name"),m(u,"class","itsl-im2-shared__info"),m(s,"class","itsl-im2-participant__name-details"),m(e,"class","itsl-im2-participant")},m(C,v){P(C,e,v),ne(t,e,null),S(e,i),S(e,s),S(s,l),S(l,o),S(s,r),S(s,u),g&&g.m(u,null),S(u,f),S(u,c),S(u,h),b&&b.m(u,null),S(e,p),w&&w.m(e,null),S(e,_),ne(y,e,null),k=!0},p(C,[v]){const T={};v&1&&(T.src=C[0].ProfileImageUrlSmall),t.$set(T),(!k||v&1)&&a!==(a=C[0].FullName+"")&&Te(o,a),C[0].ExtraUserInformation?g?g.p(C,v):(g=ca(C),g.c(),g.m(u,f)):g&&(g.d(1),g=null),(!k||v&1)&&d!==(d=C[0].RoleInHierarchyTitle+"")&&Te(c,d),C[0].CanReceive?b&&(b.d(1),b=null):b?b.p(C,v):(b=ma(C),b.c(),b.m(u,null)),C[2][0].options.length>0?w?(w.p(C,v),v&4&&I(w,1)):(w=ha(C),w.c(),I(w,1),w.m(e,_)):w&&(me(),A(w,1,1,()=>{w=null}),he());const E={};y.$set(E)},i(C){k||(I(t.$$.fragment,C),I(w),I(y.$$.fragment,C),k=!0)},o(C){A(t.$$.fragment,C),A(w),A(y.$$.fragment,C),k=!1},d(C){C&&R(e),te(t),g&&g.d(),b&&b.d(),w&&w.d(),n[10](null),te(y)}}}function Wm(n,e,t){let i,{participant:s}=e,{threadId:l}=e,{canRemoveParticipant:a}=e,{participantListElement:o}=e;const r=Qe(),u=re.i18n;let f,d,c,h;function p(g){switch(g.detail.data.action){case sl.remove:c=s.PersonId,h=s.FullName,d.prompt({confirmButtonType:"destructive",confirmText:u.remove,cancelText:u.deleteCancel,titleText:$(u.removeXQuestion,h),bodyText:u.removeParticipantExplanation});break}}async function _(){try{await Or(l,c),r("participantRemoved")}catch{y(Se.participantDeleteFailed,$(u.removeUserError,h))}}function y(g,b){r("raiseError",{errorType:g,errorText:b})}function k(g){le[g?"unshift":"push"](()=>{d=g,t(3,d)})}return n.$$set=g=>{"participant"in g&&t(0,s=g.participant),"threadId"in g&&t(8,l=g.threadId),"canRemoveParticipant"in g&&t(9,a=g.canRemoveParticipant),"participantListElement"in g&&t(1,o=g.participantListElement)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=`itsl-im2-message-options-${s.PersonId}`),n.$$.dirty&516&&(t(2,f=[{options:[]}]),a&&f[0].options.push({label:u.remove,link:!1,value:{action:sl.remove}}))},[s,o,f,d,i,u,p,_,l,a,k]}class fu extends Ue{constructor(e){super(),De(this,e,Wm,Hm,Le,{participant:0,threadId:8,canRemoveParticipant:9,participantListElement:1})}}class du{constructor(e){this.instantMessageThreadId=e}async getSuggestedItems(e,t){const i=await Nr({searchText:t,instantMessageThreadId:this.instantMessageThreadId});return Kr(i.filter(({Id:s})=>!e.includes(s)))}}function ga(n){let e,t,i,s,l;return{c(){e=B("div"),t=B("div"),i=B("div"),m(i,"class",s="prom-loading-spinner__spinner "+n[0]),m(t,"class",l="prom-loading-spinner "+n[9]),m(t,"role","progressbar"),m(t,"aria-label",n[1]),m(t,"aria-valuemin",n[8]),m(t,"aria-valuemax",n[7]),m(t,"aria-valuenow",n[6]),m(t,"aria-valuetext",n[5]),oe(e,"prom-loading-spinner-page",n[3])},m(a,o){P(a,e,o),S(e,t),S(t,i)},p(a,o){o&1&&s!==(s="prom-loading-spinner__spinner "+a[0])&&m(i,"class",s),o&512&&l!==(l="prom-loading-spinner "+a[9])&&m(t,"class",l),o&2&&m(t,"aria-label",a[1]),o&256&&m(t,"aria-valuemin",a[8]),o&128&&m(t,"aria-valuemax",a[7]),o&64&&m(t,"aria-valuenow",a[6]),o&32&&m(t,"aria-valuetext",a[5]),o&8&&oe(e,"prom-loading-spinner-page",a[3])},d(a){a&&R(e)}}}function zm(n){let e,t,i,s,l=n[2]&&ga(n);return{c(){e=B("div"),t=ge(n[4]),i=W(),l&&l.c(),s=Ye(),m(e,"aria-live","polite"),m(e,"class","screen-reader")},m(a,o){P(a,e,o),S(e,t),P(a,i,o),l&&l.m(a,o),P(a,s,o)},p(a,[o]){o&16&&Te(t,a[4]),a[2]?l?l.p(a,o):(l=ga(a),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},i:we,o:we,d(a){a&&(R(e),R(i),R(s)),l&&l.d(a)}}}function Vm(n,e,t,i){return n?t?i||"":e||"":""}function qm(n,e,t){let i,s,l,a,o,r,{size:u="medium"}=e,{iconClass:f=""}=e,{label:d}=e,{statusText:c=void 0}=e,{visible:h=!1}=e,{pageLoading:p=!1}=e,{progressEnabled:_=!1}=e,{progressMin:y=0}=e,{progressMax:k=100}=e,{progressValue:g=0}=e,{progressText:b=void 0}=e;return n.$$set=w=>{"size"in w&&t(10,u=w.size),"iconClass"in w&&t(0,f=w.iconClass),"label"in w&&t(1,d=w.label),"statusText"in w&&t(11,c=w.statusText),"visible"in w&&t(2,h=w.visible),"pageLoading"in w&&t(3,p=w.pageLoading),"progressEnabled"in w&&t(12,_=w.progressEnabled),"progressMin"in w&&t(13,y=w.progressMin),"progressMax"in w&&t(14,k=w.progressMax),"progressValue"in w&&t(15,g=w.progressValue),"progressText"in w&&t(16,b=w.progressText)},n.$$.update=()=>{n.$$.dirty&1024&&t(9,i=`prom-loading-spinner--${u}`),n.$$.dirty&12288&&t(8,s=_?y:void 0),n.$$.dirty&20480&&t(7,l=_?k:void 0),n.$$.dirty&38912&&t(6,a=_?isNaN(g)?0:g:c?0:void 0),n.$$.dirty&71680&&t(5,o=_?b||"":c),n.$$.dirty&71684&&t(4,r=Vm(h,c,_,b)),n.$$.dirty&12&&(document.body.inert=h&&p,document.body.classList.toggle("disable-scroll",h&&p))},[f,d,h,p,r,o,a,l,s,i,u,c,_,y,k,g,b]}class cu extends Ue{constructor(e){super(),De(this,e,qm,zm,Le,{size:10,iconClass:0,label:1,statusText:11,visible:2,pageLoading:3,progressEnabled:12,progressMin:13,progressMax:14,progressValue:15,progressText:16})}}class Xm{constructor(e){this.suggestedItems=e||[]}setSuggestedItems(e){this.suggestedItems=e}createNewItem(e){return{label:e.trim()}}checkIfShowCreateNewItem(e,t,i){return i&&i.trim()&&!e.some(s=>s.label.trim().toLowerCase()===i.trim().toLowerCase())&&!t.some(s=>s.label.trim().toLowerCase()===i.trim().toLowerCase())}getSuggestedItems(e,t){let i=this.suggestedItems.filter(s=>!e.some(l=>l===s.value));return t&&(i=i.filter(s=>s.label.toLocaleLowerCase().includes(t.toLocaleLowerCase()))),i}}function _a(n,e,t){const i=n.slice();return i[76]=e[t],i[78]=t,i}function ba(n,e,t){const i=n.slice();return i[79]=e[t],i[78]=t,i}function pa(n){let e,t;return{c(){e=B("label"),t=ge(n[1]),m(e,"class","prom-multi-selector__label"),m(e,"id",n[31]),m(e,"for",n[3])},m(i,s){P(i,e,s),S(e,t),n[47](e)},p(i,s){s[0]&2&&Te(t,i[1]),s[1]&1&&m(e,"id",i[31]),s[0]&8&&m(e,"for",i[3])},d(i){i&&R(e),n[47](null)}}}function wa(n){var o,r;let e,t,i,s=n[35]((o=n[79])==null?void 0:o.avatarAlternativeText),l;t=new es({props:{src:n[79].icon,size:mu,alternativeText:((r=n[79])==null?void 0:r.avatarAlternativeText)||""}});let a=s&&ka();return{c(){e=B("div"),ie(t.$$.fragment),i=W(),a&&a.c(),m(e,"class","prom-multi-selector__selected-item-icon")},m(u,f){P(u,e,f),ne(t,e,null),S(e,i),a&&a.m(e,null),l=!0},p(u,f){var c,h;const d={};f[0]&1&&(d.src=u[79].icon),f[0]&1&&(d.alternativeText=((c=u[79])==null?void 0:c.avatarAlternativeText)||""),t.$set(d),f[0]&1&&(s=u[35]((h=u[79])==null?void 0:h.avatarAlternativeText)),s?a||(a=ka(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){l||(I(t.$$.fragment,u),l=!0)},o(u){A(t.$$.fragment,u),l=!1},d(u){u&&R(e),te(t),a&&a.d()}}}function ka(n){let e;return{c(){e=B("span"),e.textContent=".",m(e,"class","screen-reader")},m(t,i){P(t,e,i)},d(t){t&&R(e)}}}function Ta(n){let e,t;return{c(){e=B("div"),m(e,"class",t="prom-multi-selector__custom-icon "+n[79].cssIconClass)},m(i,s){P(i,e,s)},p(i,s){s[0]&1&&t!==(t="prom-multi-selector__custom-icon "+i[79].cssIconClass)&&m(e,"class",t)},d(i){i&&R(e)}}}function Ma(n){let e,t,i;function s(...l){return n[48](n[79],...l)}return{c(){e=B("div"),e.innerHTML="",m(e,"class","prom-multi-selector__selected-item-close")},m(l,a){P(l,e,a),t||(i=Q(e,"click",s),t=!0)},p(l,a){n=l},d(l){l&&R(e),t=!1,i()}}}function ya(n){let e,t,i,s,l=n[79].label+"",a,o,r,u=(n[79].icon||n[79].isUser)&&wa(n),f=n[79].cssIconClass&&!n[79].isUser&&Ta(n),d=!n[8]&&Ma(n);return{c(){e=B("div"),u&&u.c(),t=W(),f&&f.c(),i=W(),s=B("div"),a=ge(l),o=W(),d&&d.c(),m(s,"class","prom-multi-selector__selected-item-label"),m(e,"class","prom-multi-selector__selected-item"),oe(e,"focused",n[78]===n[18])},m(c,h){P(c,e,h),u&&u.m(e,null),S(e,t),f&&f.m(e,null),S(e,i),S(e,s),S(s,a),S(e,o),d&&d.m(e,null),r=!0},p(c,h){c[79].icon||c[79].isUser?u?(u.p(c,h),h[0]&1&&I(u,1)):(u=wa(c),u.c(),I(u,1),u.m(e,t)):u&&(me(),A(u,1,1,()=>{u=null}),he()),c[79].cssIconClass&&!c[79].isUser?f?f.p(c,h):(f=Ta(c),f.c(),f.m(e,i)):f&&(f.d(1),f=null),(!r||h[0]&1)&&l!==(l=c[79].label+"")&&Te(a,l),c[8]?d&&(d.d(1),d=null):d?d.p(c,h):(d=Ma(c),d.c(),d.m(e,null)),(!r||h[0]&262144)&&oe(e,"focused",c[78]===c[18])},i(c){r||(I(u),r=!0)},o(c){A(u),r=!1},d(c){c&&R(e),u&&u.d(),f&&f.d(),d&&d.d()}}}function Ia(n){let e,t,i,s,l,a,o=n[15]&&Ca(n),r=!n[15]&&va(n),u=n[14].length===0&&!n[15]&&!n[11]&&Pa(n);return{c(){e=B("div"),o&&o.c(),t=W(),i=B("ul"),r&&r.c(),s=W(),u&&u.c(),m(i,"class","prom-multi-selector__popup-container-list"),m(i,"role","listbox"),m(i,"id",n[17]),m(i,"aria-labelledby",n[31]),m(i,"aria-label",n[30]),m(i,"tabindex","-1"),m(e,"class",l="prom-multi-selector__popup-container prom-multi-selector__popup-container--"+n[7])},m(f,d){P(f,e,d),o&&o.m(e,null),S(e,t),S(e,i),r&&r.m(i,null),S(e,s),u&&u.m(e,null),n[53](e),a=!0},p(f,d){f[15]?o?(o.p(f,d),d[0]&32768&&I(o,1)):(o=Ca(f),o.c(),I(o,1),o.m(e,t)):o&&(me(),A(o,1,1,()=>{o=null}),he()),f[15]?r&&(me(),A(r,1,1,()=>{r=null}),he()):r?(r.p(f,d),d[0]&32768&&I(r,1)):(r=va(f),r.c(),I(r,1),r.m(i,null)),(!a||d[0]&131072)&&m(i,"id",f[17]),(!a||d[1]&1)&&m(i,"aria-labelledby",f[31]),(!a||d[0]&1073741824)&&m(i,"aria-label",f[30]),f[14].length===0&&!f[15]&&!f[11]?u?u.p(f,d):(u=Pa(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null),(!a||d[0]&128&&l!==(l="prom-multi-selector__popup-container prom-multi-selector__popup-container--"+f[7]))&&m(e,"class",l)},i(f){a||(I(o),I(r),a=!0)},o(f){A(o),A(r),a=!1},d(f){f&&R(e),o&&o.d(),r&&r.d(),u&&u.d(),n[53](null)}}}function Ca(n){let e,t,i;return t=new cu({props:{label:n[10].loading,size:"medium",visible:!0}}),{c(){e=B("div"),ie(t.$$.fragment),m(e,"class","prom-multi-selector__loading")},m(s,l){P(s,e,l),ne(t,e,null),i=!0},p(s,l){const a={};l[0]&1024&&(a.label=s[10].loading),t.$set(a)},i(s){i||(I(t.$$.fragment,s),i=!0)},o(s){A(t.$$.fragment,s),i=!1},d(s){s&&R(e),te(t)}}}function va(n){let e,t,i,s=en(n[14]),l=[];for(let r=0;r<s.length;r+=1)l[r]=Ba(_a(n,s,r));const a=r=>A(l[r],1,1,()=>{l[r]=null});let o=n[25]&&Ra(n);return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=W(),o&&o.c(),t=Ye()},m(r,u){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(r,u);P(r,e,u),o&&o.m(r,u),P(r,t,u),i=!0},p(r,u){if(u[0]&16896|u[1]&144){s=en(r[14]);let f;for(f=0;f<s.length;f+=1){const d=_a(r,s,f);l[f]?(l[f].p(d,u),I(l[f],1)):(l[f]=Ba(d),l[f].c(),I(l[f],1),l[f].m(e.parentNode,e))}for(me(),f=s.length;f<l.length;f+=1)a(f);he()}r[25]?o?o.p(r,u):(o=Ra(r),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i(r){if(!i){for(let u=0;u<s.length;u+=1)I(l[u]);i=!0}},o(r){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)A(l[u]);i=!1},d(r){r&&(R(e),R(t)),Vn(l,r),o&&o.d(r)}}}function Sa(n){var o,r;let e,t,i,s=n[35]((o=n[76])==null?void 0:o.avatarAlternativeText),l;t=new es({props:{src:n[76].icon,size:mu,alternativeText:((r=n[76])==null?void 0:r.avatarAlternativeText)||""}});let a=s&&Ea();return{c(){e=B("div"),ie(t.$$.fragment),i=W(),a&&a.c(),m(e,"class","prom-multi-selector__option-icon")},m(u,f){P(u,e,f),ne(t,e,null),S(e,i),a&&a.m(e,null),l=!0},p(u,f){var c,h;const d={};f[0]&16384&&(d.src=u[76].icon),f[0]&16384&&(d.alternativeText=((c=u[76])==null?void 0:c.avatarAlternativeText)||""),t.$set(d),f[0]&16384&&(s=u[35]((h=u[76])==null?void 0:h.avatarAlternativeText)),s?a||(a=Ea(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){l||(I(t.$$.fragment,u),l=!0)},o(u){A(t.$$.fragment,u),l=!1},d(u){u&&R(e),te(t),a&&a.d()}}}function Ea(n){let e;return{c(){e=B("span"),e.textContent=".",m(e,"class","screen-reader")},m(t,i){P(t,e,i)},d(t){t&&R(e)}}}function Aa(n){let e,t;return{c(){e=B("div"),m(e,"class",t=n[76].cssIconClass+" prom-multi-selector__custom-icon")},m(i,s){P(i,e,s)},p(i,s){s[0]&16384&&t!==(t=i[76].cssIconClass+" prom-multi-selector__custom-icon")&&m(e,"class",t)},d(i){i&&R(e)}}}function Km(n){let e=n[76].label+"",t;return{c(){t=ge(e)},m(i,s){P(i,t,s)},p(i,s){s[0]&16384&&e!==(e=i[76].label+"")&&Te(t,e)},d(i){i&&R(t)}}}function jm(n){let e,t=n[76].label+"",i,s,l,a,o=n[76].secondLabel+"",r;return{c(){e=B("div"),i=ge(t),s=B("span"),s.textContent=".",l=W(),a=B("div"),r=ge(o),m(s,"class","screen-reader"),m(e,"class","prom-multi-selector__option-label-main"),m(a,"class","prom-multi-selector__option-label-second")},m(u,f){P(u,e,f),S(e,i),S(e,s),P(u,l,f),P(u,a,f),S(a,r)},p(u,f){f[0]&16384&&t!==(t=u[76].label+"")&&Te(i,t),f[0]&16384&&o!==(o=u[76].secondLabel+"")&&Te(r,o)},d(u){u&&(R(e),R(l),R(a))}}}function Ba(n){let e,t,i,s,l,a,o,r,u,f,d=(n[76].icon||n[76].isUser)&&Sa(n),c=n[76].cssIconClass&&!n[76].isUser&&Aa(n);function h(k,g){return k[9]?jm:Km}let p=h(n),_=p(n);function y(...k){return n[51](n[76],...k)}return{c(){e=B("li"),t=B("div"),d&&d.c(),i=W(),c&&c.c(),s=W(),l=B("div"),_.c(),a=W(),m(l,"class","prom-multi-selector__option-label"),oe(l,"prom-multi-selector__option-label--two-lines",n[9]),m(t,"class","prom-multi-selector__option-content"),m(e,"class","prom-multi-selector__option"),m(e,"role","option"),m(e,"id","option_"+n[78]),m(e,"data-value",o=n[76].value),m(e,"aria-selected","false"),m(e,"tabindex","-1")},m(k,g){P(k,e,g),S(e,t),d&&d.m(t,null),S(t,i),c&&c.m(t,null),S(t,s),S(t,l),_.m(l,null),S(e,a),r=!0,u||(f=Q(e,"click",y),u=!0)},p(k,g){n=k,n[76].icon||n[76].isUser?d?(d.p(n,g),g[0]&16384&&I(d,1)):(d=Sa(n),d.c(),I(d,1),d.m(t,i)):d&&(me(),A(d,1,1,()=>{d=null}),he()),n[76].cssIconClass&&!n[76].isUser?c?c.p(n,g):(c=Aa(n),c.c(),c.m(t,s)):c&&(c.d(1),c=null),p===(p=h(n))&&_?_.p(n,g):(_.d(1),_=p(n),_&&(_.c(),_.m(l,null))),(!r||g[0]&512)&&oe(l,"prom-multi-selector__option-label--two-lines",n[9]),(!r||g[0]&16384&&o!==(o=n[76].value))&&m(e,"data-value",o)},i(k){r||(I(d),r=!0)},o(k){A(d),r=!1},d(k){k&&R(e),d&&d.d(),c&&c.d(),_.d(),u=!1,f()}}}function Ra(n){let e,t,i,s,l,a,o=$(n[10].createNewItem,n[12])+"",r,u,f,d;return{c(){e=B("li"),t=B("div"),i=B("div"),s=W(),l=B("div"),a=B("div"),r=ge(o),m(i,"class","prom-multi-selector__custom-icon prom-multi-selector__add-icon"),m(a,"class","prom-multi-selector__option-label-main"),m(l,"class","prom-multi-selector__option-label"),m(t,"class","prom-multi-selector__option-content"),m(e,"class","prom-multi-selector__option"),m(e,"role","option"),m(e,"id",u="option_"+n[32]),m(e,"data-custom","true"),m(e,"data-value",n[12]),m(e,"aria-selected","false"),m(e,"tabindex","-1")},m(c,h){P(c,e,h),S(e,t),S(t,i),S(t,s),S(t,l),S(l,a),S(a,r),f||(d=Q(e,"click",n[52]),f=!0)},p(c,h){h[0]&5120&&o!==(o=$(c[10].createNewItem,c[12])+"")&&Te(r,o),h[1]&2&&u!==(u="option_"+c[32])&&m(e,"id",u),h[0]&4096&&m(e,"data-value",c[12])},d(c){c&&R(e),f=!1,d()}}}function Pa(n){let e,t,i,s=(n[12]?n[10].noResults:n[10].noItems)+"",l;return{c(){e=B("div"),t=B("div"),i=B("div"),l=ge(s),m(i,"class","prom-multi-selector__option-label"),m(t,"class","prom-multi-selector__option-content"),m(e,"class","prom-multi-selector__option prom-multi-selector__option--non-interactive")},m(a,o){P(a,e,o),S(e,t),S(t,i),S(i,l)},p(a,o){o[0]&5120&&s!==(s=(a[12]?a[10].noResults:a[10].noItems)+"")&&Te(l,s)},d(a){a&&R(e)}}}function La(n){let e,t;return{c(){e=B("div"),t=ge(n[6]),m(e,"class","prom-multi-selector__error-message")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s[0]&64&&Te(t,i[6])},d(i){i&&R(e)}}}function Ym(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g=!n[2]&&pa(n),b=en(n[0]),w=[];for(let T=0;T<b.length;T+=1)w[T]=ya(ba(n,b,T));const M=T=>A(w[T],1,1,()=>{w[T]=null});let C=n[13]&&Ia(n),v=n[5]&&n[6]&&La(n);return{c(){e=B("div"),t=B("div"),i=ge(n[19]),s=W(),g&&g.c(),l=W(),a=B("div"),o=B("div"),r=B("div");for(let T=0;T<w.length;T+=1)w[T].c();u=W(),f=B("div"),d=B("input"),h=W(),C&&C.c(),p=W(),v&&v.c(),m(t,"aria-live","polite"),m(t,"class","screen-reader"),m(d,"id",n[3]),m(d,"type","text"),m(d,"placeholder",c=n[10].placeholder),m(d,"spellcheck","false"),m(d,"autocomplete","off"),m(d,"role","combobox"),d.disabled=n[8],m(d,"aria-expanded",n[16]),m(d,"aria-controls",n[28]),m(d,"aria-owns",n[28]),m(d,"aria-labelledby",n[31]),m(d,"aria-describedby",n[29]),m(d,"aria-activedescendant",n[27]),m(d,"aria-haspopup",n[26]),m(d,"aria-autocomplete","list"),m(d,"aria-label",n[30]),m(f,"class","prom-multi-selector__input"),m(r,"class","prom-multi-selector__value-container"),m(r,"id",n[29]),m(o,"class","prom-multi-selector__value"),m(a,"class","prom-multi-selector__container"),oe(a,"prom-multi-selector__container--has-error",n[5]),oe(a,"prom-multi-selector__container--disabled",n[8]),m(e,"class","prom-multi-selector")},m(T,E){P(T,e,E),S(e,t),S(t,i),S(e,s),g&&g.m(e,null),S(e,l),S(e,a),S(a,o),S(o,r);for(let N=0;N<w.length;N+=1)w[N]&&w[N].m(r,null);S(r,u),S(r,f),S(f,d),n[49](d),hn(d,n[12]),S(a,h),C&&C.m(a,null),n[54](a),S(e,p),v&&v.m(e,null),n[55](e),_=!0,y||(k=[Q(window,"keydown",n[36]),Q(window,"keyup",n[37]),Q(window,"click",n[40]),Q(d,"keydown",n[41]),Q(d,"keyup",n[34]),Q(d,"input",n[50]),Q(d,"input",n[33])],y=!0)},p(T,E){if((!_||E[0]&524288)&&Te(i,T[19]),T[2]?g&&(g.d(1),g=null):g?g.p(T,E):(g=pa(T),g.c(),g.m(e,l)),E[0]&262401|E[1]&272){b=en(T[0]);let N;for(N=0;N<b.length;N+=1){const F=ba(T,b,N);w[N]?(w[N].p(F,E),I(w[N],1)):(w[N]=ya(F),w[N].c(),I(w[N],1),w[N].m(r,u))}for(me(),N=b.length;N<w.length;N+=1)M(N);he()}(!_||E[0]&8)&&m(d,"id",T[3]),(!_||E[0]&1024&&c!==(c=T[10].placeholder))&&m(d,"placeholder",c),(!_||E[0]&256)&&(d.disabled=T[8]),(!_||E[0]&65536)&&m(d,"aria-expanded",T[16]),(!_||E[0]&268435456)&&m(d,"aria-controls",T[28]),(!_||E[0]&268435456)&&m(d,"aria-owns",T[28]),(!_||E[1]&1)&&m(d,"aria-labelledby",T[31]),(!_||E[0]&536870912)&&m(d,"aria-describedby",T[29]),(!_||E[0]&134217728)&&m(d,"aria-activedescendant",T[27]),(!_||E[0]&67108864)&&m(d,"aria-haspopup",T[26]),(!_||E[0]&1073741824)&&m(d,"aria-label",T[30]),E[0]&4096&&d.value!==T[12]&&hn(d,T[12]),(!_||E[0]&536870912)&&m(r,"id",T[29]),T[13]?C?(C.p(T,E),E[0]&8192&&I(C,1)):(C=Ia(T),C.c(),I(C,1),C.m(a,null)):C&&(me(),A(C,1,1,()=>{C=null}),he()),(!_||E[0]&32)&&oe(a,"prom-multi-selector__container--has-error",T[5]),(!_||E[0]&256)&&oe(a,"prom-multi-selector__container--disabled",T[8]),T[5]&&T[6]?v?v.p(T,E):(v=La(T),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i(T){if(!_){for(let E=0;E<b.length;E+=1)I(w[E]);I(C),_=!0}},o(T){w=w.filter(Boolean);for(let E=0;E<w.length;E+=1)A(w[E]);A(C),_=!1},d(T){T&&R(e),g&&g.d(),Vn(w,T),n[49](null),C&&C.d(),n[54](null),v&&v.d(),n[55](null),y=!1,nn(k)}}}const mu=100;function gi(n,e){return n===e||n.contains(e)}function Gm(n,e,t){switch(t){case"down":return e===n-1?0:e+1>=n?n-1:e+1;case"up":return e===0?n-1:e-1<0?0:e-1}}function Zm(n,e,t){let i,s,l,a,o,r,u,f,d,c;const h=Qe();let{label:p}=e,{labelHidden:_=!1}=e,{id:y="rnd"+Math.random().toString(36)}=e,{selectedItems:k=[]}=e,{suggestedItems:g=[]}=e,{dataProvider:b=new Xm(g)}=e,{hasError:w=!1}=e,{errorMessage:M=void 0}=e,{popupSize:C="medium"}=e,{disabled:v=!1}=e,{secondLine:T=!1}=e,{clearFilterAfterSelect:E=!0}=e,{openPopupWithNoSearch:N=!0}=e,{i18n:F={noResults:"No results are found...",noItems:"No items to select",loading:"Loading",placeholder:"Search items",selectedItemInFocus:"Selected item: {0}",noMatchFound:"no match found",singleMatchFound:"1 match found",pluralMatchFound:"{0} matches found",createNewItem:'Add item "{0}"'}}=e,{canCreateNewItems:L=!1}=e,O="",j=!1,ee,X,ue="",ke=[],ye=!1,ae,K,pe,Y,qe,Ce;nt(async()=>{await H()});async function be(){await H(),O?(Ne(),x()):!N&&ke.length===0&&Ge()}function Xe(Z){Ke(Z.key)===ce.ESCAPE&&j&&(Ge(),Z.stopPropagation())}const We=Z=>Z?/[\p{L}\d]/u.test(Z[Z.length-1]):!1;async function je(Z){if(!gi(pe,document.activeElement))return;const Pe=Ke(Z.key),He=Z.altKey;switch(Pe){case ce.ENTER:Ee();break;case ce.BACKSPACE:await gn();break;case ce.DOWN:Y?(Ie("down","single"),Z.preventDefault()):(Ne(),await H());break;case ce.UP:He?Ge():(Ie("up","single"),Z.preventDefault());break;case ce.LEFT:an();break;case ce.RIGHT:vn();break;case"PageDown":Ie("down","page"),Z.preventDefault();break;case"PageUp":Ie("up","page"),Z.preventDefault();break;case"Home":Ie("up","all"),Z.preventDefault();break;case"End":Ie("down","all"),Z.preventDefault();break}}function se(){gi(pe,document.activeElement)||(Ge(),x())}function x(){t(18,X=void 0),t(19,ue="")}async function Me(Z,Pe){Pe&&Pe.stopPropagation(),k.push(Z),t(0,k),await H(),K.focus(),E&&(t(12,O=""),await H())}async function V(Z,Pe){if(v)return;Pe&&Pe.stopPropagation();const He=k.findIndex(Ze=>Ze===Z);k.splice(He,1),t(0,k),await H(),K.focus()}async function H(){const Z=k.map(Pe=>Pe.value);try{t(15,ye=!0),t(14,ke=await Promise.resolve(b.getSuggestedItems(Z,O))),t(15,ye=!1),await ln(),q(),!N&&ke.length===0&&Ge()}catch(Pe){t(15,ye=!1),Fe(Pe)}}function q(){if(Y){const Z=Array.from(Y.querySelectorAll(".prom-multi-selector__option[role='option']"));Z&&Z.length>0?(isNaN(ee)&&t(45,ee=0),ee>=Z.length&&t(45,ee=Z.length-1),Sn(Z[ee],ee)):t(45,ee=void 0),Z&&t(19,ue=cn(Z.length))}}async function fe(Z){!Z.screenX&&!Z.screenY||(gi(pe,Z.target)?K.focus():Ge(),gi(qe,Z.target)&&(Ne(),await H()),Z.target===Ce&&Z.preventDefault(),x())}function Ne(){!N&&!O&&ke.length===0||!j&&gi(pe,document.activeElement)&&(t(13,j=!0),t(45,ee=0),ln().then(()=>q()))}function Ge(){t(13,j=!1),t(45,ee=void 0)}function Ee(){if(Y){const Z=Y.querySelector(".focused");if(Z)if(Z.getAttribute("data-custom")==="true")Me(b.createNewItem(O));else{const He=Number(Z.getAttribute("data-value")),Ze=ke.find(Cn=>Cn.value===He);Me(Ze)}}}async function gn(){!O&&k&&k.length>0&&(isNaN(X)?an():(await V(k[X],void 0),t(18,X=void 0)))}function an(){!k||k.length===0||(isNaN(X)?dn(k.length-1):dn(X>0?X-1:0),_e())}function vn(){!gi(pe,document.activeElement)||!k||k.length===0||(isNaN(X)||dn(X<k.length-1?X+1:void 0),_e())}function dn(Z){if(t(18,X=Z),X!==void 0){const He=document.querySelectorAll(".prom-multi-selector__value-container > .prom-multi-selector__selected-item")[X];He&&He.scrollIntoView({block:"nearest",inline:"nearest"})}}function _e(){if(!isNaN(X)){const Z=k[X];t(19,ue=F.selectedItemInFocus.replace("{0}",Z.label))}}function Fe(Z){h("error",Z),t(13,j=!1)}function cn(Z){switch(Z){case 0:return F.noMatchFound;case 1:return F.singleMatchFound;default:return F.pluralMatchFound.replace("{0}",Z.toString())}}function Ie(Z,Pe){if(Y){const He=Array.from(Y.querySelectorAll(".prom-multi-selector__option")),Ze=Y.querySelector(".focused");if(He.length>0){const Cn=Ze?He.findIndex(tn=>tn===Ze):0,Pn=Dn(He.length,Cn,Z,Pe),rn=He[Pn];Sn(rn,Pn),En(rn)}}}function on(){const Z=Y.querySelectorAll(".prom-multi-selector__option"),Pe=[];for(let He=0;He<Z.length;He++){const Ze=Z[He];Pe.push(Ze.offsetTop)}return Pe}function Dn(Z,Pe,He,Ze){switch(Ze){case"all":return He==="down"?Z-1:0;case"page":return In(Z,Pe,He);case"single":return Gm(Z,Pe,He)}}function In(Z,Pe,He){const Ze=Y.offsetHeight,Cn=on(),Pn=Cn[Pe];let rn,tn,Mn;switch(He){case"down":return rn=Pn+Ze,Mn=Cn.filter(Gn=>Gn<=rn),tn=Mn.length-1,tn===Pe?0:tn;case"up":return rn=Pn-Ze,Mn=Cn.filter(Gn=>Gn<=rn),tn=Mn.length-1<0?0:Mn.length-1,tn===Pe?Z-1:tn}}function Sn(Z,Pe=0){const He=Y.querySelector(".focused");if(He&&He.classList.remove("focused"),!Z.getAttribute("data-value")){t(45,ee=void 0);return}Z.classList.add("focused"),t(45,ee=Pe)}function En(Z){const Pe=Z.offsetTop,He=Pe+Z.offsetHeight+1;He>Y.scrollTop+Y.offsetHeight&&t(22,Y.scrollTop=He-Y.offsetHeight+1,Y),Pe<Y.scrollTop&&t(22,Y.scrollTop=Pe,Y)}function Un(Z){Ke(Z.key)===ce.ENTER&&Z.preventDefault()}function Nn(Z){le[Z?"unshift":"push"](()=>{Ce=Z,t(24,Ce)})}const qn=async(Z,Pe)=>await V(Z,Pe);function Rn(Z){le[Z?"unshift":"push"](()=>{K=Z,t(20,K)})}function it(){O=this.value,t(12,O)}const pn=async(Z,Pe)=>await Me(Z,Pe),Hn=async Z=>await Me(b.createNewItem(O),Z);function wn(Z){le[Z?"unshift":"push"](()=>{Y=Z,t(22,Y)})}function Xn(Z){le[Z?"unshift":"push"](()=>{qe=Z,t(23,qe)})}function G(Z){le[Z?"unshift":"push"](()=>{pe=Z,t(21,pe)})}return n.$$set=Z=>{"label"in Z&&t(1,p=Z.label),"labelHidden"in Z&&t(2,_=Z.labelHidden),"id"in Z&&t(3,y=Z.id),"selectedItems"in Z&&t(0,k=Z.selectedItems),"suggestedItems"in Z&&t(42,g=Z.suggestedItems),"dataProvider"in Z&&t(4,b=Z.dataProvider),"hasError"in Z&&t(5,w=Z.hasError),"errorMessage"in Z&&t(6,M=Z.errorMessage),"popupSize"in Z&&t(7,C=Z.popupSize),"disabled"in Z&&t(8,v=Z.disabled),"secondLine"in Z&&t(9,T=Z.secondLine),"clearFilterAfterSelect"in Z&&t(43,E=Z.clearFilterAfterSelect),"openPopupWithNoSearch"in Z&&t(44,N=Z.openPopupWithNoSearch),"i18n"in Z&&t(10,F=Z.i18n),"canCreateNewItems"in Z&&t(11,L=Z.canCreateNewItems)},n.$$.update=()=>{n.$$.dirty[0]&16384&&t(32,i=ke.length),n.$$.dirty[0]&12&&t(31,s=_?void 0:`label_${y}`),n.$$.dirty[0]&6&&t(30,l=_?p:void 0),n.$$.dirty[0]&8&&t(17,a=`listbox_${y}`),n.$$.dirty[0]&8&&t(29,o=`selected_value_${y}`),n.$$.dirty[0]&40960&&t(16,r=j&&!ye),n.$$.dirty[0]&196608&&t(28,u=r?a:void 0),n.$$.dirty[0]&65536|n.$$.dirty[1]&16384&&t(27,f=r&&!isNaN(ee)?`option_${ee}`:void 0),n.$$.dirty[0]&65536&&t(26,d=r?"listbox":void 0),n.$$.dirty[0]&22545&&t(25,c=L&&b.checkIfShowCreateNewItem(ke,k,O)),n.$$.dirty[0]&16|n.$$.dirty[1]&34816&&ae!==g&&b.setSuggestedItems&&(b.setSuggestedItems&&b.setSuggestedItems(g),t(46,ae=g)),n.$$.dirty[0]&2&&(!p||typeof p!="string")&&console.warn("Label must be supplied")},[k,p,_,y,b,w,M,C,v,T,F,L,O,j,ke,ye,r,a,X,ue,K,pe,Y,qe,Ce,c,d,f,u,o,l,s,i,be,Xe,We,je,se,Me,V,fe,Un,g,E,N,ee,ae,Nn,qn,Rn,it,pn,Hn,wn,Xn,G]}class hu extends Ue{constructor(e){super(),De(this,e,Zm,Ym,Le,{label:1,labelHidden:2,id:3,selectedItems:0,suggestedItems:42,dataProvider:4,hasError:5,errorMessage:6,popupSize:7,disabled:8,secondLine:9,clearFilterAfterSelect:43,openPopupWithNoSearch:44,i18n:10,canCreateNewItems:11},null,[-1,-1,-1])}}function Na(n,e,t){const i=n.slice();return i[57]=e[t],i}function Fa(n,e,t){const i=n.slice();return i[60]=e[t],i}function Oa(n,e,t){const i=n.slice();return i[63]=e[t],i}function Da(n,e,t){const i=n.slice();return i[63]=e[t],i}function Jm(n){let e,t;return e=new ti({props:{colorSchema:n[0].cclCourseAvatarClass,is360ReportThread:n[0].is360ReportThread,massMessageType:n[0].massMessageType,participants:n[0].participants,threadType:n[0].type}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&1&&(l.colorSchema=i[0].cclCourseAvatarClass),s[0]&1&&(l.is360ReportThread=i[0].is360ReportThread),s[0]&1&&(l.massMessageType=i[0].massMessageType),s[0]&1&&(l.participants=i[0].participants),s[0]&1&&(l.threadType=i[0].type),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Qm(n){let e,t,i,s,l,a;return t=new ti({props:{colorSchema:n[0].cclCourseAvatarClass,is360ReportThread:n[0].is360ReportThread,massMessageType:n[0].massMessageType,participants:n[0].participants,threadType:n[0].type}}),{c(){e=B("button"),ie(t.$$.fragment),m(e,"type","button"),m(e,"class","itsl-im2__profile_card_button"),m(e,"aria-label",i=$(n[15].openProfileCard,n[0].name))},m(o,r){P(o,e,r),ne(t,e,null),s=!0,l||(a=Q(e,"click",n[24]),l=!0)},p(o,r){const u={};r[0]&1&&(u.colorSchema=o[0].cclCourseAvatarClass),r[0]&1&&(u.is360ReportThread=o[0].is360ReportThread),r[0]&1&&(u.massMessageType=o[0].massMessageType),r[0]&1&&(u.participants=o[0].participants),r[0]&1&&(u.threadType=o[0].type),t.$set(u),(!s||r[0]&1&&i!==(i=$(o[15].openProfileCard,o[0].name)))&&m(e,"aria-label",i)},i(o){s||(I(t.$$.fragment,o),s=!0)},o(o){A(t.$$.fragment,o),s=!1},d(o){o&&R(e),te(t),l=!1,a()}}}function Ua(n){let e,t,i;function s(a){n[27](a)}let l={conversationShortName:n[9]};return n[0]!==void 0&&(l.conversationData=n[0]),e=new tm({props:l}),le.push(()=>Re(e,"conversationData",s)),e.$on("abuseReportSent",n[28]),e.$on("backToConversation",n[29]),e.$on("backToConversationList",n[30]),e.$on("deleteThread",n[31]),e.$on("markAsUnread",n[32]),e.$on("raiseError",n[33]),e.$on("showBannerOnConversationList",n[34]),e.$on("toggleBlockConversation",n[35]),e.$on("toggleCloseConversation",n[36]),{c(){ie(e.$$.fragment)},m(a,o){ne(e,a,o),i=!0},p(a,o){const r={};o[0]&512&&(r.conversationShortName=a[9]),!t&&o[0]&1&&(t=!0,r.conversationData=a[0],Be(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){A(e.$$.fragment,a),i=!1},d(a){te(e,a)}}}function Ha(n){let e,t=$(n[15].participantsX,n[0].participantsCount)+"",i,s,l=n[19]()&&!cs(n[0]),a,o,r,u,f,d,c=l&&Wa(n);const h=[$m,xm],p=[];function _(k,g){return k[8]?0:1}o=_(n),r=p[o]=h[o](n);let y=n[0].type===Oe.oneToOne&&Ka(n);return{c(){e=B("h2"),i=ge(t),s=W(),c&&c.c(),a=W(),r.c(),u=W(),y&&y.c(),f=Ye(),m(e,"class","itsl-im2-conversation-settings-heading")},m(k,g){P(k,e,g),S(e,i),P(k,s,g),c&&c.m(k,g),P(k,a,g),p[o].m(k,g),P(k,u,g),y&&y.m(k,g),P(k,f,g),d=!0},p(k,g){(!d||g[0]&1)&&t!==(t=$(k[15].participantsX,k[0].participantsCount)+"")&&Te(i,t),g[0]&1&&(l=k[19]()&&!cs(k[0])),l?c?(c.p(k,g),g[0]&1&&I(c,1)):(c=Wa(k),c.c(),I(c,1),c.m(a.parentNode,a)):c&&(me(),A(c,1,1,()=>{c=null}),he());let b=o;o=_(k),o===b?p[o].p(k,g):(me(),A(p[b],1,1,()=>{p[b]=null}),he(),r=p[o],r?r.p(k,g):(r=p[o]=h[o](k),r.c()),I(r,1),r.m(u.parentNode,u)),k[0].type===Oe.oneToOne?y?(y.p(k,g),g[0]&1&&I(y,1)):(y=Ka(k),y.c(),I(y,1),y.m(f.parentNode,f)):y&&(me(),A(y,1,1,()=>{y=null}),he())},i(k){d||(I(c),I(r),I(y),d=!0)},o(k){A(c),A(r),A(y),d=!1},d(k){k&&(R(e),R(s),R(a),R(u),R(f)),c&&c.d(k),p[o].d(k),y&&y.d(k)}}}function Wa(n){let e,t,i,s,l,a,o,r;function u(d){n[37](d)}let f={dataProvider:n[17],i18n:n[16],label:n[15].addRecipients,labelHidden:!0,openPopupWithNoSearch:!1,secondLine:!0};return n[1]!==void 0&&(f.selectedItems=n[1]),i=new hu({props:f}),le.push(()=>Re(i,"selectedItems",u)),o=new Yn({props:{large:"true",type:"primary",text:n[15].addParticipants,htmlType:"button"}}),o.$on("click",n[22]),{c(){e=B("div"),t=B("div"),ie(i.$$.fragment),l=W(),a=B("div"),ie(o.$$.fragment),m(t,"class","itsl-im2-conversation-settings__participants-multiselector"),m(a,"class","itsl-im2-conversation-settings__participants-add"),m(e,"class","itsl-im2-conversation-settings__participants-add-container")},m(d,c){P(d,e,c),S(e,t),ne(i,t,null),S(e,l),S(e,a),ne(o,a,null),r=!0},p(d,c){const h={};!s&&c[0]&2&&(s=!0,h.selectedItems=d[1],Be(()=>s=!1)),i.$set(h)},i(d){r||(I(i.$$.fragment,d),I(o.$$.fragment,d),r=!0)},o(d){A(i.$$.fragment,d),A(o.$$.fragment,d),r=!1},d(d){d&&R(e),te(i),te(o)}}}function xm(n){let e,t,i,s,l,a,o;t=new Qt({props:{closable:!1,text:n[7].text,type:n[7].type,visible:n[7].visible}}),s=new Qt({props:{visible:n[3].addParticipantsBannerVisible,text:n[3].addParticipantsBannerMessage,type:n[3].addParticipantsBannerType,closable:n[3].addParticipantsBannerClosable,close:n[15].close}}),s.$on("hidden",n[40]);let r=en(n[13]),u=[];for(let d=0;d<r.length;d+=1)u[d]=za(Oa(n,r,d));const f=d=>A(u[d],1,1,()=>{u[d]=null});return{c(){e=B("div"),ie(t.$$.fragment),i=W(),ie(s.$$.fragment),l=W(),a=B("ul");for(let d=0;d<u.length;d+=1)u[d].c();m(e,"class","itsl-im2-conversation-settings__participants-banner"),m(a,"class","itsl-im2-conversation-settings__participants-list")},m(d,c){P(d,e,c),ne(t,e,null),S(e,i),ne(s,e,null),P(d,l,c),P(d,a,c);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(a,null);n[42](a),o=!0},p(d,c){const h={};c[0]&128&&(h.text=d[7].text),c[0]&128&&(h.type=d[7].type),c[0]&128&&(h.visible=d[7].visible),t.$set(h);const p={};if(c[0]&8&&(p.visible=d[3].addParticipantsBannerVisible),c[0]&8&&(p.text=d[3].addParticipantsBannerMessage),c[0]&8&&(p.type=d[3].addParticipantsBannerType),c[0]&8&&(p.closable=d[3].addParticipantsBannerClosable),s.$set(p),c[0]&2105377){r=en(d[13]);let _;for(_=0;_<r.length;_+=1){const y=Oa(d,r,_);u[_]?(u[_].p(y,c),I(u[_],1)):(u[_]=za(y),u[_].c(),I(u[_],1),u[_].m(a,null))}for(me(),_=r.length;_<u.length;_+=1)f(_);he()}},i(d){if(!o){I(t.$$.fragment,d),I(s.$$.fragment,d);for(let c=0;c<r.length;c+=1)I(u[c]);o=!0}},o(d){A(t.$$.fragment,d),A(s.$$.fragment,d),u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)A(u[c]);o=!1},d(d){d&&(R(e),R(l),R(a)),te(t),te(s),Vn(u,d),n[42](null)}}}function $m(n){let e,t=$(Ve(n[15].allCurrentXParticipantsOfYZArePartOfThisConversation),n[0].canShowParticipantsPage?`<a href=${n[14]} target="_top">`:"",Ve(n[0].name),n[0].canShowParticipantsPage?"</a>":"")+"",i,s,l,a=n[12]>0&&Va(n);return{c(){e=B("div"),i=W(),a&&a.c(),s=Ye(),m(e,"class","itsl-im2-conversation-settings__participants-course-or-project")},m(o,r){P(o,e,r),e.innerHTML=t,P(o,i,r),a&&a.m(o,r),P(o,s,r),l=!0},p(o,r){(!l||r[0]&16385)&&t!==(t=$(Ve(o[15].allCurrentXParticipantsOfYZArePartOfThisConversation),o[0].canShowParticipantsPage?`<a href=${o[14]} target="_top">`:"",Ve(o[0].name),o[0].canShowParticipantsPage?"</a>":"")+"")&&(e.innerHTML=t),o[12]>0?a?(a.p(o,r),r[0]&4096&&I(a,1)):(a=Va(o),a.c(),I(a,1),a.m(s.parentNode,s)):a&&(me(),A(a,1,1,()=>{a=null}),he())},i(o){l||(I(a),l=!0)},o(o){A(a),l=!1},d(o){o&&(R(e),R(i),R(s)),a&&a.d(o)}}}function za(n){let e,t;return e=new fu({props:{canRemoveParticipant:hl(n[0],n[63].PersonId),participantListElement:n[5],participant:n[63],threadId:n[0].id}}),e.$on("raiseError",n[41]),e.$on("participantRemoved",n[21]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&8193&&(l.canRemoveParticipant=hl(i[0],i[63].PersonId)),s[0]&32&&(l.participantListElement=i[5]),s[0]&8192&&(l.participant=i[63]),s[0]&1&&(l.threadId=i[0].id),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Va(n){let e,t,i,s;function l(u,f){return u[12]===1?th:u[11]?nh:eh}let a=l(n),o=a(n),r=n[11]&&qa(n);return{c(){e=B("div"),o.c(),t=W(),r&&r.c(),i=Ye(),m(e,"class","itsl-im2-conversation-settings__participants-banner")},m(u,f){P(u,e,f),o.m(e,null),P(u,t,f),r&&r.m(u,f),P(u,i,f),s=!0},p(u,f){a===(a=l(u))&&o?o.p(u,f):(o.d(1),o=a(u),o&&(o.c(),o.m(e,null))),u[11]?r?(r.p(u,f),f[0]&2048&&I(r,1)):(r=qa(u),r.c(),I(r,1),r.m(i.parentNode,i)):r&&(me(),A(r,1,1,()=>{r=null}),he())},i(u){s||(I(r),s=!0)},o(u){A(r),s=!1},d(u){u&&(R(e),R(t),R(i)),o.d(),r&&r.d(u)}}}function eh(n){let e=$(n[15].xParticipantsCannotSeeMessages,n[12])+"",t;return{c(){t=ge(e)},m(i,s){P(i,t,s)},p(i,s){s[0]&4096&&e!==(e=$(i[15].xParticipantsCannotSeeMessages,i[12])+"")&&Te(t,e)},d(i){i&&R(t)}}}function nh(n){let e=$(n[15].xParticipantsCannotSeeMessagesColon,n[12])+"",t;return{c(){t=ge(e)},m(i,s){P(i,t,s)},p(i,s){s[0]&4096&&e!==(e=$(i[15].xParticipantsCannotSeeMessagesColon,i[12])+"")&&Te(t,e)},d(i){i&&R(t)}}}function th(n){let e=n[15].oneParticipantCannotSeeMessagesColon+"",t;return{c(){t=ge(e)},m(i,s){P(i,t,s)},p:we,d(i){i&&R(t)}}}function qa(n){let e,t,i=en(n[2].ThreadParticipants),s=[];for(let a=0;a<i.length;a+=1)s[a]=Xa(Da(n,i,a));const l=a=>A(s[a],1,1,()=>{s[a]=null});return{c(){e=B("ul");for(let a=0;a<s.length;a+=1)s[a].c();m(e,"class","itsl-im2-conversation-settings__participants-list")},m(a,o){P(a,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);n[39](e),t=!0},p(a,o){if(o[0]&37){i=en(a[2].ThreadParticipants);let r;for(r=0;r<i.length;r+=1){const u=Da(a,i,r);s[r]?(s[r].p(u,o),I(s[r],1)):(s[r]=Xa(u),s[r].c(),I(s[r],1),s[r].m(e,null))}for(me(),r=i.length;r<s.length;r+=1)l(r);he()}},i(a){if(!t){for(let o=0;o<i.length;o+=1)I(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)A(s[o]);t=!1},d(a){a&&R(e),Vn(s,a),n[39](null)}}}function Xa(n){let e,t;return e=new fu({props:{participantListElement:n[5],participant:n[63],threadId:n[0].id}}),e.$on("raiseError",n[38]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&32&&(l.participantListElement=i[5]),s[0]&4&&(l.participant=i[63]),s[0]&1&&(l.threadId=i[0].id),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Ka(n){let e,t,i,s,l,a;s=new cu({props:{label:n[15].loading,size:"large",visible:!n[6]}});function o(f,d){var c,h;if(((c=f[6])==null?void 0:c.length)>0)return sh;if(((h=f[6])==null?void 0:h.length)===0)return ih}let r=o(n),u=r&&r(n);return{c(){e=B("h2"),e.textContent=`${n[15].yourRelationships}`,t=W(),i=B("div"),ie(s.$$.fragment),l=W(),u&&u.c(),m(e,"class","itsl-im2-conversation-settings-heading"),m(i,"class","itsl-im2-conversation-settings__relations")},m(f,d){P(f,e,d),P(f,t,d),P(f,i,d),ne(s,i,null),S(i,l),u&&u.m(i,null),a=!0},p(f,d){const c={};d[0]&64&&(c.visible=!f[6]),s.$set(c),r===(r=o(f))&&u?u.p(f,d):(u&&u.d(1),u=r&&r(f),u&&(u.c(),u.m(i,null)))},i(f){a||(I(s.$$.fragment,f),a=!0)},o(f){A(s.$$.fragment,f),a=!1},d(f){f&&(R(e),R(t),R(i)),te(s),u&&u.d()}}}function ih(n){let e=n[15].youHaveNoRelationships+"",t;return{c(){t=ge(e)},m(i,s){P(i,t,s)},p:we,d(i){i&&R(t)}}}function sh(n){let e,t=en(n[6]),i=[];for(let s=0;s<t.length;s+=1)i[s]=Za(Na(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ye()},m(s,l){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);P(s,e,l)},p(s,l){if(l[0]&8388672){t=en(s[6]);let a;for(a=0;a<t.length;a+=1){const o=Na(s,t,a);i[a]?i[a].p(o,l):(i[a]=Za(o),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&R(e),Vn(i,s)}}}function ja(n){let e,t,i=Fs(n[57]),s=en(Ja(n[57])),l=[];for(let o=0;o<s.length;o+=1)l[o]=Ya(Fa(n,s,o));let a=i&&Ga(n);return{c(){e=B("ul");for(let o=0;o<l.length;o+=1)l[o].c();t=W(),a&&a.c(),m(e,"class","itsl-im2-conversation-settings__relation__items")},m(o,r){P(o,e,r);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);S(e,t),a&&a.m(e,null)},p(o,r){if(r[0]&64){s=en(Ja(o[57]));let u;for(u=0;u<s.length;u+=1){const f=Fa(o,s,u);l[u]?l[u].p(f,r):(l[u]=Ya(f),l[u].c(),l[u].m(e,t))}for(;u<l.length;u+=1)l[u].d(1);l.length=s.length}r[0]&64&&(i=Fs(o[57])),i?a?a.p(o,r):(a=Ga(o),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(o){o&&R(e),Vn(l,o),a&&a.d()}}}function Ya(n){let e,t=n[60]+"",i;return{c(){e=B("li"),i=ge(t)},m(s,l){P(s,e,l),S(e,i)},p(s,l){l[0]&64&&t!==(t=s[60]+"")&&Te(i,t)},d(s){s&&R(e)}}}function Ga(n){let e,t=n[23](n[57])+"",i;return{c(){e=B("li"),i=ge(t)},m(s,l){P(s,e,l),S(e,i)},p(s,l){l[0]&64&&t!==(t=s[23](s[57])+"")&&Te(i,t)},d(s){s&&R(e)}}}function Za(n){var o,r;let e,t=n[57].Text+"",i,s,l,a=((r=(o=n[57])==null?void 0:o.Items)==null?void 0:r.length)>0&&ja(n);return{c(){e=B("p"),i=ge(t),s=W(),a&&a.c(),l=W(),m(e,"class","itsl-im2-conversation-settings__relation")},m(u,f){P(u,e,f),S(e,i),S(e,s),a&&a.m(e,null),S(e,l)},p(u,f){var d,c;f[0]&64&&t!==(t=u[57].Text+"")&&Te(i,t),((c=(d=u[57])==null?void 0:d.Items)==null?void 0:c.length)>0?a?a.p(u,f):(a=ja(u),a.c(),a.m(e,l)):a&&(a.d(1),a=null)},d(u){u&&R(e),a&&a.d()}}}function lh(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y=Bs(n[0]),k,g=Ji(n[0]),b;i=new Bn({props:{ariaLabel:$(n[15].backToConversationX,n[0].name),htmlType:"button",iconClass:"itsl-im2-shared__back-button",iconOnly:!0,large:!0,type:"plain"}}),i.$on("click",n[26]);const w=[Qm,Jm],M=[];function C(E,N){return E[10]?0:1}f=C(n),d=M[f]=w[f](n);let v=y&&Ua(n),T=g&&Ha(n);return{c(){e=B("div"),t=B("header"),ie(i.$$.fragment),s=W(),l=B("h2"),l.textContent=`${n[15].conversationSettings}`,a=W(),o=B("div"),r=B("div"),u=B("div"),d.c(),c=W(),h=B("div"),p=ge(n[9]),_=W(),v&&v.c(),k=W(),T&&T.c(),m(l,"class","itsl-im2-shared__title"),m(l,"id","itsl-im2-conversation-settings__title"),m(t,"class","itsl-im2-shared__header--layout itsl-im2-shared__header--theme itsl-im2-shared__header--padding--default itsl-im2-shared__header--padding--narrow-left "),m(t,"aria-describedby","itsl-im2-conversation-settings__title"),m(u,"class","itsl-im2-conversation__avatar-container"),m(h,"class","itsl-im2-conversation__header-title itsl-im2-shared__title"),m(r,"class","itsl-im2-conversation-settings__header"),m(o,"class","itsl-im2-conversation-settings__content"),m(e,"class","itsl-im2-conversation-settings__top-area")},m(E,N){P(E,e,N),S(e,t),ne(i,t,null),S(t,s),S(t,l),S(e,a),S(e,o),S(o,r),S(r,u),M[f].m(u,null),S(r,c),S(r,h),S(h,p),S(o,_),v&&v.m(o,null),S(o,k),T&&T.m(o,null),n[43](e),b=!0},p(E,N){const F={};N[0]&1&&(F.ariaLabel=$(E[15].backToConversationX,E[0].name)),i.$set(F);let L=f;f=C(E),f===L?M[f].p(E,N):(me(),A(M[L],1,1,()=>{M[L]=null}),he(),d=M[f],d?d.p(E,N):(d=M[f]=w[f](E),d.c()),I(d,1),d.m(u,null)),(!b||N[0]&512)&&Te(p,E[9]),N[0]&1&&(y=Bs(E[0])),y?v?(v.p(E,N),N[0]&1&&I(v,1)):(v=Ua(E),v.c(),I(v,1),v.m(o,k)):v&&(me(),A(v,1,1,()=>{v=null}),he()),N[0]&1&&(g=Ji(E[0])),g?T?(T.p(E,N),N[0]&1&&I(T,1)):(T=Ha(E),T.c(),I(T,1),T.m(o,null)):T&&(me(),A(T,1,1,()=>{T=null}),he())},i(E){b||(I(i.$$.fragment,E),I(d),I(v),I(T),b=!0)},o(E){A(i.$$.fragment,E),A(d),A(v),A(T),b=!1},d(E){E&&R(e),te(i),M[f].d(),v&&v.d(),T&&T.d(),n[43](null)}}}const nl=3,Ts=3;function Fs(n){return n.Items.length>nl+1}function Ja(n){return Fs(n)?n.Items.slice(0,nl):n.Items}function ah(n,e,t){let i,s,l,a,o,r,u,{conversationData:f}=e,d={addParticipantsBannerVisible:!1,addParticipantsBannerType:"info",addParticipantsBannerMessage:"",addParticipantsBannerClosable:!0},c,h,p,_=[],y=[],k,g;const b={text:"",type:"warning",visible:!1},w=Qe(),M=re.i18n,C={noResults:M.searchNoResultsFound,loading:M.loading,selectedItemInFocus:M.messagesSelectedItemX,noMatchFound:M.recipientNoMatchesFound,singleMatchFound:M.messagesOneMatchFound,pluralMatchFound:M.messagesXMatchesFound},v=re.constants.maxPersonsPerThread,T=new du(f.id),E=new Intl.Collator(document.documentElement.lang);nt(()=>N()),Qi(()=>g==null?void 0:g.teardown());async function N(){if(cs(f)&&Ti(f)&&X("info",$(M.reachedLimitWithXInGroupConversation,v),!1),f.type===Oe.oneToOne){const _e=ht(f.participants,re.personId);t(6,p=await ld(_e.PersonId))}i&&f.numberOfInactiveParticipants>0&&t(2,k=await Qf(f.id)),await ln(),g=new xs(c),g.init()}function F(){O(),w("backToConversation")}function L(){return Ti(f)&&Ks(f)&&(!re.isStudent||!f.createdByTeacher||!f.hasCreatorInThread)&&!Lt(f)}function O(){j(Se.participantDeleteFailed)}function j(..._e){w("resolveError",{errorTypes:_e})}function ee(_e,Fe){w("raiseError",{errorType:_e,errorText:Fe})}function X(_e,Fe,cn){t(3,d={addParticipantsBannerVisible:!0,addParticipantsBannerType:_e,addParticipantsBannerMessage:Fe,addParticipantsBannerClosable:cn})}function ue(){return _.length===0?(X("warning",M.addParticipantsSelectAtLeastOneUser,!0),!1):!0}function ke(){t(3,d.addParticipantsBannerVisible=!1,d)}async function ye(){var _e;if(ue())try{await Fr(f.id,{instantMessageThreadId:f.id,PersonIds:_.map(Fe=>Fe.id),UpdateParticipants:!0}),cs(f)?X("info",_.length==1?$(M.addParticipantReachedLimitWithXInGroupConversation,v):$(M.addParticipantsReachedLimitWithXInGroupConversation,v),!1):X("info",_.length==1?M.addParticipantMessage:M.addParticipantsMessage,!0),t(1,y=[])}catch(Fe){switch((_e=Fe==null?void 0:Fe.response)==null?void 0:_e.status){case Pt.badRequest:X("warning",Sd(f)?$(M.addParticipantsYouCanAddOneMoreParticipantsLimitIsY,v):$(M.addParticipantsYouCanAddXMoreParticipantsLimitIsY,Ys(f),v),!1);break;default:rt(w,Fe)}}}function ae(){return f.participants.slice().sort((_e,Fe)=>Fe.RoleInHierarchy-_e.RoleInHierarchy||E.compare(_e.FullName,Fe.FullName))}function K(_e){switch(_e.type){case Oe.course:return re.urls.courseParticipants;case Oe.project:return re.urls.projectParticipants;default:return""}}function pe(_e){return $(M.andXMore,_e.Items.length-nl)}function Y(){const _e=ht(f.participants,re.personId);Qs(_e.PersonId,null,_e.ProfileUrl)}async function qe(){await ln(),Ce()}function Ce(){g==null||g.init()}const be=()=>F();function Xe(_e){f=_e,t(0,f)}function We(_e){J.call(this,n,_e)}function je(_e){J.call(this,n,_e)}function se(_e){J.call(this,n,_e)}function x(_e){J.call(this,n,_e)}function Me(_e){J.call(this,n,_e)}const V=_e=>ee(_e.detail.errorType,_e.detail.errorText);function H(_e){J.call(this,n,_e)}function q(_e){J.call(this,n,_e)}function fe(_e){J.call(this,n,_e)}function Ne(_e){y=_e,t(1,y)}function Ge(_e){J.call(this,n,_e)}function Ee(_e){le[_e?"unshift":"push"](()=>{h=_e,t(5,h)})}const gn=()=>t(3,d.addParticipantsBannerVisible=!1,d);function an(_e){J.call(this,n,_e)}function vn(_e){le[_e?"unshift":"push"](()=>{h=_e,t(5,h)})}function dn(_e){le[_e?"unshift":"push"](()=>{c=_e,t(4,c)})}return n.$$set=_e=>{"conversationData"in _e&&t(0,f=_e.conversationData)},n.$$.update=()=>{var _e;if(n.$$.dirty[0]&1&&t(8,i=f.type===Oe.course||f.type===Oe.project),n.$$.dirty[0]&1&&t(14,s=K(f).replace(new RegExp(encodeURIComponent("{0}"),"ig"),f.instantMessageLocationId).replace(new RegExp(encodeURIComponent(encodeURIComponent("{0}")),"ig"),f.instantMessageLocationId)),n.$$.dirty[0]&1&&t(13,l=ae()),n.$$.dirty[0]&4&&t(12,a=(k==null?void 0:k.Count)??0),n.$$.dirty[0]&4&&t(11,o=((_e=k==null?void 0:k.ThreadParticipants)==null?void 0:_e.length)>0),n.$$.dirty[0]&1&&t(10,r=f.type===Oe.oneToOne),n.$$.dirty[0]&1&&t(9,u=!f.nameFromServer&&!Lt(f)&&Ti(f)&&f.personFullNames.length>=Ts+2?$(M.conversationWithXAndYOtherParticipants,f.personFullNames.slice(0,Ts).join(re.constants.personNameSeparator),f.personFullNames.length-Ts):f.name),n.$$.dirty[0]&1&&qe(),n.$$.dirty[0]&33554434){let Fe,cn;if(t(25,{hasRecipientsWithMessagesDisabled:Fe,recipientNamesWithMessagesDisabled:cn,recipientsWithMessagesEnabled:_}=jr(y),_),Fe){const Ie=_.length;t(7,b.type=Ie===0?"warning":"info",b),t(7,b.text=$(Ie===0?M.messagesAreDisabledForX:Ie===1?M.messagesAreDisabledForXOneRecipientWillBeAdded:M.messagesAreDisabledForXOtherRecipientsWillBeAdded,cn),b)}t(7,b.visible=Fe,b)}},[f,y,k,d,c,h,p,b,i,u,r,o,a,l,s,M,C,T,F,L,ee,ke,ye,pe,Y,_,be,Xe,We,je,se,x,Me,V,H,q,fe,Ne,Ge,Ee,gn,an,vn,dn]}class oh extends Ue{constructor(e){super(),De(this,e,ah,lh,Le,{conversationData:0},null,[-1,-1,-1])}}const rh=n=>({}),Qa=n=>({}),uh=n=>({}),xa=n=>({});function fh(n){let e,t;const i=n[24].header,s=Qn(i,n,n[26],Qa);return{c(){e=B("section"),s&&s.c(),m(e,"slot","header")},m(l,a){P(l,e,a),s&&s.m(e,null),t=!0},p(l,a){s&&s.p&&(!t||a&67108864)&&$n(s,i,l,l[26],t?xn(i,l[26],a,rh):et(l[26]),Qa)},i(l){t||(I(s,l),t=!0)},o(l){A(s,l),t=!1},d(l){l&&R(e),s&&s.d(l)}}}function dh(n){let e,t;const i=n[24].footer,s=Qn(i,n,n[26],xa);return{c(){e=B("section"),s&&s.c(),m(e,"slot","footer")},m(l,a){P(l,e,a),s&&s.m(e,null),t=!0},p(l,a){s&&s.p&&(!t||a&67108864)&&$n(s,i,l,l[26],t?xn(i,l[26],a,uh):et(l[26]),xa)},i(l){t||(I(s,l),t=!0)},o(l){A(s,l),t=!1},d(l){l&&R(e),s&&s.d(l)}}}function ch(n){let e,t,i,s,l,a,o,r,u,f,d;return l=new Bn({props:{iconClass:n[16],id:n[5]+"-button",iconOnly:n[3],iconPlacement:n[4],expanded:n[0],large:n[7],text:n[10],textOnly:n[11],type:n[12],disabled:n[2],ariaLabel:n[14],haspopup:!0,htmlType:"button"}}),l.$on("click",n[22]),l.$on("keyup",n[21]),l.$on("keydown",n[20]),o=new ru({props:{arrow:n[1],arrowPosition:n[17],expanded:n[0],items:n[6],responsive:n[9],id:n[5]+"-list",$$slots:{footer:[dh],header:[fh]},$$scope:{ctx:n}}}),o.$on("dropdownClose",n[18]),o.$on("submenuClose",n[19]),o.$on("selectedOption",n[25]),{c(){e=B("section"),i=W(),s=B("section"),ie(l.$$.fragment),a=W(),ie(o.$$.fragment),m(e,"class",t="prom-button-dropdown-overlay "+n[15]),m(s,"class",r="prom-button-dropdown prom-dropdown__"+n[8]+" prom-dropdown__"+n[13]),m(s,"id",n[5])},m(c,h){P(c,e,h),P(c,i,h),P(c,s,h),ne(l,s,null),S(s,a),ne(o,s,null),u=!0,f||(d=Q(e,"click",n[22]),f=!0)},p(c,[h]){(!u||h&32768&&t!==(t="prom-button-dropdown-overlay "+c[15]))&&m(e,"class",t);const p={};h&65536&&(p.iconClass=c[16]),h&32&&(p.id=c[5]+"-button"),h&8&&(p.iconOnly=c[3]),h&16&&(p.iconPlacement=c[4]),h&1&&(p.expanded=c[0]),h&128&&(p.large=c[7]),h&1024&&(p.text=c[10]),h&2048&&(p.textOnly=c[11]),h&4096&&(p.type=c[12]),h&4&&(p.disabled=c[2]),h&16384&&(p.ariaLabel=c[14]),l.$set(p);const _={};h&2&&(_.arrow=c[1]),h&131072&&(_.arrowPosition=c[17]),h&1&&(_.expanded=c[0]),h&64&&(_.items=c[6]),h&512&&(_.responsive=c[9]),h&32&&(_.id=c[5]+"-list"),h&67108864&&(_.$$scope={dirty:h,ctx:c}),o.$set(_),(!u||h&8448&&r!==(r="prom-button-dropdown prom-dropdown__"+c[8]+" prom-dropdown__"+c[13]))&&m(s,"class",r),(!u||h&32)&&m(s,"id",c[5])},i(c){u||(I(l.$$.fragment,c),I(o.$$.fragment,c),u=!0)},o(c){A(l.$$.fragment,c),A(o.$$.fragment,c),u=!1},d(c){c&&(R(e),R(i),R(s)),te(l),te(o),f=!1,d()}}}function mh(n,e,t){let i,s,l,{$$slots:a={},$$scope:o}=e;const r=Qe();let{arrow:u=!0}=e,{iconClass:f="prom-button-dropdown-icon"}=e,{expanded:d=!1}=e,{disabled:c=!1}=e,{iconOnly:h=!1}=e,{iconPlacement:p="start"}=e,{id:_="button-dropdown_"+bs()}=e,{items:y=[]}=e,{large:k=!1}=e,{position:g="down"}=e,{responsive:b=!0}=e,{text:w="ChangeMe"}=e,{textOnly:M=!0}=e,{type:C="primary"}=e,{dropdownAlignment:v="right"}=e,{ariaLabel:T=void 0}=e;function E({detail:X}){const ue=document.querySelector("#"+_+"-button");if(ue&&ue.contains(X.target))return;const{key:ke}=X;switch(t(0,d=!1),Ke(ke)){case ce.ESCAPE:j();break;default:return}}function N(X){X.stopPropagation(),Mi()}function F(X){const{key:ue}=X;switch(Ke(ue)){case ce.DOWN:{X.preventDefault(),t(0,d=!0);const ke=document.querySelector("#"+_);setTimeout(()=>Bt(ke),0);break}case ce.TAB:Mi(),el(),t(0,d=!1);break;case ce.ENTER:case ce.SPACE:X.preventDefault(),O(X,!0);break;default:return}}function L(X){const{key:ue}=X;switch(Ke(ue)){case ce.ESCAPE:t(0,d=!1),j();break;default:return}}function O(X,ue=!1){if(X.preventDefault(),r("beforeToggle",X),t(0,d=!d),y.length&&ue){const ke=document.querySelector("#"+_);setTimeout(()=>Bt(ke),0)}}function j(){document.querySelector("#"+_+"-button").focus()}function ee(X){J.call(this,n,X)}return n.$$set=X=>{"arrow"in X&&t(1,u=X.arrow),"iconClass"in X&&t(23,f=X.iconClass),"expanded"in X&&t(0,d=X.expanded),"disabled"in X&&t(2,c=X.disabled),"iconOnly"in X&&t(3,h=X.iconOnly),"iconPlacement"in X&&t(4,p=X.iconPlacement),"id"in X&&t(5,_=X.id),"items"in X&&t(6,y=X.items),"large"in X&&t(7,k=X.large),"position"in X&&t(8,g=X.position),"responsive"in X&&t(9,b=X.responsive),"text"in X&&t(10,w=X.text),"textOnly"in X&&t(11,M=X.textOnly),"type"in X&&t(12,C=X.type),"dropdownAlignment"in X&&t(13,v=X.dropdownAlignment),"ariaLabel"in X&&t(14,T=X.ariaLabel),"$$scope"in X&&t(26,o=X.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&t(17,i=g==="up"?"bottom":"top"),n.$$.dirty&8390656&&t(16,s=M?"":f),n.$$.dirty&513&&t(15,l=b&&d?"prom-button-dropdown-overlay--visible":"")},[d,u,c,h,p,_,y,k,g,b,w,M,C,v,T,l,s,i,E,N,F,L,O,f,a,ee,o]}class hh extends Ue{constructor(e){super(),De(this,e,mh,ch,Le,{arrow:1,iconClass:23,expanded:0,disabled:2,iconOnly:3,iconPlacement:4,id:5,items:6,large:7,position:8,responsive:9,text:10,textOnly:11,type:12,dropdownAlignment:13,ariaLabel:14})}}function $a(n){let e;return{c(){e=ge(n[6])},m(t,i){P(t,e,i)},p(t,i){i&64&&Te(e,t[6])},d(t){t&&R(e)}}}function eo(n){let e,t;return{c(){e=B("div"),t=ge(n[7]),m(e,"id",n[11]),m(e,"class","prom-link__description")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s&128&&Te(t,i[7])},d(i){i&&R(e)}}}function gh(n){let e,t,i,s,l,a,o,r,u;const f=n[19].default,d=Qn(f,n,n[18],null);let c=n[6]&&$a(n),h=n[7]&&eo(n);return{c(){e=B("a"),d&&d.c(),t=W(),c&&c.c(),l=W(),h&&h.c(),a=Ye(),m(e,"class",i="prom-link prom-link--"+n[0]+" "+n[9]),m(e,"href",n[1]),m(e,"rel",n[2]),m(e,"target",n[3]),m(e,"ping",n[8]),m(e,"download",n[10]),m(e,"aria-label",n[5]),m(e,"aria-describedby",s=n[7]?n[11]:void 0),oe(e,"prom-link--large",n[4])},m(p,_){P(p,e,_),d&&d.m(e,null),S(e,t),c&&c.m(e,null),P(p,l,_),h&&h.m(p,_),P(p,a,_),o=!0,r||(u=Q(e,"click",n[20]),r=!0)},p(p,[_]){d&&d.p&&(!o||_&262144)&&$n(d,f,p,p[18],o?xn(f,p[18],_,null):et(p[18]),null),p[6]?c?c.p(p,_):(c=$a(p),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!o||_&513&&i!==(i="prom-link prom-link--"+p[0]+" "+p[9]))&&m(e,"class",i),(!o||_&2)&&m(e,"href",p[1]),(!o||_&4)&&m(e,"rel",p[2]),(!o||_&8)&&m(e,"target",p[3]),(!o||_&256)&&m(e,"ping",p[8]),(!o||_&1024)&&m(e,"download",p[10]),(!o||_&32)&&m(e,"aria-label",p[5]),(!o||_&128&&s!==(s=p[7]?p[11]:void 0))&&m(e,"aria-describedby",s),(!o||_&529)&&oe(e,"prom-link--large",p[4]),p[7]?h?h.p(p,_):(h=eo(p),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null)},i(p){o||(I(d,p),o=!0)},o(p){A(d,p),o=!1},d(p){p&&(R(e),R(l),R(a)),d&&d.d(p),c&&c.d(),h&&h.d(p),r=!1,u()}}}function _h(n,e,t){let i,s,l,{$$slots:a={},$$scope:o}=e,{kind:r="primary"}=e,{href:u="#"}=e,{rel:f=""}=e,{iconClass:d=""}=e,{iconPlacement:c="start"}=e,{target:h="_self"}=e,{large:p=!1}=e,{label:_=null}=e,{text:y=void 0}=e,{description:k=void 0}=e,{ping:g=void 0}=e,{standalone:b=!1}=e,{downloadable:w=!1}=e,{fileName:M=null}=e;const C=bs();b&&(r="standalone");function v(T){J.call(this,n,T)}return n.$$set=T=>{"kind"in T&&t(0,r=T.kind),"href"in T&&t(1,u=T.href),"rel"in T&&t(2,f=T.rel),"iconClass"in T&&t(12,d=T.iconClass),"iconPlacement"in T&&t(13,c=T.iconPlacement),"target"in T&&t(3,h=T.target),"large"in T&&t(4,p=T.large),"label"in T&&t(5,_=T.label),"text"in T&&t(6,y=T.text),"description"in T&&t(7,k=T.description),"ping"in T&&t(8,g=T.ping),"standalone"in T&&t(14,b=T.standalone),"downloadable"in T&&t(15,w=T.downloadable),"fileName"in T&&t(16,M=T.fileName),"$$scope"in T&&t(18,o=T.$$scope)},n.$$.update=()=>{n.$$.dirty&98304&&t(10,i=w?M||"":null),n.$$.dirty&8192&&t(17,l=c==="start"?"prom-link--icon-start ":"prom-link--icon-end "),n.$$.dirty&135169&&t(9,s=r==="standalone"&&d?"prom-link--icon "+l+d:""),n.$$.dirty&4193&&(d&&r!=="standalone"&&console.warn("Icons can only be added to links in 'standalone' mode."),d&&!y&&!_&&console.warn("Links must have discernible text. If it is an icon-only link, use 'label' to add hidden text."))},[r,u,f,h,p,_,y,k,g,s,i,C,d,c,b,w,M,l,o,a,v]}class bh extends Ue{constructor(e){super(),De(this,e,_h,gh,Le,{kind:0,href:1,rel:2,iconClass:12,iconPlacement:13,target:3,large:4,label:5,text:6,description:7,ping:8,standalone:14,downloadable:15,fileName:16})}}function ph(n){let e,t;return{c(){e=B("span"),m(e,"class",t="prom-empty-state__icon "+n[17])},m(i,s){P(i,e,s)},p(i,s){s&131072&&t!==(t="prom-empty-state__icon "+i[17])&&m(e,"class",t)},d(i){i&&R(e)}}}function wh(n){let e;return{c(){e=B("span"),m(e,"class","prom-empty-state__icon prom-loading-spinner__spinner")},m(t,i){P(t,e,i)},p:we,d(t){t&&R(e)}}}function Ms(n){let e,t;return{c(){e=B(n[2]),t=ge(n[1]),If(n[2])(e,{class:"prom-empty-state__title"})},m(i,s){P(i,e,s),S(e,t)},p(i,s){s&2&&Te(t,i[1])},d(i){i&&R(e)}}}function kh(n){let e,t;return e=new hh({props:{iconClass:n[10],iconPlacement:n[11],textOnly:!n[10],text:n[4],type:"primary",dropdownAlignment:n[12],items:n[13]}}),e.$on("click",n[24]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&1024&&(l.iconClass=i[10]),s&2048&&(l.iconPlacement=i[11]),s&1024&&(l.textOnly=!i[10]),s&16&&(l.text=i[4]),s&4096&&(l.dropdownAlignment=i[12]),s&8192&&(l.items=i[13]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Th(n){let e,t;return e=new bh({props:{href:n[15],kind:n[7],text:n[8],target:n[16]}}),e.$on("click",n[23]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&32768&&(l.href=i[15]),s&128&&(l.kind=i[7]),s&256&&(l.text=i[8]),s&65536&&(l.target=i[16]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Mh(n){let e,t;return e=new Yn({props:{text:n[4],type:"primary",htmlType:n[5]}}),e.$on("click",n[22]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&16&&(l.text=i[4]),s&32&&(l.htmlType=i[5]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function yh(n){let e,t,i,s=n[2],l,a,o,r,u,f,d,c;function h(w,M){return w[14]?wh:ph}let p=h(n),_=p(n),y=n[2]&&Ms(n);const k=[Mh,Th,kh],g=[];function b(w,M){return w[3]?0:w[6]?1:w[9]?2:-1}return~(u=b(n))&&(f=g[u]=k[u](n)),{c(){e=B("section"),_.c(),t=W(),i=B("div"),y&&y.c(),l=W(),a=B("p"),o=ge(n[0]),r=W(),f&&f.c(),m(a,"class","prom-empty-state__description"),m(i,"class","prom-empty-state__content-container"),m(e,"class",d="prom-empty-state "+n[18])},m(w,M){P(w,e,M),_.m(e,null),S(e,t),S(e,i),y&&y.m(i,null),S(i,l),S(i,a),S(a,o),S(i,r),~u&&g[u].m(i,null),c=!0},p(w,[M]){p===(p=h(w))&&_?_.p(w,M):(_.d(1),_=p(w),_&&(_.c(),_.m(e,t))),w[2]?s?Le(s,w[2])?(y.d(1),y=Ms(w),s=w[2],y.c(),y.m(i,l)):y.p(w,M):(y=Ms(w),s=w[2],y.c(),y.m(i,l)):s&&(y.d(1),y=null,s=w[2]),(!c||M&1)&&Te(o,w[0]);let C=u;u=b(w),u===C?~u&&g[u].p(w,M):(f&&(me(),A(g[C],1,1,()=>{g[C]=null}),he()),~u?(f=g[u],f?f.p(w,M):(f=g[u]=k[u](w),f.c()),I(f,1),f.m(i,null)):f=null),(!c||M&262144&&d!==(d="prom-empty-state "+w[18]))&&m(e,"class",d)},i(w){c||(I(f),c=!0)},o(w){A(f),c=!1},d(w){w&&R(e),_.d(),y&&y.d(w),~u&&g[u].d()}}}function Ih(n,e,t){let{description:i=""}=e,{title:s=""}=e,{headingLevel:l="h2"}=e,{iconName:a="default"}=e,{orientation:o="vertical"}=e,{alignment:r="center"}=e,{showButton:u=!1}=e,{buttonText:f=void 0}=e,{buttonHtmlType:d="submit"}=e,{showLink:c=!1}=e,{linkType:h="standalone"}=e,{linkText:p=void 0}=e,{showButtonDropdown:_=!1}=e,{buttonIconClass:y}=e,{buttonIconPlacement:k}=e,{dropdownAlignment:g="right"}=e,{dropdownItems:b=[]}=e,{showLoadingIndicator:w=!1}=e,{href:M=""}=e,{target:C="_self"}=e,v="",T="";function E(L){J.call(this,n,L)}function N(L){J.call(this,n,L)}function F(L){J.call(this,n,L)}return n.$$set=L=>{"description"in L&&t(0,i=L.description),"title"in L&&t(1,s=L.title),"headingLevel"in L&&t(2,l=L.headingLevel),"iconName"in L&&t(19,a=L.iconName),"orientation"in L&&t(20,o=L.orientation),"alignment"in L&&t(21,r=L.alignment),"showButton"in L&&t(3,u=L.showButton),"buttonText"in L&&t(4,f=L.buttonText),"buttonHtmlType"in L&&t(5,d=L.buttonHtmlType),"showLink"in L&&t(6,c=L.showLink),"linkType"in L&&t(7,h=L.linkType),"linkText"in L&&t(8,p=L.linkText),"showButtonDropdown"in L&&t(9,_=L.showButtonDropdown),"buttonIconClass"in L&&t(10,y=L.buttonIconClass),"buttonIconPlacement"in L&&t(11,k=L.buttonIconPlacement),"dropdownAlignment"in L&&t(12,g=L.dropdownAlignment),"dropdownItems"in L&&t(13,b=L.dropdownItems),"showLoadingIndicator"in L&&t(14,w=L.showLoadingIndicator),"href"in L&&t(15,M=L.href),"target"in L&&t(16,C=L.target)},n.$$.update=()=>{if(n.$$.dirty&524288)switch(a){case"360reports":case"behaviour-overview":case"courses":case"default":case"empty-folder":case"events":case"files":case"follow-up-task":case"learning-objective":case"messages":case"news":case"notifications":case"plan-topics":case"plans":case"portfolio":case"project":case"question-category":case"search-no-result":case"test-questions":case"test-results":case"trash":case"user-groups":case"user":t(17,v=`prom-empty-state__icon--${a}`);break;default:console.warn("Please provide proper icon iconName"),t(17,v="prom-empty-state__icon--default")}n.$$.dirty&4&&(["h2","h3","h4"].some(L=>L===l)||console.warn("Valid heading levels are h2, h3 and h4")),n.$$.dirty&24&&u&&!f&&console.warn("Please provide button text"),n.$$.dirty&32832&&c&&!M&&console.warn("Please provide a valid url for the href attribute"),n.$$.dirty&320&&c&&!p&&console.warn("Please provide a link text"),n.$$.dirty&3145728&&(o!=="horizontal"&&o!=="vertical"&&console.warn("Please provide a proper orientation"),o!=="vertical"&&r!=="center"&&console.warn("Empty state does not support alignment for non-vertical state"),o==="vertical"&&r==="left"?t(18,T="prom-empty-state--aligned-left"):t(18,T=o==="horizontal"?`prom-empty-state--${o}`:""))},[i,s,l,u,f,d,c,h,p,_,y,k,g,b,w,M,C,v,T,a,o,r,E,N,F]}class gu extends Ue{constructor(e){super(),De(this,e,Ih,yh,Le,{description:0,title:1,headingLevel:2,iconName:19,orientation:20,alignment:21,showButton:3,buttonText:4,buttonHtmlType:5,showLink:6,linkType:7,linkText:8,showButtonDropdown:9,buttonIconClass:10,buttonIconPlacement:11,dropdownAlignment:12,dropdownItems:13,showLoadingIndicator:14,href:15,target:16})}}function Ch(n){let e,t,i;return{c(){e=W()},m(s,l){P(s,e,l),t||(i=Q(window,"resize",function(){ei(n[0])&&n[0].apply(this,arguments)}),t=!0)},p(s,[l]){n=s},i:we,o:we,d(s){s&&R(e),t=!1,i()}}}function vh(n,e,t){let{hasMore:i}=e,{reverseScroll:s=!1}=e,{listElement:l}=e;const a=Qe();let o,r=!1;function u(){!r&&i&&l&&l.isConnected&&(r=!0,l.scrollHeight-l.clientHeight+(s?l.scrollTop:-l.scrollTop)<=Hf?a("loadMore",{onLoaded:async()=>{r=!1,await ln(),u()}}):r=!1)}return nt(()=>{t(0,o=Ls(u,400,!1))}),Qi(()=>{l&&l.removeEventListener("scroll",o)}),n.$$set=f=>{"hasMore"in f&&t(1,i=f.hasMore),"reverseScroll"in f&&t(2,s=f.reverseScroll),"listElement"in f&&t(3,l=f.listElement)},n.$$.update=()=>{n.$$.dirty&9&&l&&l.addEventListener("scroll",o)},[o,i,s,l,u]}class _u extends Ue{constructor(e){super(),De(this,e,vh,Ch,Le,{hasMore:1,reverseScroll:2,listElement:3,tryLoadMore:4})}get tryLoadMore(){return this.$$.ctx[4]}}function Sh(n){let e,t,i,s,l;return{c(){e=B("div"),t=B("div"),i=W(),s=B("h2"),l=ge(n[0]),m(t,"class","itsl-im2__spinner"),m(e,"class","itsl-im2__loading"),m(e,"role","progressbar")},m(a,o){P(a,e,o),S(e,t),S(e,i),S(e,s),S(s,l)},p(a,[o]){o&1&&Te(l,a[0])},i:we,o:we,d(a){a&&R(e)}}}function Eh(n,e,t){let{text:i}=e;return n.$$set=s=>{"text"in s&&t(0,i=s.text)},[i]}class ns extends Ue{constructor(e){super(),De(this,e,Eh,Sh,Le,{text:0})}}const ys={dropbox:1,google:2,oneDriveForBusiness:3,local:4,oneDrivePersonal:5,webDav:6,ziggeo:7},Ah="semiotic-file-icon__folder",Jn="semiotic-file-icon__image",jn="semiotic-file-icon__audio",ct="semiotic-file-icon__archive",Et="semiotic-file-icon__presentation",At="semiotic-file-icon__spreadsheet",Ln="semiotic-file-icon__video",ot="semiotic-file-icon__doc",Bh="semiotic-file-icon__pdf",Rh="semiotic-file-icon__text",Ph="semiotic-file-icon__writer",Lh="semiotic-file-icon__impress",Nh="semiotic-file-icon__calc",Fh="semiotic-file-icon__google-document",Oh="semiotic-file-icon__google-sheets",Dh="semiotic-file-icon__google-slides",Uh="semiotic-file-icon__google-forms",Hh="semiotic-file-icon__google-drawings",Wh="semiotic-file-icon__generic",pi="semiotic-file-icon__generic-google",ls="semiotic-file-icon__generic-one-drive",no="semiotic-file-icon__generic-office365",to={ai:Jn,bmp:Jn,gif:Jn,ico:Jn,jpeg:Jn,jpg:Jn,png:Jn,ps:Jn,psd:Jn,svg:Jn,tif:Jn,tiff:Jn,acc:jn,aif:jn,cda:jn,fla:jn,mid:jn,midi:jn,m4a:jn,mp3:jn,mpa:jn,ogg:jn,wav:jn,wma:jn,wpl:jn,"7z":ct,arj:ct,deb:ct,pkg:ct,rar:ct,rpm:ct,tar:ct,z:ct,gz:ct,zip:ct,key:Et,odp:Lh,pps:Et,ppt:Et,pptm:Et,pptx:Et,ods:Nh,xlr:At,xls:At,xlsb:At,xlsm:At,xlsx:At,"3g2":Ln,"3gp":Ln,avi:Ln,flv:Ln,h264:Ln,m4v:Ln,mkv:Ln,mov:Ln,mp4:Ln,mpg:Ln,mpeg:Ln,rm:Ln,swf:Ln,vob:Ln,webm:Ln,wmv:Ln,doc:ot,docm:ot,docx:ot,odt:Ph,rtf:ot,wks:ot,wpd:ot,pdf:Bh},io={"application/vnd.google-apps.document":Fh,"application/vnd.google-apps.drawing":Hh,"application/vnd.google-apps.file":pi,"application/vnd.google-apps.folder":Ah,"application/vnd.google-apps.presentation":Dh,"application/vnd.google-apps.forms":Uh,"application/vnd.google-apps.spreadsheet":Oh},so={officedocument:ot,wordperfect:ot,msword:ot,wordpro:ot,kword:ot,text:ot,excel:At,spreadsheet:At,kspread:At,powerpoint:Et,presentation:Et,kpresenter:Et,"google-apps":pi},lo={gdrive:pi,googledrive:pi,google:pi,onedrive:ls,onedriveforbusiness:ls,o365:no,office365:no,[ys.google]:pi,[ys.oneDriveForBusiness]:ls,[ys.oneDrivePersonal]:ls};function zh(n,e,t){if(n&&(n=n.toLowerCase()),e&&(e=e.toLowerCase()),t&&typeof t=="string"&&(t=t.toLowerCase()),e&&io[e])return io[e];if(n){const i=n.split(".").pop();if(to[i])return to[i]}if(e){if(e.includes("audio/"))return jn;if(e.includes("video/"))return Ln;if(e.includes("text/"))return Rh;if(e.includes("image/"))return Jn;if(e.includes("application/")){const i=Object.keys(so);for(let s=0;s<i.length;s++)if(e.includes(i[s]))return so[i[s]]}}return t&&lo[t]?lo[t]:Wh}function ao(n){let e,t,i,s;return{c(){e=B("button"),m(e,"type","button"),m(e,"class","prom-file-element__close"),m(e,"aria-label",n[1]),m(e,"aria-describedby",t=n[0]+"-title")},m(l,a){P(l,e,a),i||(s=Q(e,"click",Tf(n[8])),i=!0)},p(l,a){a&2&&m(e,"aria-label",l[1]),a&1&&t!==(t=l[0]+"-title")&&m(e,"aria-describedby",t)},d(l){l&&R(e),i=!1,s()}}}function oo(n){let e,t;return{c(){e=B("div"),t=B("div"),m(t,"class","prom-file-element__progress"),m(t,"style",n[6]),m(e,"class","prom-file-element__progress-container")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s&64&&m(t,"style",i[6])},d(i){i&&R(e)}}}function ro(n){let e,t,i;return{c(){e=B("div"),t=ge(n[4]),m(e,"id",i=n[0]+"-error"),m(e,"class","prom-file-element__error")},m(s,l){P(s,e,l),S(e,t)},p(s,l){l&16&&Te(t,s[4]),l&1&&i!==(i=s[0]+"-error")&&m(e,"id",i)},d(s){s&&R(e)}}}function Vh(n){let e,t,i,s,l,a,o,r,u=n[5].name+"",f,d,c,h=n[5].extension+"",p,_,y,k,g,b,w,M,C=n[3]&&ao(n),v=n[2]&&oo(n),T=n[4]&&ro(n);return{c(){e=B("div"),t=B("div"),i=B("div"),s=B("button"),l=B("span"),o=W(),r=B("span"),f=ge(u),d=W(),c=B("span"),p=ge(h),k=W(),C&&C.c(),g=W(),v&&v.c(),b=W(),T&&T.c(),m(l,"class",a="prom-file-element__icon "+n[7]),m(l,"aria-hidden","true"),m(r,"class","prom-file-element__text prom-file-element__name"),m(c,"class","prom-file-element__text"),m(s,"id",_=n[0]+"-title"),m(s,"class","prom-file-element__title"),m(s,"type","button"),m(s,"aria-busy",n[2]),m(s,"aria-describedby",y=n[4]?n[0]+"-error":null),m(i,"class","prom-file-element__main-row"),m(t,"class","prom-file-element"),oe(t,"prom-file-element--error",n[4]),m(e,"id",n[0]),m(e,"class","prom-file-element__wrapper")},m(E,N){P(E,e,N),S(e,t),S(t,i),S(i,s),S(s,l),S(s,o),S(s,r),S(r,f),S(s,d),S(s,c),S(c,p),S(i,k),C&&C.m(i,null),S(t,g),v&&v.m(t,null),S(e,b),T&&T.m(e,null),w||(M=Q(s,"click",n[13]),w=!0)},p(E,[N]){N&128&&a!==(a="prom-file-element__icon "+E[7])&&m(l,"class",a),N&32&&u!==(u=E[5].name+"")&&Te(f,u),N&32&&h!==(h=E[5].extension+"")&&Te(p,h),N&1&&_!==(_=E[0]+"-title")&&m(s,"id",_),N&4&&m(s,"aria-busy",E[2]),N&17&&y!==(y=E[4]?E[0]+"-error":null)&&m(s,"aria-describedby",y),E[3]?C?C.p(E,N):(C=ao(E),C.c(),C.m(i,null)):C&&(C.d(1),C=null),E[2]?v?v.p(E,N):(v=oo(E),v.c(),v.m(t,null)):v&&(v.d(1),v=null),N&16&&oe(t,"prom-file-element--error",E[4]),E[4]?T?T.p(E,N):(T=ro(E),T.c(),T.m(e,null)):T&&(T.d(1),T=null),N&1&&m(e,"id",E[0])},i:we,o:we,d(E){E&&R(e),C&&C.d(),v&&v.d(),T&&T.d(),w=!1,M()}}}function qh(n){const e=n.split("."),t=e.length>1?"."+e.pop():"";return{name:e.join("."),extension:t}}function Xh(n,e,t){let i,s,l,a=Qe(),{id:o=Math.random().toString(36).substring(7)}=e,{name:r=""}=e,{mimeType:u=""}=e,{sourceType:f=""}=e,{closeLabel:d=""}=e,{inProgress:c=!1}=e,{progress:h=0}=e,{showClose:p=!0}=e,{error:_=void 0}=e;function y(){a("close")}function k(g){J.call(this,n,g)}return n.$$set=g=>{"id"in g&&t(0,o=g.id),"name"in g&&t(9,r=g.name),"mimeType"in g&&t(10,u=g.mimeType),"sourceType"in g&&t(11,f=g.sourceType),"closeLabel"in g&&t(1,d=g.closeLabel),"inProgress"in g&&t(2,c=g.inProgress),"progress"in g&&t(12,h=g.progress),"showClose"in g&&t(3,p=g.showClose),"error"in g&&t(4,_=g.error)},n.$$.update=()=>{n.$$.dirty&3584&&t(7,i=zh(r,u,f)),n.$$.dirty&4096&&t(6,s=h===0?"left: 10px":`left: 0;
           width: ${h*100}%;
           animation: none;
           border-style: solid;`),n.$$.dirty&512&&t(5,l=qh(r))},[o,d,c,p,_,l,s,i,y,r,u,f,h,k]}class bu extends Ue{constructor(e){super(),De(this,e,Xh,Vh,Le,{id:0,name:9,mimeType:10,sourceType:11,closeLabel:1,inProgress:2,progress:12,showClose:3,error:4})}}function Kh(n){let e,t,i,s,l,a;return{c(){e=B("span"),t=ge(n[6]),i=W(),s=ge(n[16]),l=ge(". "),a=ge(n[21]),m(e,"class","screen-reader")},m(o,r){P(o,e,r),S(e,t),S(e,i),S(e,s),S(e,l),S(e,a)},p(o,r){r[0]&64&&Te(t,o[6]),r[0]&65536&&Te(s,o[16]),r[0]&2097152&&Te(a,o[21])},d(o){o&&R(e)}}}function jh(n){let e,t=(n[4]||n[27]())+"",i,s,l,a,o,r,u,f,d,c;return{c(){e=B("span"),i=ge(t),s=W(),l=B("div"),l.textContent=`${n[26]()}.`,a=W(),o=B("span"),r=ge(n[0]),u=W(),f=B("span"),d=ge(n[0]),c=ge(":"),m(e,"aria-hidden","true"),m(e,"class","itsl-im2-message-bubble__child-header"),m(l,"class","screen-reader"),m(o,"aria-hidden","true"),m(o,"class","itsl-im2-message-bubble__child-additional-header"),m(f,"class","screen-reader")},m(h,p){P(h,e,p),S(e,i),P(h,s,p),P(h,l,p),P(h,a,p),P(h,o,p),S(o,r),P(h,u,p),P(h,f,p),S(f,d),S(f,c)},p(h,p){p[0]&16&&t!==(t=(h[4]||h[27]())+"")&&Te(i,t),p[0]&1&&Te(r,h[0]),p[0]&1&&Te(d,h[0])},d(h){h&&(R(e),R(s),R(l),R(a),R(o),R(u),R(f))}}}function Yh(n){let e;return{c(){e=B("span"),m(e,"class","itsl-im2-message-bubble__text"),oe(e,"itsl-im2-message-bubble__text--cut",n[5])},m(t,i){P(t,e,i),e.innerHTML=n[24]},p(t,i){i[0]&16777216&&(e.innerHTML=t[24]),i[0]&32&&oe(e,"itsl-im2-message-bubble__text--cut",t[5])},i:we,o:we,d(t){t&&R(e)}}}function Gh(n){let e,t;return e=new bu({props:{name:n[1],showClose:!1}}),e.$on("click",n[36]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&2&&(l.name=i[1]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function uo(n){let e,t,i,s,l,a=n[9]&&fo(n);return{c(){a&&a.c(),e=W(),t=B("div"),i=ge(n[22]),s=W(),l=ge(n[16]),m(t,"aria-hidden","true"),m(t,"class","itsl-im2-message-bubble__timestamp")},m(o,r){a&&a.m(o,r),P(o,e,r),P(o,t,r),S(t,i),S(t,s),S(t,l)},p(o,r){o[9]?a?a.p(o,r):(a=fo(o),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),r[0]&4194304&&Te(i,o[22]),r[0]&65536&&Te(l,o[16])},d(o){o&&(R(e),R(t)),a&&a.d(o)}}}function fo(n){let e,t;return{c(){e=B("div"),t=ge(n[22]),m(e,"class","screen-reader")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s[0]&4194304&&Te(t,i[22])},d(i){i&&R(e)}}}function Zh(n){let e,t,i,s,l,a,o,r,u,f;function d(g,b){return g[18]&&!g[8]?jh:Kh}let c=d(n),h=c(n);const p=[Gh,Yh],_=[];function y(g,b){return g[19]?0:1}s=y(n),l=_[s]=p[s](n);let k=!n[23]&&uo(n);return{c(){e=B("div"),h.c(),t=W(),i=B("div"),l.c(),a=W(),k&&k.c(),m(e,"aria-atomic","true"),m(e,"aria-describedby",n[7]),m(e,"aria-live","polite"),m(e,"class","itsl-im2-message-bubble"),m(e,"id",n[3]),m(e,"tabindex",o=n[17]?null:0),oe(e,"itsl-im2-message-bubble--onlyattachment",n[17]),oe(e,"itsl-im2-message-bubble--system",n[14]),oe(e,"itsl-im2-message-bubble--person",!n[14]&&!n[15]),oe(e,"itsl-im2-message-bubble--mine",n[11]&&!n[14]&&!n[17]),oe(e,"itsl-im2-message-bubble--others",!n[11]&&!n[14]&&!n[17]),oe(e,"itsl-im2-message-bubble--deleted",n[8]),oe(e,"itsl-im2-message-bubble--child",n[18]&&!n[8]),oe(e,"itsl-im2-message-bubble--forwarded",n[10]&&!n[8]),oe(e,"itsl-im2-message-bubble--reported",n[13]&&!n[8]),oe(e,"itsl-im2-message-bubble--reply",n[12]&&!n[8])},m(g,b){P(g,e,b),h.m(e,null),S(e,t),S(e,i),_[s].m(i,null),S(i,a),k&&k.m(i,null),n[37](e),r=!0,u||(f=Q(e,"keydown",n[25]),u=!0)},p(g,b){c===(c=d(g))&&h?h.p(g,b):(h.d(1),h=c(g),h&&(h.c(),h.m(e,t)));let w=s;s=y(g),s===w?_[s].p(g,b):(me(),A(_[w],1,1,()=>{_[w]=null}),he(),l=_[s],l?l.p(g,b):(l=_[s]=p[s](g),l.c()),I(l,1),l.m(i,a)),g[23]?k&&(k.d(1),k=null):k?k.p(g,b):(k=uo(g),k.c(),k.m(i,null)),(!r||b[0]&128)&&m(e,"aria-describedby",g[7]),(!r||b[0]&8)&&m(e,"id",g[3]),(!r||b[0]&131072&&o!==(o=g[17]?null:0))&&m(e,"tabindex",o),(!r||b[0]&131072)&&oe(e,"itsl-im2-message-bubble--onlyattachment",g[17]),(!r||b[0]&16384)&&oe(e,"itsl-im2-message-bubble--system",g[14]),(!r||b[0]&49152)&&oe(e,"itsl-im2-message-bubble--person",!g[14]&&!g[15]),(!r||b[0]&149504)&&oe(e,"itsl-im2-message-bubble--mine",g[11]&&!g[14]&&!g[17]),(!r||b[0]&149504)&&oe(e,"itsl-im2-message-bubble--others",!g[11]&&!g[14]&&!g[17]),(!r||b[0]&256)&&oe(e,"itsl-im2-message-bubble--deleted",g[8]),(!r||b[0]&262400)&&oe(e,"itsl-im2-message-bubble--child",g[18]&&!g[8]),(!r||b[0]&1280)&&oe(e,"itsl-im2-message-bubble--forwarded",g[10]&&!g[8]),(!r||b[0]&8448)&&oe(e,"itsl-im2-message-bubble--reported",g[13]&&!g[8]),(!r||b[0]&4352)&&oe(e,"itsl-im2-message-bubble--reply",g[12]&&!g[8])},i(g){r||(I(l),r=!0)},o(g){A(l),r=!1},d(g){g&&R(e),h.d(),_[s].d(),k&&k.d(),n[37](null),u=!1,f()}}}function pu(n,e){if(n.nodeType===Node.TEXT_NODE){const t=wu(n.nodeValue,e);n.nodeValue!==t&&n.replaceWith(...new DOMParser().parseFromString(t,"text/html").body.childNodes)}for(const t of Array.from(n.childNodes))pu(t,e)}function wu(n,e){return n.replace(e,'<span class="itsl-im2-message-bubble__text__match">$1</span>')}function Jh(n,e,t){let i,s,l,a,o,r,u,{additionalHeadingText:f}=e,{attachmentName:d}=e,{attachmentUrl:c}=e,{bubbleId:h}=e,{customHeader:p=!1}=e,{cutText:_=!1}=e,{dateForReader:y}=e,{describedby:k}=e,{hideTimestamp:g=!1}=e,{isDeleted:b}=e,{isEdited:w}=e,{isForwarded:M}=e,{isMatchingMessage:C}=e,{isMine:v}=e,{isReply:T}=e,{isReported:E}=e,{isSystem:N}=e,{messageText:F}=e,{parentCreatedRelative:L}=e,{searchString:O}=e,{senderName:j}=e,{stretch:ee=!1}=e,{timestamp:X}=e,ue;const ke=Qe(),ye=re.i18n;function ae(){return a?void 0:ue}function K({focusTarget:V=Tn.first}={}){switch(V){case Tn.first:(ae()||pe()).focus();break;case Tn.last:(pe()||be()||ae()).focus();break}}function pe(){return ue?ue.querySelector("button"):void 0}nt(()=>Y()),Qi(()=>{const V=pe();V&&V.removeEventListener("keydown",We)});async function Y(){await ln();const V=pe();V&&V.addEventListener("keydown",We)}function qe(V,H,q){let fe=V.trim();if(N||b)return Ve(fe);{const Ne=window.linkifyHtml(fe,window.CCL.LinkifyOptionsProvider.getDefaults()),Ge=fe!==Ne;if(fe=Ne,H&&q){const Ee=q.match(/(\p{L}+)/gui);if(Ee&&Ee.length){const gn=new RegExp(`(?<=^|\\P{L})(${Ee.join("|")})(?=$|\\P{L})`,"gui");if(Ge){const an=new DOMParser().parseFromString(fe,"text/html");pu(an.body,gn),fe=an.body.innerHTML}else fe=wu(fe,gn)}}return w&&fe.length>0&&/[\p{L}\d]/u.test(fe[fe.length-1])&&(fe+='<span class="screen-reader">.</span>'),fe}}function Ce(){return ue?[...ue.getElementsByTagName("a")]:[]}function be(){const V=Ce();return V.length>0?V[V.length-1]:void 0}function Xe(V){if(V.target!==pe()){if(Ke(V.key)===ce.TAB){const H=Ce();if(H.length){if(!V.shiftKey&&V.target!==H[H.length-1]){V.target===ue?H[0].focus():H[H.findIndex(q=>V.target===q)+1].focus(),V.stopPropagation(),V.preventDefault();return}if(V.shiftKey&&V.target!==ue){const q=H.findIndex(fe=>V.target===fe);q===0?ue.focus():H[q-1].focus(),V.stopPropagation(),V.preventDefault();return}}}ke("messageBubbleKeyDown",V)}}function We(V){if(Ke(V.key)===ce.TAB&&V.shiftKey){const H=be()||ae();H&&(H.focus(),V.stopPropagation(),V.preventDefault())}else ke("fileElementButtonKeyDown",V)}function je(){return M?v?$(ye.youForwardedX,L):$(ye.xForwardedY,j,L):T?v?$(ye.youRepliedX,L):$(ye.xRepliedY,j,L):v?$(ye.youReportedXDescription,L):$(ye.xReportedYDescription,j,L)}function se(){switch(!0){case M:return ye.forwarded;case E:return ye.reported;case T:return ye.reply}}const x=()=>window.open(c);function Me(V){le[V?"unshift":"push"](()=>{ue=V,t(20,ue)})}return n.$$set=V=>{"additionalHeadingText"in V&&t(0,f=V.additionalHeadingText),"attachmentName"in V&&t(1,d=V.attachmentName),"attachmentUrl"in V&&t(2,c=V.attachmentUrl),"bubbleId"in V&&t(3,h=V.bubbleId),"customHeader"in V&&t(4,p=V.customHeader),"cutText"in V&&t(5,_=V.cutText),"dateForReader"in V&&t(6,y=V.dateForReader),"describedby"in V&&t(7,k=V.describedby),"hideTimestamp"in V&&t(28,g=V.hideTimestamp),"isDeleted"in V&&t(8,b=V.isDeleted),"isEdited"in V&&t(9,w=V.isEdited),"isForwarded"in V&&t(10,M=V.isForwarded),"isMatchingMessage"in V&&t(29,C=V.isMatchingMessage),"isMine"in V&&t(11,v=V.isMine),"isReply"in V&&t(12,T=V.isReply),"isReported"in V&&t(13,E=V.isReported),"isSystem"in V&&t(14,N=V.isSystem),"messageText"in V&&t(30,F=V.messageText),"parentCreatedRelative"in V&&t(31,L=V.parentCreatedRelative),"searchString"in V&&t(32,O=V.searchString),"senderName"in V&&t(33,j=V.senderName),"stretch"in V&&t(15,ee=V.stretch),"timestamp"in V&&t(16,X=V.timestamp)},n.$$.update=()=>{n.$$.dirty[0]&1610612736|n.$$.dirty[1]&2&&t(24,i=qe(F,C,O)),n.$$.dirty[0]&2&&t(19,s=!!d),n.$$.dirty[0]&13312&&t(18,l=M||E||T),n.$$.dirty[0]&786432&&t(17,a=s&&!l),n.$$.dirty[0]&268451840&&t(23,o=g||N),n.$$.dirty[0]&512&&t(22,r=w?ye.messageEdited:""),n.$$.dirty[0]&149760|n.$$.dirty[1]&4&&t(21,u=N||b?"":a?v?`${ye.youSharedAnAttachment}.`:`${$(ye.xSharedAnAttachment,j)}.`:v?`${ye.youWrote}.`:`${$(ye.xWrote,j)}.`)},[f,d,c,h,p,_,y,k,b,w,M,v,T,E,N,ee,X,a,l,s,ue,u,r,o,i,Xe,je,se,g,C,F,L,O,j,K,pe,x,Me]}class ku extends Ue{constructor(e){super(),De(this,e,Jh,Zh,Le,{additionalHeadingText:0,attachmentName:1,attachmentUrl:2,bubbleId:3,customHeader:4,cutText:5,dateForReader:6,describedby:7,hideTimestamp:28,isDeleted:8,isEdited:9,isForwarded:10,isMatchingMessage:29,isMine:11,isReply:12,isReported:13,isSystem:14,messageText:30,parentCreatedRelative:31,searchString:32,senderName:33,stretch:15,timestamp:16,focus:34,getFileElementButton:35},null,[-1,-1])}get focus(){return this.$$.ctx[34]}get getFileElementButton(){return this.$$.ctx[35]}}function co(n){let e,t,i={attachmentName:n[4]?n[4].AttachmentName:null,attachmentUrl:n[4]?n[4].AttachmentUrl:null,additionalHeading:n[4]&&n[4].AdditionalHeading,canDelete:n[4]&&n[2],conversationId:n[5],createdRelative:n[4]&&n[4].CreatedRelative,currentMessageId:n[4]?n[4].MessageId:po.concat(n[7]),dateForReader:n[4]&&n[4].CreatedLocalDateStamp,hasAttachment:n[4]&&!!n[4].AttachmentName,highlightedMessageId:n[13],is360ReportThread:n[14],isChildWithParentHidden:n[73],isDeleted:n[3]||n[62],isForwarded:n[10],isReply:n[11],isReported:n[12],isMine:n[18],lastReadInstantMessageId:n[22],massMessageType:n[23],matchingMessageIds:n[25],messageListElement:n[26],messageText:n[3]?n[72].messageWasRemoved:n[62]?n[32]:n[4].Text,modalDialog:n[28],nextMessageId:n[29],originInstantMessageId:n[30],originMessageDeleted:n[31],parentCreatedRelative:n[6],parentMessageId:n[7],posInSet:n[35],previousMessageId:n[36],reportAbuseModal:n[37],searchString:n[38],senderAvatarUrl:n[39],senderId:n[40],senderName:n[41],setSize:n[42],showSender:n[70],sortIndex:n[43],timestamp:n[44],threadType:n[24]};return e=new Tu({props:i}),n[107](e),e.$on("focusBackward",n[88]),e.$on("focusForward",n[76]),e.$on("markAsUnread",n[108]),e.$on("raiseError",n[109]),e.$on("releaseFocusDown",n[110]),e.$on("releaseFocusUp",n[111]),e.$on("toggleUnreadMessageObservation",n[112]),{c(){ie(e.$$.fragment)},m(s,l){ne(e,s,l),t=!0},p(s,l){const a={};l[0]&16&&(a.attachmentName=s[4]?s[4].AttachmentName:null),l[0]&16&&(a.attachmentUrl=s[4]?s[4].AttachmentUrl:null),l[0]&16&&(a.additionalHeading=s[4]&&s[4].AdditionalHeading),l[0]&20&&(a.canDelete=s[4]&&s[2]),l[0]&32&&(a.conversationId=s[5]),l[0]&16&&(a.createdRelative=s[4]&&s[4].CreatedRelative),l[0]&144&&(a.currentMessageId=s[4]?s[4].MessageId:po.concat(s[7])),l[0]&16&&(a.dateForReader=s[4]&&s[4].CreatedLocalDateStamp),l[0]&16&&(a.hasAttachment=s[4]&&!!s[4].AttachmentName),l[0]&8192&&(a.highlightedMessageId=s[13]),l[0]&16384&&(a.is360ReportThread=s[14]),l[0]&8|l[2]&1&&(a.isDeleted=s[3]||s[62]),l[0]&1024&&(a.isForwarded=s[10]),l[0]&2048&&(a.isReply=s[11]),l[0]&4096&&(a.isReported=s[12]),l[0]&262144&&(a.isMine=s[18]),l[0]&4194304&&(a.lastReadInstantMessageId=s[22]),l[0]&8388608&&(a.massMessageType=s[23]),l[0]&33554432&&(a.matchingMessageIds=s[25]),l[0]&67108864&&(a.messageListElement=s[26]),l[0]&24|l[1]&2|l[2]&1&&(a.messageText=s[3]?s[72].messageWasRemoved:s[62]?s[32]:s[4].Text),l[0]&268435456&&(a.modalDialog=s[28]),l[0]&536870912&&(a.nextMessageId=s[29]),l[0]&1073741824&&(a.originInstantMessageId=s[30]),l[1]&1&&(a.originMessageDeleted=s[31]),l[0]&64&&(a.parentCreatedRelative=s[6]),l[0]&128&&(a.parentMessageId=s[7]),l[1]&16&&(a.posInSet=s[35]),l[1]&32&&(a.previousMessageId=s[36]),l[1]&64&&(a.reportAbuseModal=s[37]),l[1]&128&&(a.searchString=s[38]),l[1]&256&&(a.senderAvatarUrl=s[39]),l[1]&512&&(a.senderId=s[40]),l[1]&1024&&(a.senderName=s[41]),l[1]&2048&&(a.setSize=s[42]),l[2]&256&&(a.showSender=s[70]),l[1]&4096&&(a.sortIndex=s[43]),l[1]&8192&&(a.timestamp=s[44]),l[0]&16777216&&(a.threadType=s[24]),e.$set(a)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){n[107](null),te(e,s)}}}function Qh(n){let e,t,i,s,l,a,o=n[89](),r,u,f,d,c,h=n[60]&&mo(n);const p=[n1,e1],_=[];function y(b,w){return b[47]?0:b[74]?-1:1}~(s=y(n))&&(l=_[s]=p[s](n));let k=o&&t1(n),g=!n[21]&&n[46][0].options.length>0&&!n[47]&&!n[74]&&bo(n);return{c(){e=B("div"),t=B("div"),h&&h.c(),i=W(),l&&l.c(),a=W(),k&&k.c(),r=W(),g&&g.c(),m(t,"class","itsl-im2-message__container"),m(e,"class","itsl-im2-message"),m(e,"id",n[68]),m(e,"role","article"),m(e,"aria-posinset",n[35]),m(e,"aria-setsize",n[42]),m(e,"data-parentorcurrentmessageid",u=n[34]||n[7]),oe(e,"itsl-im2-message--attachment",n[9]),oe(e,"itsl-im2-message--mine",n[18]&&!n[21]),oe(e,"itsl-im2-message--others",!n[18]&&!n[21]),oe(e,"itsl-im2-message--editing",n[47]),oe(e,"itsl-im2-message--highlighted",n[13]===n[7])},m(b,w){P(b,e,w),S(e,t),h&&h.m(t,null),S(t,i),~s&&_[s].m(t,null),S(t,a),k&&k.m(t,null),S(t,r),g&&g.m(t,null),n[121](e),f=!0,d||(c=Q(e,"keydown",n[75]),d=!0)},p(b,w){b[60]?h?(h.p(b,w),w[1]&536870912&&I(h,1)):(h=mo(b),h.c(),I(h,1),h.m(t,i)):h&&(me(),A(h,1,1,()=>{h=null}),he());let M=s;s=y(b),s===M?~s&&_[s].p(b,w):(l&&(me(),A(_[M],1,1,()=>{_[M]=null}),he()),~s?(l=_[s],l?l.p(b,w):(l=_[s]=p[s](b),l.c()),I(l,1),l.m(t,a)):l=null),o&&k.p(b,w),!b[21]&&b[46][0].options.length>0&&!b[47]&&!b[74]?g?(g.p(b,w),w[0]&2097152|w[1]&98304&&I(g,1)):(g=bo(b),g.c(),I(g,1),g.m(t,null)):g&&(me(),A(g,1,1,()=>{g=null}),he()),(!f||w[2]&64)&&m(e,"id",b[68]),(!f||w[1]&16)&&m(e,"aria-posinset",b[35]),(!f||w[1]&2048)&&m(e,"aria-setsize",b[42]),(!f||w[0]&128|w[1]&8&&u!==(u=b[34]||b[7]))&&m(e,"data-parentorcurrentmessageid",u),(!f||w[0]&512)&&oe(e,"itsl-im2-message--attachment",b[9]),(!f||w[0]&2359296)&&oe(e,"itsl-im2-message--mine",b[18]&&!b[21]),(!f||w[0]&2359296)&&oe(e,"itsl-im2-message--others",!b[18]&&!b[21]),(!f||w[1]&65536)&&oe(e,"itsl-im2-message--editing",b[47]),(!f||w[0]&8320)&&oe(e,"itsl-im2-message--highlighted",b[13]===b[7])},i(b){f||(I(h),I(l),I(k),I(g),f=!0)},o(b){A(h),A(l),A(k),A(g),f=!1},d(b){b&&R(e),h&&h.d(),~s&&_[s].d(),k&&k.d(),g&&g.d(),n[121](null),d=!1,c()}}}function mo(n){let e,t,i,s,l;const a=[$h,xh],o=[];function r(f,d){return f[59]?0:1}e=r(n),t=o[e]=a[e](n);let u=!n[17]&&!n[20]&&ho(n);return{c(){t.c(),i=W(),u&&u.c(),s=Ye()},m(f,d){o[e].m(f,d),P(f,i,d),u&&u.m(f,d),P(f,s,d),l=!0},p(f,d){let c=e;e=r(f),e===c?o[e].p(f,d):(me(),A(o[c],1,1,()=>{o[c]=null}),he(),t=o[e],t?t.p(f,d):(t=o[e]=a[e](f),t.c()),I(t,1),t.m(i.parentNode,i)),!f[17]&&!f[20]?u?u.p(f,d):(u=ho(f),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},i(f){l||(I(t),l=!0)},o(f){A(t),l=!1},d(f){f&&(R(i),R(s)),o[e].d(f),u&&u.d(f)}}}function xh(n){let e,t;return e=new ti({props:{is360ReportThread:n[14],massMessageType:n[23],oneToOneAvatarUrl:n[39],size:200,threadType:Oe.oneToOne}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&16384&&(l.is360ReportThread=i[14]),s[0]&8388608&&(l.massMessageType=i[23]),s[1]&256&&(l.oneToOneAvatarUrl=i[39]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function $h(n){let e,t,i,s,l,a;return t=new ti({props:{is360ReportThread:n[14],massMessageType:n[23],oneToOneAvatarUrl:n[39],size:200,threadType:Oe.oneToOne}}),{c(){e=B("button"),ie(t.$$.fragment),m(e,"aria-label",i=$(n[72].openProfileCard,n[41])),m(e,"class","itsl-im2__profile_card_button"),m(e,"type","button")},m(o,r){P(o,e,r),ne(t,e,null),n[113](e),s=!0,l||(a=[Q(e,"click",n[92]),Q(e,"keydown",n[80])],l=!0)},p(o,r){const u={};r[0]&16384&&(u.is360ReportThread=o[14]),r[0]&8388608&&(u.massMessageType=o[23]),r[1]&256&&(u.oneToOneAvatarUrl=o[39]),t.$set(u),(!s||r[1]&1024&&i!==(i=$(o[72].openProfileCard,o[41])))&&m(e,"aria-label",i)},i(o){s||(I(t.$$.fragment,o),s=!0)},o(o){A(t.$$.fragment,o),s=!1},d(o){o&&R(e),te(t),n[113](null),l=!1,nn(a)}}}function ho(n){let e,t;return{c(){e=B("div"),t=ge(n[41]),m(e,"aria-hidden","true"),m(e,"class","itsl-im2-message__sender-name")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s[1]&1024&&Te(t,i[41])},d(i){i&&R(e)}}}function e1(n){let e,t,i,s={additionalHeadingText:n[71],attachmentName:n[0],attachmentUrl:n[1],bubbleId:n[65],dateForReader:n[8],describedby:n[67],isDeleted:n[15],isEdited:n[16],isForwarded:n[17],isMatchingMessage:n[25]&&n[25].includes(n[7]),isMine:n[18],isReply:n[19],isReported:n[20],isSystem:n[21],messageText:n[27],parentCreatedRelative:n[33],searchString:n[38],senderName:n[41],timestamp:n[44]};return t=new ku({props:s}),n[118](t),t.$on("fileElementButtonKeyDown",n[82]),t.$on("messageBubbleKeyDown",n[81]),{c(){e=B("div"),ie(t.$$.fragment),m(e,"class","itsl-im2-message__bubble-position"),oe(e,"itsl-im2-message__bubble-position--system",n[21])},m(l,a){P(l,e,a),ne(t,e,null),i=!0},p(l,a){const o={};a[0]&1&&(o.attachmentName=l[0]),a[0]&2&&(o.attachmentUrl=l[1]),a[2]&8&&(o.bubbleId=l[65]),a[0]&256&&(o.dateForReader=l[8]),a[2]&32&&(o.describedby=l[67]),a[0]&32768&&(o.isDeleted=l[15]),a[0]&65536&&(o.isEdited=l[16]),a[0]&131072&&(o.isForwarded=l[17]),a[0]&33554560&&(o.isMatchingMessage=l[25]&&l[25].includes(l[7])),a[0]&262144&&(o.isMine=l[18]),a[0]&524288&&(o.isReply=l[19]),a[0]&1048576&&(o.isReported=l[20]),a[0]&2097152&&(o.isSystem=l[21]),a[0]&134217728&&(o.messageText=l[27]),a[1]&4&&(o.parentCreatedRelative=l[33]),a[1]&128&&(o.searchString=l[38]),a[1]&1024&&(o.senderName=l[41]),a[1]&8192&&(o.timestamp=l[44]),t.$set(o),(!i||a[0]&2097152)&&oe(e,"itsl-im2-message__bubble-position--system",l[21])},i(l){i||(I(t.$$.fragment,l),i=!0)},o(l){A(t.$$.fragment,l),i=!1},d(l){l&&R(e),n[118](null),te(t)}}}function n1(n){let e,t,i,s,l,a,o,r,u=n[27].trim()+"",f,d,c;return t=new Bn({props:{disabled:n[45],htmlType:"button",iconClass:"itsl-im2-message__edit-buttons__cancel",iconOnly:!0,id:n[58],text:n[72].editCancelButtonText,type:"secondary"}}),t.$on("click",n[85]),t.$on("keydown",n[114]),s=new Bn({props:{disabled:n[45],htmlType:"button",iconClass:"itsl-im2-message__edit-buttons__accept",iconOnly:!0,id:n[57],text:n[72].editAcceptButtonText,type:"primary"}}),s.$on("click",n[84]),s.$on("keydown",n[115]),{c(){e=B("div"),ie(t.$$.fragment),i=W(),ie(s.$$.fragment),l=W(),a=B("textarea"),o=W(),r=B("div"),m(e,"class","itsl-im2-message__edit-buttons"),m(a,"aria-label",n[72].messageTextAreaLabel),m(a,"class","itsl-im2-message__bubble-position itsl-im2-message__edit-textarea"),a.disabled=n[45],a.value=n[66],Sf(r,"display","none")},m(h,p){P(h,e,p),ne(t,e,null),S(e,i),ne(s,e,null),P(h,l,p),P(h,a,p),n[116](a),P(h,o,p),P(h,r,p),r.innerHTML=u,n[117](r),f=!0,d||(c=[Q(a,"input",n[87]),Q(a,"keydown",n[83])],d=!0)},p(h,p){const _={};p[1]&16384&&(_.disabled=h[45]),p[1]&134217728&&(_.id=h[58]),t.$set(_);const y={};p[1]&16384&&(y.disabled=h[45]),p[1]&67108864&&(y.id=h[57]),s.$set(y),(!f||p[1]&16384)&&(a.disabled=h[45]),(!f||p[2]&16)&&(a.value=h[66]),(!f||p[0]&134217728)&&u!==(u=h[27].trim()+"")&&(r.innerHTML=u)},i(h){f||(I(t.$$.fragment,h),I(s.$$.fragment,h),f=!0)},o(h){A(t.$$.fragment,h),A(s.$$.fragment,h),f=!1},d(h){h&&(R(e),R(l),R(a),R(o),R(r)),te(t),te(s),n[116](null),n[117](null),d=!1,nn(c)}}}function t1(n){let e,t,i,s=n[64]&&go(n),l=!n[63]&&_o(n);return{c(){s&&s.c(),e=W(),l&&l.c(),t=Ye()},m(a,o){s&&s.m(a,o),P(a,e,o),l&&l.m(a,o),P(a,t,o),i=!0},p(a,o){a[64]?s?s.p(a,o):(s=go(a),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),a[63]?l&&(me(),A(l,1,1,()=>{l=null}),he()):l?(l.p(a,o),o[2]&2&&I(l,1)):(l=_o(a),l.c(),I(l,1),l.m(t.parentNode,t))},i(a){i||(I(l),i=!0)},o(a){A(l),i=!1},d(a){a&&(R(e),R(t)),s&&s.d(a),l&&l.d(a)}}}function go(n){let e,t;return{c(){e=B("span"),t=ge(n[64]),m(e,"class","itsl-im2-message__action-description"),m(e,"id",n[67])},m(i,s){P(i,e,s),S(e,t)},p(i,s){s[2]&4&&Te(t,i[64]),s[2]&32&&m(e,"id",i[67])},d(i){i&&R(e)}}}function _o(n){let e,t,i={"aria-haspopup":"true",cssClass:"itsl-im2-message__action-button",describedby:n[67],htmlType:"button",id:n[56],large:!0,text:n[61].text,type:n[61].type};return e=new Yn({props:i}),n[119](e),e.$on("click",n[91]),e.$on("keydown",n[90]),{c(){ie(e.$$.fragment)},m(s,l){ne(e,s,l),t=!0},p(s,l){const a={};l[2]&32&&(a.describedby=s[67]),l[1]&33554432&&(a.id=s[56]),l[1]&1073741824&&(a.text=s[61].text),l[1]&1073741824&&(a.type=s[61].type),e.$set(a)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){n[119](null),te(e,s)}}}function bo(n){let e,t,i={id:n[69],buttonReaderDescription:n[77](),containerClass:"itsl-im2-message__options-button-dropdown-container",dropdownOptions:n[46],parentElement:n[26]};return e=new uu({props:i}),n[120](e),e.$on("buttonKeyDown",n[79]),e.$on("selectedOption",n[78]),{c(){ie(e.$$.fragment)},m(s,l){ne(e,s,l),t=!0},p(s,l){const a={};l[2]&128&&(a.id=s[69]),l[1]&32768&&(a.dropdownOptions=s[46]),l[0]&67108864&&(a.parentElement=s[26]),e.$set(a)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){n[120](null),te(e,s)}}}function i1(n){let e,t,i,s=(n[4]?!n[15]:n[3])&&co(n),l=!n[73]&&Qh(n);return{c(){s&&s.c(),e=W(),l&&l.c(),t=Ye()},m(a,o){s&&s.m(a,o),P(a,e,o),l&&l.m(a,o),P(a,t,o),i=!0},p(a,o){(a[4]?!a[15]:a[3])?s?(s.p(a,o),o[0]&32792&&I(s,1)):(s=co(a),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(me(),A(s,1,1,()=>{s=null}),he()),a[73]||l.p(a,o)},i(a){i||(I(s),I(l),i=!0)},o(a){A(s),A(l),i=!1},d(a){a&&(R(e),R(t)),s&&s.d(a),l&&l.d(a)}}}const po="deleted-child-";function Is(n){n.style.height=0,n.style.height=`${n.scrollHeight+5}px`}function s1(n,e,t){let i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g,b;yi(n,Gt,U=>t(122,b=U));let{additionalHeading:w=void 0}=e,{attachmentName:M}=e,{attachmentUrl:C}=e,{canDelete:v=!1}=e,{canEdit:T=!1}=e,{childDeletedPermanently:E=!1}=e,{childMessage:N}=e,{conversationId:F}=e,{createdRelative:L}=e,{currentMessageId:O}=e,{dateForReader:j}=e,{editDraftText:ee}=e,{hasAttachment:X=!1}=e,{hasForward:ue=!1}=e,{hasReply:ke=!1}=e,{hasReport:ye=!1}=e,{hasThreadReport:ae=!1}=e,{highlightedMessageId:K}=e,{is360ReportThread:pe}=e,{isAbuse:Y=!1}=e,{isChildWithParentHidden:qe=!1}=e,{isDeleted:Ce=!1}=e,{isEdited:be=!1}=e,{isForwarded:Xe=!1}=e,{isMine:We=!1}=e,{isReply:je=!1}=e,{isReported:se=!1}=e,{isSystem:x=!1}=e,{lastReadInstantMessageId:Me}=e,{massMessageType:V}=e,{threadType:H}=e,{matchingMessageIds:q}=e,{messageListElement:fe}=e,{messageText:Ne}=e,{modalDialog:Ge}=e,{nextMessageId:Ee}=e,{originInstantMessageId:gn}=e,{originMessageDeleted:an}=e,{originMessageText:vn}=e,{originThreadDeleted:dn}=e,{originThreadId:_e}=e,{originThreadName:Fe}=e,{parentCreatedRelative:cn=void 0}=e,{parentMessageId:Ie=void 0}=e,{posInSet:on}=e,{previousMessageId:Dn}=e,{reportAbuseModal:In}=e,{searchString:Sn}=e,{senderAvatarUrl:En}=e,{senderFullName:Un=void 0}=e,{senderId:Nn}=e,{senderProfileUrl:qn=void 0}=e,{senderName:Rn}=e,{setSize:it}=e,{showSender:pn}=e,{sortIndex:Hn}=e,{timestamp:wn}=e,{waitingForEditResponse:Xn}=e,G,Z,Pe,He=!!ee,Ze,Cn,Pn,rn,tn,Mn;const Gn=`${w} ${L}`,Wn=Qe(),Je=re.i18n,ft=Ne.trim()===""&&!X&&!ae,ii=Ne.trim()===""&&ae;function kt({focusTarget:U=Tn.first}={}){U===Tn.last?yt():ri()}nt(()=>Si()),Qi(()=>Ei());async function Si(){He&&Is(Ze),await ln(),fe.addEventListener("cancelOtherEditing",Ot),fe.addEventListener("focusMessage",Dt),fe.addEventListener("scrollToMessage",si),fe.addEventListener("messageEditSuccess",Ut),y&&(!Ie||qe)&&!ft&&Ft()}function Ei(){fe.removeEventListener("cancelOtherEditing",Ot),fe.removeEventListener("focusMessage",Dt),fe.removeEventListener("scrollToMessage",si),fe.removeEventListener("messageEditSuccess",Ut),Ft(!1)}function Ft(U=!0){Wn("toggleUnreadMessageObservation",{messageElement:Pn,observe:U})}function Ot(U){U.detail.messageId!==O&&pt(!1,!1)}function Dt(U){if(U.detail.messageId===O)switch(U.detail.target){case Tn.first:ri();break;case Tn.last:yt();break;default:console.log("Unknown element to focus.");break}}function si(U){var ve,xe;const z=qe&&Ie?Ie:O;U.detail.messageId===z&&(fe==null||fe.scroll({behavior:U.detail.behavior,top:((ve=Pn==null?void 0:Pn.getBoundingClientRect())==null?void 0:ve.top)-((xe=fe==null?void 0:fe.getBoundingClientRect())==null?void 0:xe.top)+(fe==null?void 0:fe.scrollTop)}))}function Ut(U){U.detail.messageId===O&&pt(!1)}function Tt(U){const z=Ke(U.key);if(z===ce.TAB)U.shiftKey?_t():Mt();else if(["PageUp",ce.UP].includes(z))_t(Tn.first);else if(["PageDown",ce.DOWN].includes(z))Mt();else if(z==="Home"&&U.ctrlKey)Wn("releaseFocusUp");else if(z==="End"&&U.ctrlKey)Wn("releaseFocusDown");else return;U.preventDefault()}function Mt(){Wn("focusForward",{nextMessageId:Ee})}function _t(U=Tn.last){Wn("focusBackward",{previousMessageId:Dn,target:U})}function Ai(){let U;switch(!0){case x:U="";break;case We:U=Xe?Je.optionsForMessageForwardedFromYou:Je.optionsForMessageFromYou;break;default:U=$(Xe?Je.optionsForMessageForwardedFromX:Je.optionsForMessageFromX,Rn)}const z=Xe?`${Gn}. ${Ne}.`:`${Ne}. ${$(Je.sentAtX,[`${j} ${wn}`])}`;return`${U} ${z}`}function Bi(U){switch(U.detail.data.action){case dt.delete:b?Ge.prompt({messageId:Ie||O,confirmButtonType:"destructive",confirmText:Je.deleteConfirm,cancelText:Je.deleteCancel,titleText:Je.deleteMessageQuestion,bodyText:V!==On.none?Je.permanentDeletionModalDescription:We?Je.yourMessageWillBeDeletedForEveryoneInThisChat:Je.thisMessageWillBeDeletedForEveryoneInThisChat}):Wn("raiseError",{errorType:Se.connection});break;case dt.edit:Xn||(Wn("startedEditingMessage",{messageId:O,text:Ne}),pt(!0));break;case dt.forward:Wn("forwardMessage",{attachmentName:M,attachmentUrl:C,createdRelative:L,customHeader:Je.forward,dateForReader:j,hasAttachment:X,isDeleted:Ce,isEdited:be,isMine:We,isSystem:x,messageId:O,messageText:Ne,senderId:Nn,senderName:Rn,senderFullName:Un,timestamp:wn});break;case dt.markAsUnread:Wn("markAsUnread",{messageId:Ie||O});break;case dt.reportAbuse:In.prompt({reportedMessageId:O})}}function bt(U){const z=U.detail;Zn({event:z,prevElement:rn,nextElement:G?r:Z})}function li(U){if(!U.shiftKey){const z=rn==null?void 0:rn.getFileElementButton();Zn({event:U,nextElement:z||rn||Z||r})}}function Ri(U){const z=U.detail,ve=rn==null?void 0:rn.getFileElementButton(),xe=z.shiftKey?ve||Mn||Z||r:ve||tn||Z||r,$e=z.shiftKey&&xe===Mn;Zn({event:z,prevElement:$e?Mn:void 0,nextElement:$e?void 0:xe})}function Ht(U){const z=U.detail;Zn({event:z,nextElement:tn||Z||r})}function ai(U){Zn({event:U,nextElement:l}),[ce.DOWN,ce.UP].includes(Ke(U.key))&&U.stopPropagation()}async function pt(U,z=!0){U!==He&&(t(47,He=U!==void 0?U:!He),He&&(await ln(),Ze&&Is(Ze),z&&Ze&&Ze.focus()&&Ze.setSelectionRange(Ze.value.length,Ze.value.length)))}function Pi(){const U=Ze.value.trim();U!==Ne.trim()&&U!==""?Wn("messageEdited",{messageId:O,text:U}):pt(!1)}function oi(){Xn||(Gi(at.editing,F),pt())}function Zn({event:U,prevElement:z=!1,nextElement:ve=!1}={}){const xe=Ke(U.key);let $e,mn;if(U.key!=="Shift"){if(z&&(mn=typeof z=="string"?document.getElementById(z):z),ve&&($e=typeof ve=="string"?document.getElementById(ve):ve),xe===ce.TAB)if(U.shiftKey)if(mn)mn.focus({focusTarget:Tn.last});else return;else if($e)$e.focus({focusTarget:Tn.first});else return;else return;U.stopPropagation(),U.preventDefault()}}function ri(){He?Ze.focus():Mn?Mn.focus():rn?rn.focus({focusTarget:Tn.first}):G?document.getElementById(r).focus():Z?Z.focus({focusTarget:Tn.first}):Mt()}function yt(U=!1){Z&&!U?Z.focus({focusTarget:Tn.last}):He?document.getElementById(s).focus():G?document.getElementById(r).focus():tn?tn.focus():rn?rn.focus({focusTarget:Tn.last}):_t()}function Li(){Is(Ze);const U={messageId:O,text:Ze.value};Ze.value!==""?Rs(at.editing,F,JSON.stringify(U)):Gi(at.sending,F)}function Ni(U){ft?_t(U.detail.target):yt(!0)}function ui(){return re.customerSettings.reportAbuseEnabled&&!Ce&&(se?re.isStaff:ae)}function fi(U){Zn({event:U,prevElement:tn||rn})}function Wt(){se?Ge.prompt({messageId:gn,confirmButtonType:"destructive",confirmText:Je.remove,cancelText:Je.cancel,titleText:Je.removeMessageQuestion,bodyText:Je.participantsWillNoLongerSee}):ae&&Wn("openReportedThread",{threadId:_e})}function zt(){if(se)return{type:"primary",text:Je.removeMessage};if(ae)return{type:"secondary",text:Je.viewConversation}}function di(){if(an)return Je.thisMessageWasRemoved;if(ae)return dn?Je.conversationRemovedParticipantsCanNoLongerAccessIt:We?Fe?$(Je.youReportedXName,Fe):Je.youReportedAConversation:Fe?$(Je.xReportedYName,Rn,Fe):$(Je.xReportedAConversation,Rn)}function wt(){qn&&Qs(Nn,null,qn)}function Vt(U){le[U?"unshift":"push"](()=>{Z=U,t(50,Z)})}function qt(U){J.call(this,n,U)}function Fi(U){J.call(this,n,U)}function Oi(U){J.call(this,n,U)}function Di(U){J.call(this,n,U)}function Ui(U){J.call(this,n,U)}function Hi(U){le[U?"unshift":"push"](()=>{Mn=U,t(55,Mn)})}const Wi=U=>Zn({event:U,prevElement:Ze,nextElement:s}),Xt=U=>Zn({event:U,prevElement:l,nextElement:Z});function zi(U){le[U?"unshift":"push"](()=>{Ze=U,t(51,Ze)})}function Vi(U){le[U?"unshift":"push"](()=>{Cn=U,t(48,Cn)})}function It(U){le[U?"unshift":"push"](()=>{rn=U,t(53,rn)})}function ci(U){le[U?"unshift":"push"](()=>{G=U,t(49,G)})}function Kt(U){le[U?"unshift":"push"](()=>{tn=U,t(54,tn)})}function qi(U){le[U?"unshift":"push"](()=>{Pn=U,t(52,Pn)})}return n.$$set=U=>{"additionalHeading"in U&&t(93,w=U.additionalHeading),"attachmentName"in U&&t(0,M=U.attachmentName),"attachmentUrl"in U&&t(1,C=U.attachmentUrl),"canDelete"in U&&t(2,v=U.canDelete),"canEdit"in U&&t(94,T=U.canEdit),"childDeletedPermanently"in U&&t(3,E=U.childDeletedPermanently),"childMessage"in U&&t(4,N=U.childMessage),"conversationId"in U&&t(5,F=U.conversationId),"createdRelative"in U&&t(6,L=U.createdRelative),"currentMessageId"in U&&t(7,O=U.currentMessageId),"dateForReader"in U&&t(8,j=U.dateForReader),"editDraftText"in U&&t(95,ee=U.editDraftText),"hasAttachment"in U&&t(9,X=U.hasAttachment),"hasForward"in U&&t(10,ue=U.hasForward),"hasReply"in U&&t(11,ke=U.hasReply),"hasReport"in U&&t(12,ye=U.hasReport),"hasThreadReport"in U&&t(96,ae=U.hasThreadReport),"highlightedMessageId"in U&&t(13,K=U.highlightedMessageId),"is360ReportThread"in U&&t(14,pe=U.is360ReportThread),"isAbuse"in U&&t(97,Y=U.isAbuse),"isChildWithParentHidden"in U&&t(98,qe=U.isChildWithParentHidden),"isDeleted"in U&&t(15,Ce=U.isDeleted),"isEdited"in U&&t(16,be=U.isEdited),"isForwarded"in U&&t(17,Xe=U.isForwarded),"isMine"in U&&t(18,We=U.isMine),"isReply"in U&&t(19,je=U.isReply),"isReported"in U&&t(20,se=U.isReported),"isSystem"in U&&t(21,x=U.isSystem),"lastReadInstantMessageId"in U&&t(22,Me=U.lastReadInstantMessageId),"massMessageType"in U&&t(23,V=U.massMessageType),"threadType"in U&&t(24,H=U.threadType),"matchingMessageIds"in U&&t(25,q=U.matchingMessageIds),"messageListElement"in U&&t(26,fe=U.messageListElement),"messageText"in U&&t(27,Ne=U.messageText),"modalDialog"in U&&t(28,Ge=U.modalDialog),"nextMessageId"in U&&t(29,Ee=U.nextMessageId),"originInstantMessageId"in U&&t(30,gn=U.originInstantMessageId),"originMessageDeleted"in U&&t(31,an=U.originMessageDeleted),"originMessageText"in U&&t(32,vn=U.originMessageText),"originThreadDeleted"in U&&t(99,dn=U.originThreadDeleted),"originThreadId"in U&&t(100,_e=U.originThreadId),"originThreadName"in U&&t(101,Fe=U.originThreadName),"parentCreatedRelative"in U&&t(33,cn=U.parentCreatedRelative),"parentMessageId"in U&&t(34,Ie=U.parentMessageId),"posInSet"in U&&t(35,on=U.posInSet),"previousMessageId"in U&&t(36,Dn=U.previousMessageId),"reportAbuseModal"in U&&t(37,In=U.reportAbuseModal),"searchString"in U&&t(38,Sn=U.searchString),"senderAvatarUrl"in U&&t(39,En=U.senderAvatarUrl),"senderFullName"in U&&t(102,Un=U.senderFullName),"senderId"in U&&t(40,Nn=U.senderId),"senderProfileUrl"in U&&t(103,qn=U.senderProfileUrl),"senderName"in U&&t(41,Rn=U.senderName),"setSize"in U&&t(42,it=U.setSize),"showSender"in U&&t(104,pn=U.showSender),"sortIndex"in U&&t(43,Hn=U.sortIndex),"timestamp"in U&&t(44,wn=U.timestamp),"waitingForEditResponse"in U&&t(45,Xn=U.waitingForEditResponse)},n.$$.update=()=>{n.$$.dirty[3]&2048&&t(70,i=pn&&ft),n.$$.dirty[0]&128&&t(57,s=`itsl-im2-message-accept-edit-button-${O}`),n.$$.dirty[0]&128&&t(58,l=`itsl-im2-message-cancel-edit-button-${O}`),n.$$.dirty[0]&128&&t(69,a=`itsl-im2-message-options-${O}`),n.$$.dirty[0]&128&&t(68,o=Hr(O)),n.$$.dirty[0]&128&&t(56,r=`itsl-im2-message-action-button-${O}`),n.$$.dirty[0]&128&&t(67,u=`itsl-im2-message-action-description-${O}`),n.$$.dirty[1]&196608|n.$$.dirty[3]&4&&t(66,f=He&&(ee||Cn&&Cn.innerText||"")),n.$$.dirty[0]&4194432|n.$$.dirty[1]&4104&&t(106,y=Yi(Ie||O,Hn,Me)),n.$$.dirty[0]&12484612|n.$$.dirty[1]&32768|n.$$.dirty[3]&8242&&(t(46,Pe=[{options:[]}]),T&&Pe[0].options.push({label:Je.edit,link:!1,value:{action:dt.edit}}),v&&!Ce&&Pe[0].options.push({label:Je.deleteMessage,link:!1,value:{action:dt.delete}}),!Ce&&!x&&!Xe&&!je&&!se&&Pe[0].options.push({label:Je.forward,link:!1,value:{action:dt.forward}}),!y&&!Ce&&!x&&(!Xe&&!je&&!se||qe)&&Pe[0].options.push({label:Je.markAsUnread,link:!1,value:{action:dt.markAsUnread}}),re.customerSettings.reportAbuseEnabled&&!We&&!Y&&!Xe&&!je&&!se&&!Ce&&!x&&!V!==On.none&&Pe[0].options.push({label:Je.reportAbuse,link:!1,value:{action:dt.reportAbuse}})),n.$$.dirty[0]&128&&t(65,d=Wr(O)),n.$$.dirty[1]&1|n.$$.dirty[3]&72&&t(64,c=di()),n.$$.dirty[0]&262144|n.$$.dirty[1]&1|n.$$.dirty[3]&64&&t(63,h=We||an||dn),n.$$.dirty[0]&4096|n.$$.dirty[1]&1&&t(62,p=ye&&an&&!re.isStaff),n.$$.dirty[0]&1048576|n.$$.dirty[3]&8&&t(61,_=zt()),n.$$.dirty[0]&27525120|n.$$.dirty[3]&2048&&t(60,k=!We&&pn&&!x&&!ii&&V===On.none&&H!==Oe.oneToOne),n.$$.dirty[0]&8388608&&t(59,g=V===On.none),n.$$.dirty[3]&8192&&(y||Ft(!1))},[M,C,v,E,N,F,L,O,j,X,ue,ke,ye,K,pe,Ce,be,Xe,We,je,se,x,Me,V,H,q,fe,Ne,Ge,Ee,gn,an,vn,cn,Ie,on,Dn,In,Sn,En,Nn,Rn,it,Hn,wn,Xn,Pe,He,Cn,G,Z,Ze,Pn,rn,tn,Mn,r,s,l,g,k,_,p,h,c,d,f,u,o,a,i,Gn,Je,ft,ii,Tt,Mt,Ai,Bi,bt,li,Ri,Ht,ai,Pi,oi,Zn,Li,Ni,ui,fi,Wt,wt,w,T,ee,ae,Y,qe,dn,_e,Fe,Un,qn,pn,kt,y,Vt,qt,Fi,Oi,Di,Ui,Hi,Wi,Xt,zi,Vi,It,ci,Kt,qi]}class Tu extends Ue{constructor(e){super(),De(this,e,s1,i1,Le,{additionalHeading:93,attachmentName:0,attachmentUrl:1,canDelete:2,canEdit:94,childDeletedPermanently:3,childMessage:4,conversationId:5,createdRelative:6,currentMessageId:7,dateForReader:8,editDraftText:95,hasAttachment:9,hasForward:10,hasReply:11,hasReport:12,hasThreadReport:96,highlightedMessageId:13,is360ReportThread:14,isAbuse:97,isChildWithParentHidden:98,isDeleted:15,isEdited:16,isForwarded:17,isMine:18,isReply:19,isReported:20,isSystem:21,lastReadInstantMessageId:22,massMessageType:23,threadType:24,matchingMessageIds:25,messageListElement:26,messageText:27,modalDialog:28,nextMessageId:29,originInstantMessageId:30,originMessageDeleted:31,originMessageText:32,originThreadDeleted:99,originThreadId:100,originThreadName:101,parentCreatedRelative:33,parentMessageId:34,posInSet:35,previousMessageId:36,reportAbuseModal:37,searchString:38,senderAvatarUrl:39,senderFullName:102,senderId:40,senderProfileUrl:103,senderName:41,setSize:42,showSender:104,sortIndex:43,timestamp:44,waitingForEditResponse:45,focus:105},null,[-1,-1,-1,-1,-1])}get focus(){return this.$$.ctx[105]}}function l1(n){let e,t,i={};return e=new _s({props:i}),n[3](e),e.$on("cancel",n[4]),e.$on("confirm",n[1]),{c(){ie(e.$$.fragment)},m(s,l){ne(e,s,l),t=!0},p(s,[l]){const a={};e.$set(a)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){n[3](null),te(e,s)}}}function a1(n,e,t){const i=Qe();let s,l;function a(f){if(!f.messageId)throw Error("Message ID property is obligatory.");l=f.messageId,s.prompt(f)}function o(){i("confirm",{messageId:l})}function r(f){le[f?"unshift":"push"](()=>{s=f,t(0,s)})}function u(f){J.call(this,n,f)}return[s,o,a,r,u]}class o1 extends Ue{constructor(e){super(),De(this,e,a1,l1,Le,{prompt:2})}get prompt(){return this.$$.ctx[2]}}function wo(n){let e,t,i;return{c(){e=B("span"),t=ge(n[5]),m(e,"id",i=n[6]+"__description"),m(e,"class","prom-radio-button__description")},m(s,l){P(s,e,l),S(e,t)},p(s,l){l&32&&Te(t,s[5]),l&64&&i!==(i=s[6]+"__description")&&m(e,"id",i)},d(s){s&&R(e)}}}function r1(n){let e,t,i,s=!1,l,a,o,r,u,f,d,c,h,p,_,y,k,g=n[5]&&wo(n);return _=Cf(n[13][0]),{c(){e=B("label"),t=B("span"),i=B("input"),o=W(),r=B("span"),r.innerHTML='<span class="prom-radio-button__custom-button-inner"></span>',u=W(),f=B("span"),d=ge(n[1]),h=W(),g&&g.c(),m(i,"type","radio"),m(i,"class","prom-radio-button__input | screen-reader"),i.disabled=n[2],i.checked=n[7],m(i,"name",n[3]),i.__value=n[4],hn(i,i.__value),m(i,"aria-labelledby",l=n[6]+"__label"),m(i,"aria-describedby",a=n[5]?`${n[6]}__description`:null),m(r,"class","prom-radio-button__custom-button"),m(f,"id",c=n[6]+"__label"),m(f,"class","prom-radio-button__label-text"),m(t,"class","prom-radio-button__control"),m(e,"id",n[6]),m(e,"class",p="prom-radio-button "+n[8]),_.p(i)},m(b,w){P(b,e,w),S(e,t),S(t,i),i.checked=i.__value===n[0],S(t,o),S(t,r),S(t,u),S(t,f),S(f,d),S(e,h),g&&g.m(e,null),y||(k=[Q(i,"change",n[12]),Q(i,"click",n[14])],y=!0)},p(b,[w]){w&4&&(i.disabled=b[2]),w&128&&(i.checked=b[7]),w&8&&m(i,"name",b[3]),w&16&&(i.__value=b[4],hn(i,i.__value),s=!0),w&64&&l!==(l=b[6]+"__label")&&m(i,"aria-labelledby",l),w&96&&a!==(a=b[5]?`${b[6]}__description`:null)&&m(i,"aria-describedby",a),(s||w&1)&&(i.checked=i.__value===b[0]),w&2&&Te(d,b[1]),w&64&&c!==(c=b[6]+"__label")&&m(f,"id",c),b[5]?g?g.p(b,w):(g=wo(b),g.c(),g.m(e,null)):g&&(g.d(1),g=null),w&64&&m(e,"id",b[6]),w&256&&p!==(p="prom-radio-button "+b[8])&&m(e,"class",p)},i:we,o:we,d(b){b&&R(e),g&&g.d(),_.r(),y=!1,nn(k)}}}function u1(n,e,t,i){let s;return n===e?s=t?"selected-locked":"selected":s=t?"disabled":"",i&&(s+=" prom-radio-button--small"),s}function f1(n,e,t){let i,s;const l=Qe();let{label:a=void 0}=e,{id:o=""}=e,{selected:r=void 0}=e,{disabled:u=!1}=e,{name:f=void 0}=e,{value:d=void 0}=e,{description:c=void 0}=e,{small:h=!1}=e,p;const _=[[]];function y(){r=this.__value,t(0,r)}const k=()=>l("selected");return n.$$set=g=>{"label"in g&&t(1,a=g.label),"id"in g&&t(10,o=g.id),"selected"in g&&t(0,r=g.selected),"disabled"in g&&t(2,u=g.disabled),"name"in g&&t(3,f=g.name),"value"in g&&t(4,d=g.value),"description"in g&&t(5,c=g.description),"small"in g&&t(11,h=g.small)},n.$$.update=()=>{n.$$.dirty&2069&&t(8,i=u1(r,d,u,h)),n.$$.dirty&17&&t(7,s=d===r),n.$$.dirty&1024&&(!o||typeof o!="string"?console.warn("Id must be supplied"):t(6,p=o)),n.$$.dirty&2&&(!a||typeof a!="string")&&console.warn("Label must be supplied"),n.$$.dirty&16&&d.length&&console.warn("Value must be supplied")},[r,a,u,f,d,c,p,s,i,l,o,h,y,_,k]}class d1 extends Ue{constructor(e){super(),De(this,e,f1,r1,Le,{label:1,id:10,selected:0,disabled:2,name:3,value:4,description:5,small:11})}}function ko(n,e,t){const i=n.slice();return i[15]=e[t],i}function To(n){let e,t,i;function s(o){n[12](o)}function l(...o){return n[13](n[15],...o)}let a={id:n[15].id,label:n[15].label,description:n[15].description,disabled:n[15].disabled,name:n[3],value:n[15].value,small:n[2]};return n[0]!==void 0&&(a.selected=n[0]),e=new d1({props:a}),le.push(()=>Re(e,"selected",s)),e.$on("selected",l),{c(){ie(e.$$.fragment)},m(o,r){ne(e,o,r),i=!0},p(o,r){n=o;const u={};r&2&&(u.id=n[15].id),r&2&&(u.label=n[15].label),r&2&&(u.description=n[15].description),r&2&&(u.disabled=n[15].disabled),r&8&&(u.name=n[3]),r&2&&(u.value=n[15].value),r&4&&(u.small=n[2]),!t&&r&1&&(t=!0,u.selected=n[0],Be(()=>t=!1)),e.$set(u)},i(o){i||(I(e.$$.fragment,o),i=!0)},o(o){A(e.$$.fragment,o),i=!1},d(o){te(e,o)}}}function c1(n){let e,t,i,s,l,a,o,r,u,f=en(n[1]),d=[];for(let h=0;h<f.length;h+=1)d[h]=To(ko(n,f,h));const c=h=>A(d[h],1,1,()=>{d[h]=null});return{c(){e=B("fieldset"),t=B("legend"),i=ge(n[5]),l=W(),a=B("span");for(let h=0;h<d.length;h+=1)d[h].c();m(t,"id",s=n[6]+"__label"),m(t,"class","prom-radio-group__label-text"),m(a,"role","radiogroup"),m(a,"aria-labelledby",o=n[6]+"__label"),m(a,"class",r="prom-radio-group__option-group "+n[4]),m(e,"id",n[6]),m(e,"class","prom-radio-group")},m(h,p){P(h,e,p),S(e,t),S(t,i),S(e,l),S(e,a);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(a,null);u=!0},p(h,[p]){if((!u||p&32)&&Te(i,h[5]),(!u||p&64&&s!==(s=h[6]+"__label"))&&m(t,"id",s),p&143){f=en(h[1]);let _;for(_=0;_<f.length;_+=1){const y=ko(h,f,_);d[_]?(d[_].p(y,p),I(d[_],1)):(d[_]=To(y),d[_].c(),I(d[_],1),d[_].m(a,null))}for(me(),_=f.length;_<d.length;_+=1)c(_);he()}(!u||p&64&&o!==(o=h[6]+"__label"))&&m(a,"aria-labelledby",o),(!u||p&16&&r!==(r="prom-radio-group__option-group "+h[4]))&&m(a,"class",r),(!u||p&64)&&m(e,"id",h[6])},i(h){if(!u){for(let p=0;p<f.length;p+=1)I(d[p]);u=!0}},o(h){d=d.filter(Boolean);for(let p=0;p<d.length;p+=1)A(d[p]);u=!1},d(h){h&&R(e),Vn(d,h)}}}function m1(n,e,t){const i=Qe();let{options:s=[]}=e,{selected:l=void 0}=e,{name:a=""}=e,{label:o=""}=e,{id:r=""}=e,{useSmallRadioButtons:u=!1}=e,{vertical:f=!1}=e,d,c="",h,p;function _(g,b){i("selected",{event:g.event,value:b.value})}function y(g){l=g,t(0,l)}const k=(g,b)=>_(b,g);return n.$$set=g=>{"options"in g&&t(1,s=g.options),"selected"in g&&t(0,l=g.selected),"name"in g&&t(8,a=g.name),"label"in g&&t(9,o=g.label),"id"in g&&t(10,r=g.id),"useSmallRadioButtons"in g&&t(2,u=g.useSmallRadioButtons),"vertical"in g&&t(11,f=g.vertical)},n.$$.update=()=>{n.$$.dirty&256&&(!a||typeof a!="string"?console.warn("Name must be supplied"):t(3,d=a)),n.$$.dirty&2048&&t(4,c=f?"column":""),n.$$.dirty&512&&(!o||typeof o!="string"?console.warn("Label must be supplied"):t(5,h=o)),n.$$.dirty&1024&&(!r||typeof r!="string"?console.warn("Id must be supplied"):t(6,p=r))},[l,s,u,d,c,h,p,_,a,o,r,f,y,k]}class h1 extends Ue{constructor(e){super(),De(this,e,m1,c1,Le,{options:1,selected:0,name:8,label:9,id:10,useSmallRadioButtons:2,vertical:11})}}function Mo(n,e,t){const i=n.slice();return i[44]=e[t],i}function yo(n){let e,t,i;return t=new ku({props:{additionalHeadingText:n[4].additionalHeadingText,attachmentName:n[4].attachmentName,attachmentUrl:n[4].attachmentUrl,bubbleId:"itsl-im2-new-message__forward-bubble",cutText:!0,customHeader:n[4].customHeader,dateForReader:n[4].dateForReader,hideTimestamp:!0,isDeleted:n[4].isDeleted,isEdited:n[4].isEdited,isForwarded:!0,isMine:n[4].isMine,isSystem:n[4].isSystem,messageText:n[4].messageText,senderName:n[4].senderName,stretch:!0,timestamp:n[4].timestamp}}),{c(){e=B("div"),ie(t.$$.fragment),m(e,"class","itsl-im2-send-input__shared-bubble-wrapper")},m(s,l){P(s,e,l),ne(t,e,null),i=!0},p(s,l){const a={};l[0]&16&&(a.additionalHeadingText=s[4].additionalHeadingText),l[0]&16&&(a.attachmentName=s[4].attachmentName),l[0]&16&&(a.attachmentUrl=s[4].attachmentUrl),l[0]&16&&(a.customHeader=s[4].customHeader),l[0]&16&&(a.dateForReader=s[4].dateForReader),l[0]&16&&(a.isDeleted=s[4].isDeleted),l[0]&16&&(a.isEdited=s[4].isEdited),l[0]&16&&(a.isMine=s[4].isMine),l[0]&16&&(a.isSystem=s[4].isSystem),l[0]&16&&(a.messageText=s[4].messageText),l[0]&16&&(a.senderName=s[4].senderName),l[0]&16&&(a.timestamp=s[4].timestamp),t.$set(a)},i(s){i||(I(t.$$.fragment,s),i=!0)},o(s){A(t.$$.fragment,s),i=!1},d(s){s&&R(e),te(t)}}}function Io(n){let e,t,i,s,l;return t=new Bn({props:{ariaLabel:n[12].attachFilesToMessage,htmlType:"button",iconClass:"itsl-im2-send-input__file-upload-button__icon",iconOnly:!0,id:n[11],large:!0,type:"plain"}}),t.$on("click",n[19]),t.$on("keydown",n[15]),{c(){e=B("div"),ie(t.$$.fragment),i=W(),s=B("div"),s.hidden=!0,m(e,"class","itsl-im2-send-input__file-upload-button__container")},m(a,o){P(a,e,o),ne(t,e,null),S(e,i),S(e,s),n[30](s),l=!0},p:we,i(a){l||(I(t.$$.fragment,a),l=!0)},o(a){A(t.$$.fragment,a),l=!1},d(a){a&&R(e),te(t),n[30](null)}}}function Co(n){let e,t,i,s,l=en(n[8]),a=[];for(let r=0;r<l.length;r+=1)a[r]=vo(Mo(n,l,r));const o=r=>A(a[r],1,1,()=>{a[r]=null});return{c(){e=B("div");for(let r=0;r<a.length;r+=1)a[r].c();m(e,"class","itsl-im2-send-input__attachment-container")},m(r,u){P(r,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);n[33](e),t=!0,i||(s=Q(e,"keydown",n[17]),i=!0)},p(r,u){if(u[0]&1052932){l=en(r[8]);let f;for(f=0;f<l.length;f+=1){const d=Mo(r,l,f);a[f]?(a[f].p(d,u),I(a[f],1)):(a[f]=vo(d),a[f].c(),I(a[f],1),a[f].m(e,null))}for(me(),f=l.length;f<a.length;f+=1)o(f);he()}},i(r){if(!t){for(let u=0;u<l.length;u+=1)I(a[u]);t=!0}},o(r){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)A(a[u]);t=!1},d(r){r&&R(e),Vn(a,r),n[33](null),i=!1,s()}}}function vo(n){let e,t;return e=new bu({props:{closeLabel:n[12].close,error:n[44].errorMessage,inProgress:n[2],name:n[44].file.name,showClose:!n[2]}}),e.$on("close",function(){ei(n[20](n[44]))&&n[20](n[44]).apply(this,arguments)}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){n=i;const l={};s[0]&256&&(l.error=n[44].errorMessage),s[0]&4&&(l.inProgress=n[2]),s[0]&256&&(l.name=n[44].file.name),s[0]&4&&(l.showClose=!n[2]),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function g1(n){let e,t,i,s,l,a,o,r,u,f,d,c,h=n[6]&&yo(n),p=n[5]&&Io(n);function _(g){n[31](g)}let y={cols:null,disabled:n[2]&&n[1],id:n[14],label:n[12].messageTextAreaLabel,labelHidden:!0,maxlength:null,minlength:null,placeholder:n[3],rows:null,type:"area"};n[0]!==void 0&&(y.value=n[0]),l=new $s({props:y}),le.push(()=>Re(l,"value",_)),u=new Bn({props:{ariaLabel:n[12].send,htmlType:"button",iconClass:"itsl-im2-send-input__send-button-icon",iconOnly:!0,id:n[13],large:!0,type:"primary"}}),u.$on("click",n[18]),u.$on("keydown",n[16]);let k=n[8].length>0&&Co(n);return{c(){e=B("div"),h&&h.c(),t=W(),p&&p.c(),i=W(),s=B("div"),ie(l.$$.fragment),o=W(),r=B("div"),ie(u.$$.fragment),f=W(),k&&k.c(),d=Ye(),m(s,"class","itsl-im2-send-input__textfield__placeholder"),m(r,"class","itsl-im2-send-input__send-button"),m(e,"class","itsl-im2-send-input__container")},m(g,b){P(g,e,b),h&&h.m(e,null),S(e,t),p&&p.m(e,null),S(e,i),S(e,s),ne(l,s,null),n[32](s),S(e,o),S(e,r),ne(u,r,null),P(g,f,b),k&&k.m(g,b),P(g,d,b),c=!0},p(g,b){g[6]?h?(h.p(g,b),b[0]&64&&I(h,1)):(h=yo(g),h.c(),I(h,1),h.m(e,t)):h&&(me(),A(h,1,1,()=>{h=null}),he()),g[5]?p?(p.p(g,b),b[0]&32&&I(p,1)):(p=Io(g),p.c(),I(p,1),p.m(e,i)):p&&(me(),A(p,1,1,()=>{p=null}),he());const w={};b[0]&6&&(w.disabled=g[2]&&g[1]),b[0]&8&&(w.placeholder=g[3]),!a&&b[0]&1&&(a=!0,w.value=g[0],Be(()=>a=!1)),l.$set(w),g[8].length>0?k?(k.p(g,b),b[0]&256&&I(k,1)):(k=Co(g),k.c(),I(k,1),k.m(d.parentNode,d)):k&&(me(),A(k,1,1,()=>{k=null}),he())},i(g){c||(I(h),I(p),I(l.$$.fragment,g),I(u.$$.fragment,g),I(k),c=!0)},o(g){A(h),A(p),A(l.$$.fragment,g),A(u.$$.fragment,g),A(k),c=!1},d(g){g&&(R(e),R(f),R(d)),h&&h.d(),p&&p.d(),te(l),n[32](null),te(u),k&&k.d(g)}}}function So(n){const e=n.getElementsByTagName("button");return e[e.length-1]}function _1(n,e,t){let{disableTextAreaWhenMessageIsBeingSent:i=!1}=e,{handleFocusBackwardManually:s}=e,{hasFileValidationErrors:l=!1}=e,{idPrefix:a="send-input"}=e,{inputText:o}=e,{isMessageBeingSent:r=!1}=e,{placeholder:u=""}=e,{sharedMessageData:f}=e,{showFileUpload:d}=e,{showForwardBubble:c}=e;const h=Qe(),p=`itsl-im2-${a}__file-upload-button`,_=re.i18n,y=`itsl-im2-${a}__send-button`,k=`itsl-im2-${a}__text-field`;let g,b=[],w,M,C;nt(()=>v());function v(){M&&(C=M.querySelector(`#${k} textarea`),C.addEventListener("keydown",ue),C.addEventListener("input",Ce)),N()}function T({focusTarget:x=Tn.first}={}){x===Tn.last?b.length>0?So(g).focus():ee():d?document.getElementById(p).focus():E()}function E(){C.focus()}async function N(){C&&(await ln(),C.style.height=0,C.style.height=`${C.scrollHeight+4}px`)}function F(){return b.map(x=>x.file)}async function L(x){var V;const Me=F();if(Me.length>0){let H;try{H=await Xf(Me)}catch(q){switch((V=q==null?void 0:q.response)==null?void 0:V.status){case Pt.badRequest:{await q.response.text()===re.constants.errorResponseMessages.fileIsTooLarge?be(Se.genericErrorMessage,_.errorFileSizeIsTooBig):be(Se.genericErrorMessage);break}default:rt(h,q)}return}finally{j()}if(H.length)return await qf(x,H.map(q=>q.m_Item1))}}function O({displaySummary:x=!1}={}){let Me=0;Js(h);for(const q of b){const fe=q.file;q.isValid=!0,fe.size>re.constants.instantMessageMaxAttachmentFileSize&&(q.isValid=!1,q.errorMessage=_.errorFileSizeIsTooBig);for(const Ge of re.constants.illegalFileNameCharacters)if(fe.name.includes(Ge)){q.isValid=!1,q.errorMessage=_.errorAttachmentFailedToUpload;break}const Ne=fe.name.slice(fe.name.lastIndexOf(".")+1).toLowerCase();re.constants.illegalFileExtensions.includes(Ne)&&(q.isValid=!1,q.errorMessage=$(_.errorAttachmentInvalidFileType,`.${Ne}`)),Me+=fe.size}const V=b.length>1&&Me>re.constants.instantMessageMaxAttachmentFileSize,H=b.reduce((q,fe)=>fe.isValid?q:q+1,0);t(21,l=V||H>0),V?be(Se.errorAttachmentsExceedCombinedMaximumAllowedFileSize,$(_.errorAttachmentsExceedCombinedMaximumAllowedFileSize,re.constants.instantMessageMaxAttachmentFileSize/(1024*1024))):x&&H>0&&(H===1?be(Se.errorWithSomeIndividualAttachment,_.errorAttachmentHasErrors):H>1&&be(Se.errorWithSomeIndividualAttachment,$(_.errorAttachmentsHaveErrors,H)))}function j(){t(8,b=[]),w&&w.replaceChildren()}function ee(){document.getElementById(y).focus()}function X(x){const Me=Ke(x.key);Me==="PageUp"&&s?(h("focusBackward",{}),x.preventDefault()):Me===ce.TAB&&x.shiftKey&&!c&&s&&(h("focusBackward",{}),x.preventDefault())}function ue(x){const Me=Ke(x.key);Me==="PageDown"?(ee(),x.preventDefault()):(x.ctrlKey||x.metaKey)&&Me===ce.ENTER?(ae(x),x.preventDefault()):Me==="PageUp"&&s?(h("focusBackward",{}),x.preventDefault()):Me===ce.TAB&&x.shiftKey&&!d&&!c&&s&&(h("focusBackward",{}),x.preventDefault())}function ke(x){Ke(x.key)===ce.TAB&&!x.shiftKey&&b.length===0&&(h("focusForward",{}),x.preventDefault())}function ye(x){Ke(x.key)===ce.TAB&&!x.shiftKey&&So(x.currentTarget)===x.target&&(h("focusForward",{}),x.preventDefault(),x.stopPropagation())}function ae(x){r||h("send",x)}function K(){if(r)return;const x=document.createElement("input");x.type="file",x.hidden=!0,x.multiple=!0,w.appendChild(x),x.addEventListener("change",Y),x.click()}function pe(x){t(8,b=x),O()}function Y(x){pe(b.concat([...x.target.files].map(Me=>({file:Me,isValid:!0,errorMessage:""}))))}function qe(x){const Me=b.findIndex(V=>V.file===x.file);Me>-1&&(b.splice(Me,1),pe(b))}function Ce(x){h("textAreaInput",x)}function be(x,Me){h("raiseError",{errorType:x,errorText:Me})}function Xe(x){le[x?"unshift":"push"](()=>{w=x,t(9,w)})}function We(x){o=x,t(0,o)}function je(x){le[x?"unshift":"push"](()=>{M=x,t(10,M)})}function se(x){le[x?"unshift":"push"](()=>{g=x,t(7,g)})}return n.$$set=x=>{"disableTextAreaWhenMessageIsBeingSent"in x&&t(1,i=x.disableTextAreaWhenMessageIsBeingSent),"handleFocusBackwardManually"in x&&t(22,s=x.handleFocusBackwardManually),"hasFileValidationErrors"in x&&t(21,l=x.hasFileValidationErrors),"idPrefix"in x&&t(23,a=x.idPrefix),"inputText"in x&&t(0,o=x.inputText),"isMessageBeingSent"in x&&t(2,r=x.isMessageBeingSent),"placeholder"in x&&t(3,u=x.placeholder),"sharedMessageData"in x&&t(4,f=x.sharedMessageData),"showFileUpload"in x&&t(5,d=x.showFileUpload),"showForwardBubble"in x&&t(6,c=x.showForwardBubble)},n.$$.update=()=>{n.$$.dirty[0]&1&&N()},[o,i,r,u,f,d,c,g,b,w,M,p,_,y,k,X,ke,ye,ae,K,qe,l,s,a,T,E,N,F,L,O,Xe,We,je,se]}class Mu extends Ue{constructor(e){super(),De(this,e,_1,g1,Le,{disableTextAreaWhenMessageIsBeingSent:1,handleFocusBackwardManually:22,hasFileValidationErrors:21,idPrefix:23,inputText:0,isMessageBeingSent:2,placeholder:3,sharedMessageData:4,showFileUpload:5,showForwardBubble:6,focus:24,focusTextArea:25,recalcTextareaSize:26,getPendingAttachments:27,uploadAttachments:28,validateUploadedFiles:29},null,[-1,-1])}get focus(){return this.$$.ctx[24]}get focusTextArea(){return this.$$.ctx[25]}get recalcTextareaSize(){return this.$$.ctx[26]}get getPendingAttachments(){return this.$$.ctx[27]}get uploadAttachments(){return this.$$.ctx[28]}get validateUploadedFiles(){return this.$$.ctx[29]}}function Eo(n){let e,t,i;function s(a){n[24](a)}let l={id:"itsl-im2__individual-message-options",name:"itsl-im2__individual-message-options-name",label:n[10].messagesIndividualMessageOptions,useSmallRadioButtons:!0,options:n[3],vertical:!0};return n[4]!==void 0&&(l.selected=n[4]),e=new h1({props:l}),le.push(()=>Re(e,"selected",s)),{c(){ie(e.$$.fragment)},m(a,o){ne(e,a,o),i=!0},p(a,o){const r={};o[0]&8&&(r.options=a[3]),!t&&o[0]&16&&(t=!0,r.selected=a[4],Be(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){A(e.$$.fragment,a),i=!1},d(a){te(e,a)}}}function b1(n){let e,t=$(Ve(n[10].useMassMessagingToMessageMultipleUsers),`<a href="${re.urls.massMessages}">`,"</a>")+"";return{c(){e=B("p")},m(i,s){P(i,e,s),e.innerHTML=t},p:we,d(i){i&&R(e)}}}function p1(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g;t=new Bn({props:{ariaLabel:n[10].backTooltip,htmlType:"button",iconClass:"itsl-im2-shared__back-button",iconOnly:!0,large:!0,type:"plain",id:yu}}),t.$on("click",n[22]),t.$on("keydown",n[15]);function b(F){n[23](F)}let w={i18n:n[12],dataProvider:n[11],label:n[10].addRecipients,openPopupWithNoSearch:!1,secondLine:!0};n[0]!==void 0&&(w.selectedItems=n[0]),r=new hu({props:w}),le.push(()=>Re(r,"selectedItems",b));let M=n[5]&&Eo(n),C=re.canSendBroadcastMassMessage&&b1(n);function v(F){n[25](F)}function T(F){n[26](F)}function E(F){n[27](F)}let N={disableTextAreaWhenMessageIsBeingSent:!0,idPrefix:"new-message",placeholder:n[10].newMessageWriteAMessage,sharedMessageData:n[2],showFileUpload:n[17]()===Ii.none,showForwardBubble:n[1]===mt.forward};return n[8]!==void 0&&(N.inputText=n[8]),n[7]!==void 0&&(N.isMessageBeingSent=n[7]),n[6]!==void 0&&(N.hasFileValidationErrors=n[6]),p=new Mu({props:N}),le.push(()=>Re(p,"inputText",v)),le.push(()=>Re(p,"isMessageBeingSent",T)),le.push(()=>Re(p,"hasFileValidationErrors",E)),n[28](p),p.$on("focusForward",w1),p.$on("raiseError",n[29]),p.$on("resolveError",n[30]),p.$on("send",n[14]),{c(){e=B("header"),ie(t.$$.fragment),i=W(),s=B("h2"),s.textContent=`${n[16]()}`,l=W(),a=B("div"),o=B("div"),ie(r.$$.fragment),f=W(),M&&M.c(),d=W(),C&&C.c(),c=W(),h=B("div"),ie(p.$$.fragment),m(s,"class","itsl-im2-shared__title"),m(s,"id","itsl-im2-new-message__title"),m(e,"class","itsl-im2-shared__header--layout itsl-im2-shared__header--theme itsl-im2-shared__header--padding--default itsl-im2-shared__header--padding--narrow-left "),m(e,"aria-describedby","itsl-im2-new-message__title"),m(o,"class","itsl-im2-new-message__main"),m(a,"class","itsl-im2-new-message__content")},m(F,L){P(F,e,L),ne(t,e,null),S(e,i),S(e,s),P(F,l,L),P(F,a,L),S(a,o),ne(r,o,null),S(o,f),M&&M.m(o,null),S(o,d),C&&C.m(o,null),S(a,c),S(a,h),ne(p,h,null),g=!0},p(F,L){const O={};!u&&L[0]&1&&(u=!0,O.selectedItems=F[0],Be(()=>u=!1)),r.$set(O),F[5]?M?(M.p(F,L),L[0]&32&&I(M,1)):(M=Eo(F),M.c(),I(M,1),M.m(o,d)):M&&(me(),A(M,1,1,()=>{M=null}),he()),re.canSendBroadcastMassMessage&&C.p(F,L);const j={};L[0]&4&&(j.sharedMessageData=F[2]),L[0]&2&&(j.showForwardBubble=F[1]===mt.forward),!_&&L[0]&256&&(_=!0,j.inputText=F[8],Be(()=>_=!1)),!y&&L[0]&128&&(y=!0,j.isMessageBeingSent=F[7],Be(()=>y=!1)),!k&&L[0]&64&&(k=!0,j.hasFileValidationErrors=F[6],Be(()=>k=!1)),p.$set(j)},i(F){g||(I(t.$$.fragment,F),I(r.$$.fragment,F),I(M),I(p.$$.fragment,F),g=!0)},o(F){A(t.$$.fragment,F),A(r.$$.fragment,F),A(M),A(p.$$.fragment,F),g=!1},d(F){F&&(R(e),R(l),R(a)),te(t),te(r),M&&M.d(),C&&C.d(),n[28](null),te(p)}}}const yu="itsl-im2-new-message__back-button";function w1(){document.getElementById(yu).focus()}function k1(n,e,t){let i,s,l,a,o;yi(n,Gt,V=>t(33,o=V));let{mode:r=mt.default}=e,{newMessageExtraBanner:u}=e,{selectedRecipients:f=[]}=e,{sharedMessageData:d}=e;const c=Qe(),h=re.i18n,p=new du,_=re.constants.maxPersonsPerThread,y={noResults:h.searchNoResultsFound,loading:h.loading,placeholder:re.isStaff?h.searchForPeopleCoursesOrProjects:h.searchForPeopleOrProjects,selectedItemInFocus:h.messagesSelectedItemX,noMatchFound:h.recipientNoMatchesFound,singleMatchFound:h.messagesOneMatchFound,pluralMatchFound:h.messagesXMatchesFound},k={label:h.newMessageStartGroupConversation,id:"itsl-im2__individual-message-option-send-to-group",value:is.sendToGroupConversation},g={label:"",id:"itsl-im2__individual-message-option-individually",value:is.sendIndividually};let b=!1,w=[g,k],M=!1,C="",v=[],T=is.sendIndividually,E;function N(){X(),t(0,f=[]),t(18,u.visible=!1,u),c("backFromNewMessageView")}function F(V){return V.some(H=>(H.type===yn.course||H.type===yn.project)&&H.participantsCount>_)}function L(V){return V.reduce((H,q)=>H+(q.type===yn.person?q.participantsCount:0),0)}function O(V,H,q){return q&&H===is.sendIndividually}function j(V,H,q){return!re.isStaff||H?!1:V.some(Ne=>Ne.type===yn.course||Ne.type===yn.project)?!0:q>=2&&q<=_}function ee(){return X(),r!==mt.forward&&(!C||!C.trim())?(ke(Se.messageTextInvalid),!1):v.length===0?(ke(Se.participantsInvalid),!1):i&&f.length>=2||s>_?(ye(),!1):b?(E.validateUploadedFiles({displaySummary:!0}),c("refreshErrors"),!1):!0}function X(){Js(c),ue(Se.genericErrorMessage,Se.personNotAvailable,Se.messageTextInvalid,Se.participantsInvalid,Se.sendingMessageToMoreThanMaxPersonsPerThread)}function ue(...V){c("resolveError",{errorTypes:V})}function ke(V,H){c("raiseError",{errorType:V,errorText:H})}function ye(){ke(Se.sendingMessageToMoreThanMaxPersonsPerThread,$(h.youCannotSendMessagesToMoreThanXRecipients,_))}async function ae(){var Ge;if(!ee()||!o)return;const V={[yn.person]:[],[yn.course]:[],[yn.project]:[]};for(const Ee of v)V[Ee.type].push(Ee.id);let H;t(7,M=!0);try{H=await Lr({courseIds:V[yn.course],originInstantMessageId:d&&d.messageId||null,projectIds:V[yn.project],referencedInstantMessageType:Y(),sendAsIndividualMessages:a,text:C.trim(),toPersonIds:V[yn.person]})}catch(Ee){switch((Ge=Ee==null?void 0:Ee.response)==null?void 0:Ge.status){case Pt.badRequest:{const gn=await Ee.response.text();gn&&gn.startsWith(re.constants.errorResponseMessages.tooManyRecipientsInThread)?ye():ke(Se.genericErrorMessage);break}case Pt.forbidden:ke(Se.personNotAvailable,$(h.messagesXIsNotAvailable,v[0].label));break;default:rt(c,Ee);break}t(7,M=!1);return}const fe=await E.uploadAttachments(H.InstantMessageThreadId)||H,Ne=ki(fe);c("addOrUpdateThread",{threadData:fe}),t(0,f=[]),t(18,u.visible=!1,u),t(7,M=!1),c("openConversation",{selectedThread:Ne,forwardSuccess:r===mt.forward})}function K(V){Ke(V.key)===ce.TAB&&V.shiftKey&&(E.focus({focusTarget:Tn.last}),V.preventDefault())}function pe(){switch(r){case mt.default:return h.newMessage;case mt.forward:return h.forwardMessageHeader}}function Y(){switch(r){case mt.default:return Ii.none;case mt.forward:return Ii.shared}}const qe=()=>N();function Ce(V){f=V,t(0,f)}function be(V){T=V,t(4,T)}function Xe(V){C=V,t(8,C)}function We(V){M=V,t(7,M)}function je(V){b=V,t(6,b)}function se(V){le[V?"unshift":"push"](()=>{E=V,t(9,E)})}function x(V){J.call(this,n,V)}function Me(V){J.call(this,n,V)}return n.$$set=V=>{"mode"in V&&t(1,r=V.mode),"newMessageExtraBanner"in V&&t(18,u=V.newMessageExtraBanner),"selectedRecipients"in V&&t(0,f=V.selectedRecipients),"sharedMessageData"in V&&t(2,d=V.sharedMessageData)},n.$$.update=()=>{if(n.$$.dirty[0]&524289){let V,H;if(t(19,{hasRecipientsWithMessagesDisabled:V,recipientNamesWithMessagesDisabled:H,recipientsWithMessagesEnabled:v}=jr(f),v),V){const q=v.length;t(18,u.type=q===0?"warning":"info",u),t(18,u.text=q===0?$(h.messagesAreDisabledForX,H):q===1&&v[0].type===yn.person?$(h.messagesAreDisabledForXOneRecipientWillReceiveMessage,H):$(h.messagesAreDisabledForXOthersWillReceiveMessage,H),u)}t(18,u.visible=V,u)}n.$$.dirty[0]&1&&t(21,i=F(f)),n.$$.dirty[0]&524288&&t(20,s=L(v)),n.$$.dirty[0]&3145729&&t(5,l=j(f,i,s)),n.$$.dirty[0]&9&&(g.label=f.every(V=>V.type===yn.course)?h.newMessageSendIndividualMessageToEachCourseParticipant:h.newMessageSendIndividualMessageToEachRecipient,t(3,w),t(0,f)),n.$$.dirty[0]&49&&(a=O(f,T,l))},[f,r,d,w,T,l,b,M,C,E,h,p,y,N,ae,K,pe,Y,u,v,s,i,qe,Ce,be,Xe,We,je,se,x,Me]}class Iu extends Ue{constructor(e){super(),De(this,e,k1,p1,Le,{mode:1,newMessageExtraBanner:18,selectedRecipients:0,sharedMessageData:2},null,[-1,-1])}}function Ao(n){let e,t,i;return{c(){e=B("button"),e.innerHTML="",m(e,"type","button"),m(e,"aria-hidden","true"),m(e,"class","prom-search__clear"),m(e,"tabindex","-1")},m(s,l){P(s,e,l),t||(i=Q(e,"click",n[13]),t=!0)},p:we,d(s){s&&R(e),t=!1,i()}}}function Bo(n){let e,t;return{c(){e=B("div"),t=ge(n[10]),m(e,"class","prom-error-message")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s&1024&&Te(t,i[10])},d(i){i&&R(e)}}}function Ro(n){let e,t;return{c(){e=B("p"),t=ge(n[8]),m(e,"class","screen-reader"),m(e,"aria-live","assertive")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s&256&&Te(t,i[8])},d(i){i&&R(e)}}}function T1(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g,b=n[0]&&!n[2]&&Ao(n),w=n[4]&&n[3]&&Bo(n),M=n[9]&&Ro(n);return{c(){e=B("div"),t=B("div"),i=B("label"),s=B("span"),l=ge(n[11]),a=W(),o=B("input"),f=W(),b&&b.c(),d=W(),c=B("div"),w&&w.c(),_=W(),M&&M.c(),y=Ye(),m(s,"class","prom-search__label-text"),oe(s,"screen-reader",n[5]),m(o,"type","text"),m(o,"id",r="prom-search-"+n[1]),m(o,"class","prom-input-field__input"),m(o,"aria-describedby",u="prom-search-"+n[1]+"__error-message "+n[7]),m(o,"placeholder",n[6]),o.disabled=n[2],m(t,"class","prom-search__label-container"),m(c,"id",h="prom-search-"+n[1]+"__error-message"),m(e,"class",p="prom-search prom-input-field "+n[12])},m(C,v){P(C,e,v),S(e,t),S(t,i),S(i,s),S(s,l),S(i,a),S(i,o),hn(o,n[0]),S(t,f),b&&b.m(t,null),S(e,d),S(e,c),w&&w.m(c,null),P(C,_,v),M&&M.m(C,v),P(C,y,v),k||(g=[Q(o,"input",n[19]),Q(o,"keydown",n[15]),Q(o,"keyup",n[16]),Q(o,"focus",n[17]),Q(o,"blur",n[18])],k=!0)},p(C,[v]){v&2048&&Te(l,C[11]),v&32&&oe(s,"screen-reader",C[5]),v&2&&r!==(r="prom-search-"+C[1])&&m(o,"id",r),v&130&&u!==(u="prom-search-"+C[1]+"__error-message "+C[7])&&m(o,"aria-describedby",u),v&64&&m(o,"placeholder",C[6]),v&4&&(o.disabled=C[2]),v&1&&o.value!==C[0]&&hn(o,C[0]),C[0]&&!C[2]?b?b.p(C,v):(b=Ao(C),b.c(),b.m(t,null)):b&&(b.d(1),b=null),C[4]&&C[3]?w?w.p(C,v):(w=Bo(C),w.c(),w.m(c,null)):w&&(w.d(1),w=null),v&2&&h!==(h="prom-search-"+C[1]+"__error-message")&&m(c,"id",h),v&4096&&p!==(p="prom-search prom-input-field "+C[12])&&m(e,"class",p),C[9]?M?M.p(C,v):(M=Ro(C),M.c(),M.m(y.parentNode,y)):M&&(M.d(1),M=null)},i:we,o:we,d(C){C&&(R(e),R(_),R(y)),b&&b.d(),w&&w.d(),M&&M.d(C),k=!1,nn(g)}}}function M1(n,e,t){let i;const s=Qe();let{id:l="rnd"+Math.random().toString(36)}=e,{disabled:a=!1}=e,{errorMessage:o=""}=e,{hasError:r=!1}=e,{label:u=""}=e,{labelHidden:f=!0}=e,{placeholder:d=""}=e,{describedBy:c=""}=e,{resultText:h=""}=e,{announceResultText:p=!0}=e,{value:_=""}=e,y,k;function g(T){t(0,_=""),s("clear",T)}function b(T){J.call(this,n,T)}function w(T){J.call(this,n,T)}function M(T){J.call(this,n,T)}function C(T){J.call(this,n,T)}function v(){_=this.value,t(0,_)}return n.$$set=T=>{"id"in T&&t(1,l=T.id),"disabled"in T&&t(2,a=T.disabled),"errorMessage"in T&&t(3,o=T.errorMessage),"hasError"in T&&t(4,r=T.hasError),"label"in T&&t(14,u=T.label),"labelHidden"in T&&t(5,f=T.labelHidden),"placeholder"in T&&t(6,d=T.placeholder),"describedBy"in T&&t(7,c=T.describedBy),"resultText"in T&&t(8,h=T.resultText),"announceResultText"in T&&t(9,p=T.announceResultText),"value"in T&&t(0,_=T.value)},n.$$.update=()=>{n.$$.dirty&16&&t(12,i=r?"prom-input-field--has-error":""),n.$$.dirty&10&&((!l||typeof l!="string")&&console.warn("Id must be supplied"),t(10,y=o)),n.$$.dirty&16384&&((!u||typeof u!="string")&&console.warn("Label must be supplied"),t(11,k=u))},[_,l,a,o,r,f,d,c,h,p,y,k,i,g,u,b,w,M,C,v]}class Cu extends Ue{constructor(e){super(),De(this,e,M1,T1,Le,{id:1,disabled:2,errorMessage:3,hasError:4,label:14,labelHidden:5,placeholder:6,describedBy:7,resultText:8,announceResultText:9,value:0})}}function y1(n){let e,t,i,s,l,a,o,r,u,f;return{c(){e=B("label"),t=B("input"),i=W(),s=B("span"),s.innerHTML='<span class="prom-switch__custom-button-inner"></span>',l=W(),a=B("span"),o=ge(n[5]),m(t,"type","checkbox"),m(t,"class","prom-switch__input | screen-reader"),t.disabled=n[1],m(t,"name",n[6]),t.__value=n[3],hn(t,t.__value),m(s,"class","prom-switch__custom-button"),m(a,"class","prom-switch__label-text"),m(e,"id",n[2]),m(e,"class",r="prom-switch "+n[4])},m(d,c){P(d,e,c),S(e,t),t.checked=n[0],S(e,i),S(e,s),S(e,l),S(e,a),S(a,o),u||(f=[Q(t,"change",n[10]),Q(t,"click",n[7])],u=!0)},p(d,[c]){c&2&&(t.disabled=d[1]),c&64&&m(t,"name",d[6]),c&8&&(t.__value=d[3],hn(t,t.__value)),c&1&&(t.checked=d[0]),c&32&&Te(o,d[5]),c&4&&m(e,"id",d[2]),c&16&&r!==(r="prom-switch "+d[4])&&m(e,"class",r)},i:we,o:we,d(d){d&&R(e),u=!1,nn(f)}}}function I1(n,e,t){const i=Qe();let{checked:s=!1}=e,{disabled:l=!1}=e,{id:a=""}=e,{label:o=void 0}=e,{name:r=void 0}=e,{value:u=void 0}=e,f,d,c;function h(){i("click",{checked:s})}function p(){s=this.checked,t(0,s)}return n.$$set=_=>{"checked"in _&&t(0,s=_.checked),"disabled"in _&&t(1,l=_.disabled),"id"in _&&t(2,a=_.id),"label"in _&&t(8,o=_.label),"name"in _&&t(9,r=_.name),"value"in _&&t(3,u=_.value)},n.$$.update=()=>{if(n.$$.dirty&2&&t(4,f=l?"disabled":""),n.$$.dirty&256){if(!o||typeof o!="string")throw new TypeError("Label must be supplied");t(5,d=o)}if(n.$$.dirty&512){if(!r||typeof r!="string")throw new TypeError("Name must be supplied");t(6,c=r)}},[s,l,a,u,f,d,c,h,o,r,p]}class vu extends Ue{constructor(e){super(),De(this,e,I1,y1,Le,{checked:0,disabled:1,id:2,label:8,name:9,value:3})}}function C1(n){let e,t,i,s,l,a;return l=new Yn({props:{htmlType:"button",id:Su,large:!0,text:n[1].unblock,type:"plain"}}),l.$on("click",n[2]),l.$on("keydown",n[4]),{c(){e=B("div"),t=B("div"),i=ge(n[0]),s=W(),ie(l.$$.fragment),m(t,"class","itsl-im2-conversation__footer--placeholder--text"),m(e,"class","itsl-im2-conversation__footer--placeholder")},m(o,r){P(o,e,r),S(e,t),S(t,i),S(e,s),ne(l,e,null),a=!0},p(o,[r]){(!a||r&1)&&Te(i,o[0])},i(o){a||(I(l.$$.fragment,o),a=!0)},o(o){A(l.$$.fragment,o),a=!1},d(o){o&&R(e),te(l)}}}const Su="itsl-im2-conversation__unblock_button";function Eu(){document.getElementById(Su).focus()}function v1(n,e,t){const i=Qe(),s=re.i18n;let{inputText:l}=e;function a(){i("toggleBlockConversation",{})}function o(r){J.call(this,n,r)}return n.$$set=r=>{"inputText"in r&&t(0,l=r.inputText)},[l,s,a,Eu,o]}class S1 extends Ue{constructor(e){super(),De(this,e,v1,C1,Le,{inputText:0,focusUnblockButton:3})}get focusUnblockButton(){return Eu}}const{window:E1}=Ws;function Po(n,e,t){const i=n.slice();return i[179]=e[t],i[181]=t,i}function A1(n){let e,t,i,s,l,a,o,r,u,f,d,c,h=!n[5].some(n[106]),p,_=!n[5].includes(Se.loading),y,k,g,b,w;function M(L){n[122](L)}let C={backButtonAriaLabel:n[58](),goBack:n[74],narrowRight:n[50],$$slots:{"outside-header":[L1],"inner-header":[P1]},$$scope:{ctx:n}};n[0]!==void 0&&(C.conversationData=n[0]),o=new dc({props:C}),le.push(()=>Re(o,"conversationData",M)),n[123](o),o.$on("backButtonKeyDown",n[59]);let v=(n[18]||n[22]&&n[21]&&!n[13])&&Fo(n),T=h&&Do(n),E=_&&Uo(n),N={};k=new o1({props:N}),n[138](k),k.$on("confirm",n[139]);let F={mode:Yt.singleMessage};return b=new iu({props:F}),n[140](b),b.$on("abuseReportSent",n[85]),b.$on("raiseError",n[141]),b.$on("resolveError",n[142]),{c(){e=B("div"),e.innerHTML="",t=W(),i=B("div"),s=ge(n[55]),l=W(),a=B("div"),ie(o.$$.fragment),u=W(),v&&v.c(),f=W(),d=B("div"),c=W(),T&&T.c(),p=W(),E&&E.c(),y=W(),ie(k.$$.fragment),g=W(),ie(b.$$.fragment),m(e,"aria-atomic","true"),m(e,"aria-live","polite"),m(e,"class","screen-reader"),m(e,"role","status"),m(i,"aria-live","polite"),m(i,"class","screen-reader"),m(d,"aria-describedby",n[51]),m(d,"aria-live","polite"),m(d,"class","itsl-im2-conversation__search-results__for-reader"),m(a,"class","itsl-im2-conversation__top-area")},m(L,O){P(L,e,O),n[120](e),P(L,t,O),P(L,i,O),S(i,s),P(L,l,O),P(L,a,O),ne(o,a,null),S(a,u),v&&v.m(a,null),S(a,f),S(a,d),S(a,c),T&&T.m(a,null),P(L,p,O),E&&E.m(L,O),P(L,y,O),ne(k,L,O),P(L,g,O),ne(b,L,O),w=!0},p(L,O){(!w||O[1]&16777216)&&Te(s,L[55]);const j={};O[1]&524288&&(j.narrowRight=L[50]),O[0]&4194304|O[1]&2621440|O[5]&134217728&&(j.$$scope={dirty:O,ctx:L}),!r&&O[0]&1&&(r=!0,j.conversationData=L[0],Be(()=>r=!1)),o.$set(j),L[18]||L[22]&&L[21]&&!L[13]?v?(v.p(L,O),O[0]&6561792&&I(v,1)):(v=Fo(L),v.c(),I(v,1),v.m(a,f)):v&&(me(),A(v,1,1,()=>{v=null}),he()),(!w||O[1]&1048576)&&m(d,"aria-describedby",L[51]),O[0]&32&&(h=!L[5].some(L[106])),h?T?(T.p(L,O),O[0]&32&&I(T,1)):(T=Do(L),T.c(),I(T,1),T.m(a,null)):T&&(me(),A(T,1,1,()=>{T=null}),he()),O[0]&32&&(_=!L[5].includes(Se.loading)),_?E?(E.p(L,O),O[0]&32&&I(E,1)):(E=Uo(L),E.c(),I(E,1),E.m(y.parentNode,y)):E&&(me(),A(E,1,1,()=>{E=null}),he());const ee={};k.$set(ee);const X={};b.$set(X)},i(L){w||(I(o.$$.fragment,L),I(v),I(T),I(E),I(k.$$.fragment,L),I(b.$$.fragment,L),w=!0)},o(L){A(o.$$.fragment,L),A(v),A(T),A(E),A(k.$$.fragment,L),A(b.$$.fragment,L),w=!1},d(L){L&&(R(e),R(t),R(i),R(l),R(a),R(p),R(y),R(g)),n[120](null),n[123](null),te(o),v&&v.d(),T&&T.d(),E&&E.d(L),n[138](null),te(k,L),n[140](null),te(b,L)}}}function B1(n){let e,t,i;function s(a){n[115](a)}let l={mode:n[40],sharedMessageData:n[39]};return n[4]!==void 0&&(l.newMessageExtraBanner=n[4]),e=new Iu({props:l}),le.push(()=>Re(e,"newMessageExtraBanner",s)),e.$on("addOrUpdateThread",n[116]),e.$on("backFromNewMessageView",n[80]),e.$on("openConversation",n[86]),e.$on("raiseError",n[117]),e.$on("refreshErrors",n[118]),e.$on("resolveError",n[119]),{c(){ie(e.$$.fragment)},m(a,o){ne(e,a,o),i=!0},p(a,o){const r={};o[1]&512&&(r.mode=a[40]),o[1]&256&&(r.sharedMessageData=a[39]),!t&&o[0]&16&&(t=!0,r.newMessageExtraBanner=a[4],Be(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){A(e.$$.fragment,a),i=!1},d(a){te(e,a)}}}function R1(n){let e,t,i;function s(a){n[108](a)}let l={};return n[0]!==void 0&&(l.conversationData=n[0]),e=new oh({props:l}),le.push(()=>Re(e,"conversationData",s)),e.$on("abuseReportSent",n[85]),e.$on("backToConversation",n[80]),e.$on("backToConversationList",n[109]),e.$on("deleteThread",n[110]),e.$on("markAsUnread",n[84]),e.$on("raiseError",n[111]),e.$on("showBannerOnConversationList",n[112]),e.$on("toggleBlockConversation",n[113]),e.$on("toggleCloseConversation",n[114]),{c(){ie(e.$$.fragment)},m(a,o){ne(e,a,o),i=!0},p(a,o){const r={};!t&&o[0]&1&&(t=!0,r.conversationData=a[0],Be(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){A(e.$$.fragment,a),i=!1},d(a){te(e,a)}}}function Lo(n){let e,t;return e=new Bn({props:{ariaLabel:n[56].optionsTooltip,htmlType:"button",iconClass:"itsl-im2-conversation__options-button",iconOnly:!0,large:!0,type:"plain"}}),e.$on("click",n[75]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p:we,i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function P1(n){let e,t,i=n[50]&&Lo(n);return{c(){i&&i.c(),e=Ye()},m(s,l){i&&i.m(s,l),P(s,e,l),t=!0},p(s,l){s[50]?i?(i.p(s,l),l[1]&524288&&I(i,1)):(i=Lo(s),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(me(),A(i,1,1,()=>{i=null}),he())},i(s){t||(I(i),t=!0)},o(s){A(i),t=!1},d(s){s&&R(e),i&&i.d(s)}}}function No(n){let e,t,i;return t=new Cu({props:{label:n[56].searchForMessages,placeholder:n[56].searchCurrentConversation,resultText:n[52]}}),t.$on("clear",n[121]),t.$on("keydown",Ur),t.$on("keyup",n[87]),{c(){e=B("div"),ie(t.$$.fragment),m(e,"class","itsl-im2-shared__header--padding--default")},m(s,l){P(s,e,l),ne(t,e,null),i=!0},p(s,l){const a={};l[1]&2097152&&(a.resultText=s[52]),t.$set(a)},i(s){i||(I(t.$$.fragment,s),i=!0)},o(s){A(t.$$.fragment,s),i=!1},d(s){s&&R(e),te(t)}}}function L1(n){let e,t,i=n[22]&&No(n);return{c(){i&&i.c(),e=Ye()},m(s,l){i&&i.m(s,l),P(s,e,l),t=!0},p(s,l){s[22]?i?(i.p(s,l),l[0]&4194304&&I(i,1)):(i=No(s),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(me(),A(i,1,1,()=>{i=null}),he())},i(s){t||(I(i),t=!0)},o(s){A(i),t=!1},d(s){s&&R(e),i&&i.d(s)}}}function Fo(n){let e,t,i=(n[20]===0?kn(n[56].noResultsFoundForX,n[1]):_l(n[1],n[8],n[7],n[6]))+"",s,l,a,o,r,u,f;const d=[F1,N1],c=[];function h(p,_){return p[20]===1?0:p[20]>1?1:-1}return~(a=h(n))&&(o=c[a]=d[a](n)),u=new Bn({props:{ariaLabel:n[56].exitSearch,htmlType:"button",iconClass:"itsl-im2-conversation__search-results__exit-search-mode__icon",iconOnly:!0,type:"plain"}}),u.$on("click",n[91]),{c(){e=B("div"),t=B("div"),s=W(),l=B("div"),o&&o.c(),r=W(),ie(u.$$.fragment),m(t,"class","itsl-im2-conversation__search-results__summary"),m(l,"class","itsl-im2-conversation__search-results__right"),m(e,"class","itsl-im2-conversation__search-results itsl-im2-shared__header--padding--default itsl-im2-shared__header--padding--narrow-right ")},m(p,_){P(p,e,_),S(e,t),t.innerHTML=i,S(e,s),S(e,l),~a&&c[a].m(l,null),S(l,r),ne(u,l,null),f=!0},p(p,_){(!f||_[0]&1049026)&&i!==(i=(p[20]===0?kn(p[56].noResultsFoundForX,p[1]):_l(p[1],p[8],p[7],p[6]))+"")&&(t.innerHTML=i);let y=a;a=h(p),a===y?~a&&c[a].p(p,_):(o&&(me(),A(c[y],1,1,()=>{c[y]=null}),he()),~a?(o=c[a],o?o.p(p,_):(o=c[a]=d[a](p),o.c()),I(o,1),o.m(l,r)):o=null)},i(p){f||(I(o),I(u.$$.fragment,p),f=!0)},o(p){A(o),A(u.$$.fragment,p),f=!1},d(p){p&&R(e),~a&&c[a].d(),te(u)}}}function N1(n){let e,t,i,s,l,a=kn(n[56].searchXOfY,n[9],n[20])+"",o,r,u=(n[12]?"":$(n[56].searchXOfYResults,n[9],n[20]))+"",f,d,c,h;e=new Bn({props:{ariaLabel:n[56].previousResult,htmlType:"button",iconClass:"itsl-im2-conversation__search-results__previous-result-button__icon",iconOnly:!0,type:"plain"}}),e.$on("click",n[89]);let p=n[12]&&Oo(n);return c=new Bn({props:{ariaLabel:n[56].nextResult,htmlType:"button",iconClass:"itsl-im2-conversation__search-results__next-result-button__icon",iconOnly:!0,type:"plain"}}),c.$on("click",n[90]),{c(){ie(e.$$.fragment),t=W(),i=B("div"),p&&p.c(),s=W(),l=B("div"),o=W(),r=B("div"),f=ge(u),d=W(),ie(c.$$.fragment),m(l,"aria-hidden","true"),oe(l,"itsl-im2-conversation__search-results__number-of-results--loading",n[12]),m(i,"class","itsl-im2-conversation__search-results__number-of-results__container"),m(r,"aria-live","polite"),m(r,"class","itsl-im2-conversation__search-results__for-reader")},m(_,y){ne(e,_,y),P(_,t,y),P(_,i,y),p&&p.m(i,null),S(i,s),S(i,l),l.innerHTML=a,P(_,o,y),P(_,r,y),S(r,f),P(_,d,y),ne(c,_,y),h=!0},p(_,y){_[12]?p?p.p(_,y):(p=Oo(_),p.c(),p.m(i,s)):p&&(p.d(1),p=null),(!h||y[0]&1049088)&&a!==(a=kn(_[56].searchXOfY,_[9],_[20])+"")&&(l.innerHTML=a),(!h||y[0]&4096)&&oe(l,"itsl-im2-conversation__search-results__number-of-results--loading",_[12]),(!h||y[0]&1053184)&&u!==(u=(_[12]?"":$(_[56].searchXOfYResults,_[9],_[20]))+"")&&Te(f,u)},i(_){h||(I(e.$$.fragment,_),I(c.$$.fragment,_),h=!0)},o(_){A(e.$$.fragment,_),A(c.$$.fragment,_),h=!1},d(_){_&&(R(t),R(i),R(o),R(r),R(d)),te(e,_),p&&p.d(),te(c,_)}}}function F1(n){let e;function t(l,a){return l[12]?D1:O1}let i=t(n),s=i(n);return{c(){s.c(),e=Ye()},m(l,a){s.m(l,a),P(l,e,a)},p(l,a){i===(i=t(l))&&s?s.p(l,a):(s.d(1),s=i(l),s&&(s.c(),s.m(e.parentNode,e)))},i:we,o:we,d(l){l&&R(e),s.d(l)}}}function Oo(n){let e,t;return{c(){e=B("div"),t=B("div"),m(t,"aria-label",n[56].loadingSearchResults),m(t,"class","itsl-im2-conversation__search-results__loading__spinner"),m(t,"role","progressbar"),m(e,"class","itsl-im2-conversation__search-results__loading__container")},m(i,s){P(i,e,s),S(e,t)},p:we,d(i){i&&R(e)}}}function O1(n){let e;return{c(){e=B("b"),e.textContent=`${n[56].oneResult}`},m(t,i){P(t,e,i)},p:we,d(t){t&&R(e)}}}function D1(n){let e;return{c(){e=B("div"),m(e,"aria-label",n[56].loadingSearchResults),m(e,"class","itsl-im2-conversation__search-results__loading__spinner"),m(e,"role","progressbar")},m(t,i){P(t,e,i)},p:we,d(t){t&&R(e)}}}function Do(n){let e,t,i;function s(a){n[124](a)}let l={id:bi,name:"itsl-im2-conversation__auto-loading-toggle",label:n[56].automaticallyLoadMessages};return n[31]!==void 0&&(l.checked=n[31]),e=new vu({props:l}),le.push(()=>Re(e,"checked",s)),e.$on("click",n[62]),{c(){ie(e.$$.fragment)},m(a,o){ne(e,a,o),i=!0},p(a,o){const r={};!t&&o[1]&1&&(t=!0,r.checked=a[31],Be(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){A(e.$$.fragment,a),i=!1},d(a){te(e,a)}}}function Uo(n){let e,t,i,s,l,a;const o=[H1,U1],r=[];function u(d,c){return d[35]||d[13]?0:d[15].length===0?1:-1}~(i=u(n))&&(s=r[i]=o[i](n));let f=!n[35]&&!n[13]&&Ho(n);return{c(){e=B("div"),t=B("div"),s&&s.c(),l=W(),f&&f.c(),m(t,"class","itsl-im2-conversation__state_wrapper"),m(e,"class","itsl-im2-conversation__content")},m(d,c){P(d,e,c),S(e,t),~i&&r[i].m(t,null),S(e,l),f&&f.m(e,null),a=!0},p(d,c){let h=i;i=u(d),i===h?~i&&r[i].p(d,c):(s&&(me(),A(r[h],1,1,()=>{r[h]=null}),he()),~i?(s=r[i],s?s.p(d,c):(s=r[i]=o[i](d),s.c()),I(s,1),s.m(t,null)):s=null),!d[35]&&!d[13]?f?(f.p(d,c),c[0]&8192|c[1]&16&&I(f,1)):(f=Ho(d),f.c(),I(f,1),f.m(e,null)):f&&(me(),A(f,1,1,()=>{f=null}),he())},i(d){a||(I(s),I(f),a=!0)},o(d){A(s),A(f),a=!1},d(d){d&&R(e),~i&&r[i].d(),f&&f.d()}}}function U1(n){let e,t;return e=new gu({props:{iconName:"messages",title:n[56].noMessagesYet,description:n[53].emptyStateDescription,headingLevel:"h3"}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[1]&4194304&&(l.description=i[53].emptyStateDescription),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function H1(n){let e,t;return e=new ns({props:{text:n[13]?n[56].loadingSearchResults:n[56].loading}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s[0]&8192&&(l.text=i[13]?i[56].loadingSearchResults:i[56].loading),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Ho(n){let e,t,i,s,l,a,o,r=n[15].length>0&&Wo(n);const u=[j1,K1,X1,q1,V1],f=[];function d(c,h){return h[0]&1&&(t=null),h[0]&1&&(i=null),c[46]?0:(t==null&&(t=!!ds(c[0])),t?1:(i==null&&(i=!!Qr(c[0])),i?2:c[0].isBlocked?3:c[0].is360ReportThread?4:-1))}return~(s=d(n,[-1,-1,-1,-1,-1,-1]))&&(l=f[s]=u[s](n)),{c(){r&&r.c(),e=W(),l&&l.c(),a=Ye()},m(c,h){r&&r.m(c,h),P(c,e,h),~s&&f[s].m(c,h),P(c,a,h),o=!0},p(c,h){c[15].length>0?r?(r.p(c,h),h[0]&32768&&I(r,1)):(r=Wo(c),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(me(),A(r,1,1,()=>{r=null}),he());let p=s;s=d(c,h),s===p?~s&&f[s].p(c,h):(l&&(me(),A(f[p],1,1,()=>{f[p]=null}),he()),~s?(l=f[s],l?l.p(c,h):(l=f[s]=u[s](c),l.c()),I(l,1),l.m(a.parentNode,a)):l=null)},i(c){o||(I(r),I(l),o=!0)},o(c){A(r),A(l),o=!1},d(c){c&&(R(e),R(a)),r&&r.d(c),~s&&f[s].d(c)}}}function Wo(n){let e,t,i,s=[],l=new Map,a,o,r,u,f,d,c,h,p,_=en(n[15]);const y=C=>C[179].MessageId;for(let C=0;C<_.length;C+=1){let v=Po(n,_,C),T=y(v);l.set(T,s[C]=qo(T,v))}const k=[z1,W1],g=[];function b(C,v){var T;return C[29]?0:C[53].startText&&((T=C[0])==null?void 0:T.massMessageType)===On.none?1:-1}~(o=b(n))&&(r=g[o]=k[o](n));let w={listElement:n[37],hasMore:n[29]&&n[31]&&!n[32],reverseScroll:!0};f=new _u({props:w}),n[127](f),f.$on("loadMore",n[61]);let M=!n[11]&&jo(n);return{c(){e=B("div"),t=B("div"),i=B("div");for(let C=0;C<s.length;C+=1)s[C].c();a=W(),r&&r.c(),u=W(),ie(f.$$.fragment),d=W(),M&&M.c(),m(i,"class","itsl-im2-conversation__message-list"),m(i,"role","feed"),m(t,"class","itsl-im2-conversation__messages"),m(t,"id",G1),m(t,"tabindex","-1"),m(e,"class","itsl-im2-conversation__messages-wrapper")},m(C,v){P(C,e,v),S(e,t),S(t,i);for(let T=0;T<s.length;T+=1)s[T]&&s[T].m(i,null);S(t,a),~o&&g[o].m(t,null),S(t,u),ne(f,t,null),n[128](t),S(e,d),M&&M.m(e,null),c=!0,h||(p=Q(t,"scroll",function(){ei(n[27])&&n[27].apply(this,arguments)}),h=!0)},p(C,v){n=C,v[0]&587317251|v[1]&100747456|v[2]&6488332|v[3]&6&&(_=en(n[15]),me(),s=Lf(s,v,y,1,n,_,l,i,Pf,qo,null,Po),he());let T=o;o=b(n),o===T?~o&&g[o].p(n,v):(r&&(me(),A(g[T],1,1,()=>{g[T]=null}),he()),~o?(r=g[o],r?r.p(n,v):(r=g[o]=k[o](n),r.c()),I(r,1),r.m(t,u)):r=null);const E={};v[1]&64&&(E.listElement=n[37]),v[0]&536870912|v[1]&3&&(E.hasMore=n[29]&&n[31]&&!n[32]),f.$set(E),n[11]?M&&(me(),A(M,1,1,()=>{M=null}),he()):M?(M.p(n,v),v[0]&2048&&I(M,1)):(M=jo(n),M.c(),I(M,1),M.m(e,null))},i(C){if(!c){for(let v=0;v<_.length;v+=1)I(s[v]);I(r),I(f.$$.fragment,C),I(M),c=!0}},o(C){for(let v=0;v<s.length;v+=1)A(s[v]);A(r),A(f.$$.fragment,C),A(M),c=!1},d(C){C&&R(e);for(let v=0;v<s.length;v+=1)s[v].d();~o&&g[o].d(),n[127](null),te(f),n[128](null),M&&M.d(),h=!1,p()}}}function zo(n){let e;return{c(){e=B("div"),e.textContent=`${n[56].newMessages}`,m(e,"class","itsl-im2-conversation__message-list__new-messages-divider")},m(t,i){P(t,e,i)},p:we,d(t){t&&R(e)}}}function Vo(n){let e,t=n[179].CreatedLocalDateStamp+"",i;return{c(){e=B("div"),i=ge(t),m(e,"aria-hidden","true"),m(e,"class","itsl-im2-conversation__datestamp")},m(s,l){P(s,e,l),S(e,i)},p(s,l){l[0]&32768&&t!==(t=s[179].CreatedLocalDateStamp+"")&&Te(i,t)},d(s){s&&R(e)}}}function qo(n,e){var d,c,h,p,_,y;let t,i,s,l,a=Zo(new Date(e[179].CreatedLocal),e[179].prevMessageCreatedLocal?new Date(e[179].prevMessageCreatedLocal):null),o,r;i=new Tu({props:{attachmentName:e[179].AttachmentName,attachmentUrl:e[179].AttachmentUrl,canDelete:e[179].CanDelete,canEdit:e[179].CanEdit,childMessage:e[179].ChildMessage,childDeletedPermanently:e[179].IsChildMessageDeletedPermanently,conversationId:e[0].id,reportAbuseModal:e[42],createdRelative:e[179].CreatedRelative,currentMessageId:e[179].MessageId,dateForReader:e[179].CreatedLocalDateStamp,editDraftText:e[25]&&e[25].messageId===e[179].MessageId?e[25].text:null,hasAttachment:!!e[179].AttachmentName,hasForward:e[179].HasShared,hasReport:e[179].HasAbuseReported,hasReply:e[179].HasRepliedTo,hasThreadReport:e[179].HasAbuseThreadReported,highlightedMessageId:e[16],is360ReportThread:e[0].is360ReportThread,isAbuse:e[179].IsAbuse,isDeleted:e[179].IsDeleted,isEdited:e[179].IsEdited&&!e[179].IsDeleted,isMine:e[179].CreatedBy===re.personId,isSystem:e[179].IsSystemMessage,lastReadInstantMessageId:e[0].lastReadInstantMessageId,massMessageType:e[0].massMessageType,threadType:e[0].type,matchingMessageIds:e[14],messageListElement:e[37],messageText:e[179].Text,modalDialog:e[38],nextMessageId:e[179].nextMessageId,originInstantMessageId:(c=(d=e[179])==null?void 0:d.OriginInstantMessage)==null?void 0:c.MessageId,originThreadDeleted:!!e[179].OriginInstantMessageThreadDeletedBy,originThreadId:e[179].OriginInstantMessageThreadId,originThreadName:e[179].OriginInstantMessageThreadName,originMessageDeleted:(p=(h=e[179])==null?void 0:h.OriginInstantMessage)==null?void 0:p.IsDeleted,originMessageText:(y=(_=e[179])==null?void 0:_.OriginInstantMessage)==null?void 0:y.Text,posInSet:e[29]?e[15].length-e[181]:null,previousMessageId:e[179].prevMessageId,searchString:e[1],senderAvatarUrl:e[179].CreatedByAvatar,senderFullName:e[179].CreatedByName,senderId:e[179].CreatedBy,senderName:e[179].CreatedByName,senderProfileUrl:e[95](e[179]),setSize:e[29]?e[15].length:null,showSender:e[179].CreatedBy!==e[179].prevMessageCreatedBy||e[179].isPrevSystemMessage,sortIndex:e[0].sortIndex,timestamp:e[179].CreatedLocalTimeStamp,waitingForEditResponse:e[45]}}),i.$on("focusBackward",e[65]),i.$on("focusForward",e[64]),i.$on("forwardMessage",e[83]),i.$on("markAsUnread",e[84]),i.$on("messageEdited",e[78]),i.$on("openReportedThread",e[94]),i.$on("raiseError",e[125]),i.$on("releaseFocusDown",e[70]),i.$on("releaseFocusUp",e[126]),i.$on("startedEditingMessage",e[79]),i.$on("toggleUnreadMessageObservation",e[57]);let u=(e[24]?e[179].prevMessageId===e[24]:!e[29]&&e[47].MessageId===e[179].MessageId)&&zo(e),f=a&&Vo(e);return{key:n,first:null,c(){t=Ye(),ie(i.$$.fragment),s=W(),u&&u.c(),l=W(),f&&f.c(),o=Ye(),this.first=t},m(k,g){P(k,t,g),ne(i,k,g),P(k,s,g),u&&u.m(k,g),P(k,l,g),f&&f.m(k,g),P(k,o,g),r=!0},p(k,g){var w,M,C,v,T,E;e=k;const b={};g[0]&32768&&(b.attachmentName=e[179].AttachmentName),g[0]&32768&&(b.attachmentUrl=e[179].AttachmentUrl),g[0]&32768&&(b.canDelete=e[179].CanDelete),g[0]&32768&&(b.canEdit=e[179].CanEdit),g[0]&32768&&(b.childMessage=e[179].ChildMessage),g[0]&32768&&(b.childDeletedPermanently=e[179].IsChildMessageDeletedPermanently),g[0]&1&&(b.conversationId=e[0].id),g[1]&2048&&(b.reportAbuseModal=e[42]),g[0]&32768&&(b.createdRelative=e[179].CreatedRelative),g[0]&32768&&(b.currentMessageId=e[179].MessageId),g[0]&32768&&(b.dateForReader=e[179].CreatedLocalDateStamp),g[0]&33587200&&(b.editDraftText=e[25]&&e[25].messageId===e[179].MessageId?e[25].text:null),g[0]&32768&&(b.hasAttachment=!!e[179].AttachmentName),g[0]&32768&&(b.hasForward=e[179].HasShared),g[0]&32768&&(b.hasReport=e[179].HasAbuseReported),g[0]&32768&&(b.hasReply=e[179].HasRepliedTo),g[0]&32768&&(b.hasThreadReport=e[179].HasAbuseThreadReported),g[0]&65536&&(b.highlightedMessageId=e[16]),g[0]&1&&(b.is360ReportThread=e[0].is360ReportThread),g[0]&32768&&(b.isAbuse=e[179].IsAbuse),g[0]&32768&&(b.isDeleted=e[179].IsDeleted),g[0]&32768&&(b.isEdited=e[179].IsEdited&&!e[179].IsDeleted),g[0]&32768&&(b.isMine=e[179].CreatedBy===re.personId),g[0]&32768&&(b.isSystem=e[179].IsSystemMessage),g[0]&1&&(b.lastReadInstantMessageId=e[0].lastReadInstantMessageId),g[0]&1&&(b.massMessageType=e[0].massMessageType),g[0]&1&&(b.threadType=e[0].type),g[0]&16384&&(b.matchingMessageIds=e[14]),g[1]&64&&(b.messageListElement=e[37]),g[0]&32768&&(b.messageText=e[179].Text),g[1]&128&&(b.modalDialog=e[38]),g[0]&32768&&(b.nextMessageId=e[179].nextMessageId),g[0]&32768&&(b.originInstantMessageId=(M=(w=e[179])==null?void 0:w.OriginInstantMessage)==null?void 0:M.MessageId),g[0]&32768&&(b.originThreadDeleted=!!e[179].OriginInstantMessageThreadDeletedBy),g[0]&32768&&(b.originThreadId=e[179].OriginInstantMessageThreadId),g[0]&32768&&(b.originThreadName=e[179].OriginInstantMessageThreadName),g[0]&32768&&(b.originMessageDeleted=(v=(C=e[179])==null?void 0:C.OriginInstantMessage)==null?void 0:v.IsDeleted),g[0]&32768&&(b.originMessageText=(E=(T=e[179])==null?void 0:T.OriginInstantMessage)==null?void 0:E.Text),g[0]&536903680&&(b.posInSet=e[29]?e[15].length-e[181]:null),g[0]&32768&&(b.previousMessageId=e[179].prevMessageId),g[0]&2&&(b.searchString=e[1]),g[0]&32768&&(b.senderAvatarUrl=e[179].CreatedByAvatar),g[0]&32768&&(b.senderFullName=e[179].CreatedByName),g[0]&32768&&(b.senderId=e[179].CreatedBy),g[0]&32768&&(b.senderName=e[179].CreatedByName),g[0]&32768&&(b.senderProfileUrl=e[95](e[179])),g[0]&536903680&&(b.setSize=e[29]?e[15].length:null),g[0]&32768&&(b.showSender=e[179].CreatedBy!==e[179].prevMessageCreatedBy||e[179].isPrevSystemMessage),g[0]&1&&(b.sortIndex=e[0].sortIndex),g[0]&32768&&(b.timestamp=e[179].CreatedLocalTimeStamp),g[1]&16384&&(b.waitingForEditResponse=e[45]),i.$set(b),(e[24]?e[179].prevMessageId===e[24]:!e[29]&&e[47].MessageId===e[179].MessageId)?u?u.p(e,g):(u=zo(e),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),g[0]&32768&&(a=Zo(new Date(e[179].CreatedLocal),e[179].prevMessageCreatedLocal?new Date(e[179].prevMessageCreatedLocal):null)),a?f?f.p(e,g):(f=Vo(e),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i(k){r||(I(i.$$.fragment,k),r=!0)},o(k){A(i.$$.fragment,k),r=!1},d(k){k&&(R(t),R(s),R(l),R(o)),te(i,k),u&&u.d(k),f&&f.d(k)}}}function W1(n){let e,t=n[53].startText+"";return{c(){e=B("div"),m(e,"class","itsl-im2-conversation__start-of-history")},m(i,s){P(i,e,s),e.innerHTML=t},p(i,s){s[1]&4194304&&t!==(t=i[53].startText+"")&&(e.innerHTML=t)},i:we,o:we,d(i){i&&R(e)}}}function z1(n){let e,t,i,s=(n[31]&&!n[32]||n[34])&&Xo(n),l=!n[31]&&!n[34]&&Ko(n);return{c(){s&&s.c(),e=W(),l&&l.c(),t=Ye()},m(a,o){s&&s.m(a,o),P(a,e,o),l&&l.m(a,o),P(a,t,o),i=!0},p(a,o){a[31]&&!a[32]||a[34]?s?(s.p(a,o),o[1]&11&&I(s,1)):(s=Xo(a),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(me(),A(s,1,1,()=>{s=null}),he()),!a[31]&&!a[34]?l?(l.p(a,o),o[1]&9&&I(l,1)):(l=Ko(a),l.c(),I(l,1),l.m(t.parentNode,t)):l&&(me(),A(l,1,1,()=>{l=null}),he())},i(a){i||(I(s),I(l),i=!0)},o(a){A(s),A(l),i=!1},d(a){a&&(R(e),R(t)),s&&s.d(a),l&&l.d(a)}}}function Xo(n){let e,t;return e=new ns({props:{text:n[56].loading}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p:we,i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function Ko(n){let e,t;return e=new Yn({props:{id:Bu,cssClass:"itsl-im2-conversation__show-more-button",type:"plain",htmlType:"button",text:n[56].showMoreMessages}}),e.$on("click",n[63]),e.$on("keydown",n[69]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p:we,i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function jo(n){let e,t,i,s;t=new Bn({props:{ariaLabel:n[54],htmlType:"button",iconClass:"itsl-im2-conversation__go-to-last-message-button__icon",iconOnly:!0,id:Os,large:!0,type:"plain"}}),t.$on("click",n[60]),t.$on("keydown",n[66]);let l=n[48]&&Yo(n);return{c(){e=B("div"),ie(t.$$.fragment),i=W(),l&&l.c(),m(e,"class","itsl-im2-conversation__go-to-last-message-button__container")},m(a,o){P(a,e,o),ne(t,e,null),S(e,i),l&&l.m(e,null),s=!0},p(a,o){const r={};o[1]&8388608&&(r.ariaLabel=a[54]),t.$set(r),a[48]?l?l.p(a,o):(l=Yo(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(a){s||(I(t.$$.fragment,a),s=!0)},o(a){A(t.$$.fragment,a),s=!1},d(a){a&&R(e),te(t),l&&l.d()}}}function Yo(n){let e,t;return{c(){e=B("span"),t=ge(n[17]),m(e,"aria-hidden","true"),m(e,"class","itsl-im2-conversation__go-to-last-message-button__badge")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s[0]&131072&&Te(t,i[17])},d(i){i&&R(e)}}}function V1(n){let e,t,i;return t=new Yn({props:{id:Us,htmlType:"button",large:!0,text:n[56].view360Reports,type:"primary"}}),t.$on("click",n[93]),t.$on("keydown",n[92]),{c(){e=B("div"),ie(t.$$.fragment),m(e,"class","itsl-im2-conversation__footer--view-360-reports-button")},m(s,l){P(s,e,l),ne(t,e,null),i=!0},p:we,i(s){i||(I(t.$$.fragment,s),i=!0)},o(s){A(t.$$.fragment,s),i=!1},d(s){s&&R(e),te(t)}}}function q1(n){let e,t,i={inputText:$(n[56].messagesBlockedFromX,ht(n[0].participants,re.personId).FullName)};return e=new S1({props:i}),n[136](e),e.$on("keydown",n[92]),e.$on("toggleBlockConversation",n[137]),{c(){ie(e.$$.fragment)},m(s,l){ne(e,s,l),t=!0},p(s,l){const a={};l[0]&1&&(a.inputText=$(s[56].messagesBlockedFromX,ht(s[0].participants,re.personId).FullName)),e.$set(a)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){n[136](null),te(e,s)}}}function X1(n){let e,t,i=(fs(n[0])?$(n[56].messagesAreDisabledForX,ht(n[0].participants,re.personId).FullName):n[56].messagesAreDisabledForAllRecipients)+"",s;return{c(){e=B("div"),t=B("div"),s=ge(i),m(t,"class","itsl-im2-conversation__footer--placeholder--text"),m(e,"class","itsl-im2-conversation__footer--placeholder")},m(l,a){P(l,e,a),S(e,t),S(t,s)},p(l,a){a[0]&1&&i!==(i=(fs(l[0])?$(l[56].messagesAreDisabledForX,ht(l[0].participants,re.personId).FullName):l[56].messagesAreDisabledForAllRecipients)+"")&&Te(s,i)},i:we,o:we,d(l){l&&R(e)}}}function K1(n){let e,t,i;return t=new Yn({props:{htmlType:"button",id:Ds,large:!0,text:n[56].reopenConversation,type:"primary"}}),t.$on("click",n[135]),t.$on("keydown",n[92]),{c(){e=B("div"),ie(t.$$.fragment),m(e,"class","itsl-im2-conversation__footer--placeholder")},m(s,l){P(s,e,l),ne(t,e,null),i=!0},p:we,i(s){i||(I(t.$$.fragment,s),i=!0)},o(s){A(t.$$.fragment,s),i=!1},d(s){s&&R(e),te(t)}}}function j1(n){let e,t,i,s,l;function a(f){n[129](f)}function o(f){n[130](f)}function r(f){n[131](f)}let u={handleFocusBackwardManually:!0,idPrefix:"conversation",placeholder:n[73](),showFileUpload:!0};return n[36]!==void 0&&(u.inputText=n[36]),n[33]!==void 0&&(u.isMessageBeingSent=n[33]),n[28]!==void 0&&(u.hasFileValidationErrors=n[28]),e=new Mu({props:u}),le.push(()=>Re(e,"inputText",a)),le.push(()=>Re(e,"isMessageBeingSent",o)),le.push(()=>Re(e,"hasFileValidationErrors",r)),n[132](e),e.$on("focusBackward",n[68]),e.$on("focusForward",n[67]),e.$on("raiseError",n[133]),e.$on("resolveError",n[134]),e.$on("send",n[71]),e.$on("textAreaInput",n[72]),{c(){ie(e.$$.fragment)},m(f,d){ne(e,f,d),l=!0},p(f,d){const c={};!t&&d[1]&32&&(t=!0,c.inputText=f[36],Be(()=>t=!1)),!i&&d[1]&4&&(i=!0,c.isMessageBeingSent=f[33],Be(()=>i=!1)),!s&&d[0]&268435456&&(s=!0,c.hasFileValidationErrors=f[28],Be(()=>s=!1)),e.$set(c)},i(f){l||(I(e.$$.fragment,f),l=!0)},o(f){A(e.$$.fragment,f),l=!1},d(f){n[132](null),te(e,f)}}}function Y1(n){let e,t,i,s,l,a,o,r,u,f,d;t=new Qt({props:{visible:n[3],text:n[2],type:"info",close:n[56].close}}),t.$on("hidden",n[107]),s=new Qt({props:{closable:!1,text:n[49],type:"info",visible:n[19]}});const c=[R1,B1,A1],h=[];function p(_,y){return _[10]===Jt.conversationSettings?0:_[10]===Jt.newMessage?1:_[10]===Jt.conversation?2:-1}return~(o=p(n))&&(r=h[o]=c[o](n)),{c(){e=B("div"),ie(t.$$.fragment),i=W(),ie(s.$$.fragment),l=W(),a=B("div"),r&&r.c(),m(e,"id",Au),m(a,"class","itsl-im2-conversation")},m(_,y){P(_,e,y),ne(t,e,null),P(_,i,y),ne(s,_,y),P(_,l,y),P(_,a,y),~o&&h[o].m(a,null),n[143](a),u=!0,f||(d=Q(E1,"NewSignalRInstantMessage2",n[76]),f=!0)},p(_,y){const k={};y[0]&8&&(k.visible=_[3]),y[0]&4&&(k.text=_[2]),t.$set(k);const g={};y[1]&262144&&(g.text=_[49]),y[0]&524288&&(g.visible=_[19]),s.$set(g);let b=o;o=p(_),o===b?~o&&h[o].p(_,y):(r&&(me(),A(h[b],1,1,()=>{h[b]=null}),he()),~o?(r=h[o],r?r.p(_,y):(r=h[o]=c[o](_),r.c()),I(r,1),r.m(a,null)):r=null)},i(_){u||(I(t.$$.fragment,_),I(s.$$.fragment,_),I(r),u=!0)},o(_){A(t.$$.fragment,_),A(s.$$.fragment,_),A(r),u=!1},d(_){_&&(R(e),R(i),R(l),R(a)),te(t),te(s,_),~o&&h[o].d(),n[143](null),f=!1,d()}}}const bi="itsl-im2-conversation__auto-loading-toggle",Au="itsl-im2-conversation__banner-wrapper",Os="itsl-im2-conversation__go-to-last-message-button",G1="itsl-im2-conversation__messages-list",Go=60,Ds="itsl-im2-conversation__reopen_button",Bu="itsl-im2-conversation__show-more-button",Us="itsl-im2-conversation__view-360-reports-button";function Zo(n,e){return!n||!e||n.getFullYear()!==e.getFullYear()||n.getMonth()!==e.getMonth()||n.getDate()!==e.getDate()}function Jo(n){return n.reduce((e,t)=>(e&&os(e,t),t),{}),n.slice()}function os(n,e){n&&(n.prevMessageCreatedLocal=e?e.CreatedLocal:null,n.prevMessageCreatedBy=e?e.CreatedBy:null,n.prevMessageId=e?e.MessageId:null,n.isPrevSystemMessage=e?e.IsSystemMessage:null),e&&(e.nextMessageId=n?n.MessageId:null)}function Z1(n,e,t){let i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g,b,w,M,C,v,T;yi(n,$t,D=>t(22,T=D));let{bannerText:E}=e,{bannerVisible:N}=e,{conversationData:F}=e,{errors:L}=e,{isSearchAllConversationsMode:O}=e,{isSearchByConversationName:j}=e,{newMessageExtraBanner:ee}=e,{parentOverlay:X}=e,{searchIsAttachmentFilterChecked:ue}=e,{searchIsSentFilterChecked:ke}=e,{searchIsUnreadFilterChecked:ye}=e,{searchString:ae}=e,{threadId:K}=e;const pe=Qe(),Y=re.i18n;let qe,Ce,be,Xe=!1,We,je,se,x=0,Me,V=!1,H,q,fe,Ne=!0,Ge=!1,Ee=!1,gn=!0,an,vn=!1,dn=!1,_e=!0,Fe=[],cn=gl(at.sending,F.id),Ie=[],on,Dn,In=[],Sn,En,Un,Nn,qn,Rn=[],it,pn,Hn,wn,Xn=!1;nt(()=>G()),Qi(()=>Zn());async function G(){wt({performScrollIntoLastReadMessage:!1}),t(27,Me=Ls(Gn,400,!1)),qn=Ls(He,600,!1),w&&(t(14,Fe=F.matchingMessageIds),t(9,Ce=Fe==null?void 0:Fe.length),t(12,vn=!!Ce));try{const de=await al(K);if(t(101,In=Jo(de.Messages.EntityArray)),t(29,q=de.HasMore),li(Se.loadingError),await ln(),t(24,We=r?F.lastReadInstantMessageId:i==null?void 0:i.MessageId),H=r,!b&&r&&de.Messages.EntityArray.length>0&&F.lastReadInstantMessageId)for(await ln();q&&!Ie.some(ze=>!Yi(ze.MessageId,F.sortIndex,F.lastReadInstantMessageId));)await kt({pageSize:xt.searchResults})}catch(de){Ht(de)}const D=gl(at.editing,F.id);try{t(25,je=D!==""?JSON.parse(D):null)}catch{t(25,je=null)}t(35,_e=!1),await ln(),Pe(),fe==null||fe.tryLoadMore(),Z(),b&&(await ln(),await It())}async function Z(){!b&&r&&Ie.length>0&&(await ln(),await ln(),Mn(a.MessageId,{behavior:"instant"}))}function Pe(){wn=new IntersectionObserver(D=>{if(!Xe){for(const de of D)if(de.isIntersecting){const ze=de.target,un=parseInt(ze.dataset.parentorcurrentmessageid,10);(Nn??F.lastReadInstantMessageId)<un&&(Nn=un,qn()),wn.unobserve(ze)}}},{root:Un,rootMargin:`0px 0px -${Go}px`})}async function He(){const D=Nn;await oi(D,ks.MarkMessageAsRead),D===Ie[0].MessageId&&H&&(St.count--,H=!1)}function Ze(D){const{messageElement:de,observe:ze}=D.detail;ze?wn.observe(de):wn&&de&&de instanceof Element&&wn.unobserve(de)}function Cn(){var D;N?(D=document.querySelector(`#${Au} button`))==null||D.focus():qe.focusBackButton()}function Pn(){return O?Y.backToSearch:T?Y.backToConversationOptions:Y.backTooltip}function rn(D){const de=D.detail;Ke(de.key)===ce.TAB&&de.shiftKey&&(c?pn.focus({focusTarget:Tn.last}):ds(F)?document.getElementById(Ds).focus():F.isBlocked?Hn.focusUnblockButton():F.is360ReportThread?document.getElementById(Us).focus():Tt(),de.preventDefault())}function tn(D,de=Tn.first){on==null||on.dispatchEvent(new CustomEvent("focusMessage",{detail:{messageId:D,target:de}}))}function Mn(D,{behavior:de="smooth"}={}){on==null||on.dispatchEvent(new CustomEvent("scrollToMessage",{detail:{messageId:D,behavior:de}}))}function Gn(){t(11,gn=Math.round(on==null?void 0:on.scrollTop)>-50),t(100,x++,x)}function Wn(){if(u){const D=l==null?void 0:l[(l==null?void 0:l.length)-1];Mn(D==null?void 0:D.MessageId)}else ft()}function Je(){if(r&&a){const D=document.querySelector(`[data-parentorcurrentmessageid="${a.MessageId}"]`);if(D){const de=D.getBoundingClientRect(),ze=Un.getBoundingClientRect();if(de.top+Go>ze.bottom)return!0}}return!1}function ft(){on==null||on.scroll({behavior:"smooth",left:0,top:0})}async function ii(D){await kt(),D.detail.onLoaded()}async function kt({pageSize:D=void 0}={}){t(34,an=!0);try{const de=await al(K,s.MessageId,D),ze=Jo(de.Messages.EntityArray);ze&&os(s,ze[0]),t(101,In=ze.slice()),t(29,q=de.HasMore),t(32,Ge=!1)}catch(de){Ht(de),t(32,Ge=!0)}finally{t(34,an=!1)}}function Si(){t(31,Ne=!Ne)}function Ei(){tn(s.MessageId),kt()}function Ft(D){if(D.detail.nextMessageId)tn(D.detail.nextMessageId);else{const de=document.getElementById(Os);de?de.focus():Ot()}}function Ot(){c?pn.focus():ds(F)?document.getElementById(Ds).focus():F.isBlocked?Hn.focusUnblockButton():F.is360ReportThread?document.getElementById(Us).focus():Cn()}function Dt(D){D.detail.previousMessageId?tn(D.detail.previousMessageId,D.detail.target):!Ne&&q?document.getElementById(Bu).focus():document.getElementById(bi).focus()}function si(D){Ke(D.key)===ce.TAB&&(D.preventDefault(),D.shiftKey?Tt({skipGoToLastMessageButton:!0}):Ot())}function Ut(){Cn()}function Tt({skipGoToLastMessageButton:D=!1}={}){const de=document.getElementById(Os);!D&&de?de.focus():i!=null&&i.MessageId?tn(i.MessageId,Tn.last):Dt({detail:{}})}function Mt(D){const de=Ke(D.key);if(de===ce.TAB)D.shiftKey?document.getElementById(bi).focus():tn(s.MessageId);else if(["PageUp",ce.UP].includes(de))document.getElementById(bi).focus();else if(["PageDown",ce.DOWN].includes(de))tn(s.MessageId);else if(de==="Home"&&D.ctrlKey)document.getElementById(bi).focus();else if(de==="End"&&D.ctrlKey)_t();else return;D.preventDefault()}function _t(){c?pn.focus():tn(i.MessageId)}async function Ai(){const D=cn.trim();if(V&&pn.validateUploadedFiles({displaySummary:!0}),L.filter(de=>de!==Se.personNotAvailable).length||V||!D&&pn.getPendingAttachments().length===0){pe("refreshErrors");return}if(D){t(33,Ee=!0),ft(),t(36,cn=""),pn.focusTextArea(),Gi(at.sending,F.id);try{await Vf(K,D),fi()}catch(de){Ht(de),t(36,cn=D),Rs(at.sending,F.id,D),t(33,Ee=!1);return}}t(33,Ee=!0),await pn.uploadAttachments(K),t(33,Ee=!1)}function Bi(){cn!==""?Rs(at.sending,F.id,cn):Gi(at.sending,F.id)}function bt(D,de){pe("raiseError",{errorType:D,errorText:de})}function li(...D){pe("resolveError",{errorTypes:D})}function Ri(){return F.type===Oe.oneToOne?$(Y.writeMessageToX,F.personFullNames[0]):Y.writeMessageToAll}function Ht(D){var de;[Pt.forbidden,Pt.notFound].includes((de=D==null?void 0:D.response)==null?void 0:de.status)?bt(Se.personNotAvailable,F.type===Oe.oneToOne?$(Y.messagesXIsNotAvailable,F.name):F.nameFromServer?$(Y.conversationXIsNotAvailableAnymore,F.nameFromServer):Y.conversationIsNotAvailableAnymore):rt(pe,D)}function ai(){Wt(),T?(Kt(),di()):pe("backToConversationList")}function pt(){Kt(),di()}async function Pi(D){const de=D.detail.thread.Messages.EntityArray;if(D.detail.thread.InstantMessageThreadId===K&&(de==null?void 0:de.length)>0){const ze=(i==null?void 0:i.MessageId)>0;if(!ze||de[0].MessageId>i.MessageId){ze&&os(de[0],i),t(102,Rn=de);const un=de.find(Fn=>Fn.CreatedBy===re.personId);un?(t(24,We=un.MessageId),Xe=!1,await ln(),ft()):H||(St.count++,H=!0)}else await ri(de[0])}}async function oi(D,de,ze=0){const un=[{newValue:D===0?null:D,property:"LastReadInstantMessageId"}];ze>0&&un.push({newValue:ze,property:"SortIndex"}),pe("updateConversationData",{data:un,threadId:K}),Nn=void 0,await Kf(K,D,ze,de)}function Zn(){wn&&wn.disconnect()}async function ri(D){const de=Ie.findIndex(ze=>ze.MessageId===D.MessageId);if(de>-1){if(D.IsDeleted&&D.Text===""){const ze=Ie[de-1],un=Ie[de+1];os(ze,un),Ie.splice(de,1),de===0&&pe("updateConversationData",{newValue:un,property:"LastMessage",threadId:K}),Ie.length===0?(ai(),pe("deleteThread",{threadId:K})):tn(ze?ze.MessageId:un.MessageId)}else{const ze=Ie[de];for(const un in D)ze[un]=D[un]}t(101,In=[])}}async function yt(D){try{await jf(D)}catch{Wt(),bt(Se.deleteFailed)}finally{tn(D)}}async function Li({detail:{messageId:D,text:de}}){try{t(45,Xn=!0),await Yf(D,de),ui(),on.dispatchEvent(new CustomEvent("messageEditSuccess",{detail:{messageId:D}})),se&&(t(26,se.textContent="",se),t(26,se.textContent=Y.messageEditedSuccessfully,se))}catch{Wt(),bt(Se.editFailed)}finally{t(45,Xn=!1),await ln(),tn(D)}}function Ni(D){ui(),fi(D.detail.messageId)}function ui(){Gi(at.editing,F.id),t(25,je=null)}function fi(D){on==null||on.dispatchEvent(new CustomEvent("cancelOtherEditing",{detail:{messageId:D}}))}function Wt(){Js(pe),li(Se.personNotAvailable,Se.editFailed,Se.deleteFailed,Se.closeOpenConversation,Se.genericErrorMessage)}function zt(D){t(10,be=D),X.focus()}function di(){zt(Jt.conversationSettings)}function wt({performScrollIntoLastReadMessage:D=!0}={}){zt(Jt.conversation),Xe=!1,D&&(t(24,We=o===0?F.lastReadInstantMessageId:i==null?void 0:i.MessageId),Z())}async function Vt(D){try{await nd(F.id,D),wt()}catch{bt(Se.closeOpenConversation)}}async function qt(){const{participants:D}=F,de=ht(D,re.personId);try{const ze=await td(de.PersonId);pe("updateConversationData",{newValue:ze,property:"IsBlocked",threadId:K}),wt(),t(3,N=!0),t(2,E=$(ze?Y.messagesBlockedFromX:Y.messagesXCanSendYouAgain,de.FullName))}catch{console.log("error")}}function Fi(D){t(40,En=mt.forward),t(39,Sn=D.detail),t(39,Sn.additionalHeadingText=Ui(Sn.hasAttachment,Sn.senderId,Sn.senderFullName),Sn),zt(Jt.newMessage)}async function Oi(D){const{messageId:de}=D.detail,ze=de?ks.MarkMessageAsUnread:ks.MarkConversationAsUnread,un=de?Ie.findIndex(Fn=>Fn.MessageId===de):Ie.findIndex(Fn=>Fn.MessageId<=F.lastReadInstantMessageId&&!Fn.IsDeleted&&!Fn.IsSystemMessage);if(un>=0){const Fn=Ie.length===un+1?0:Ie[un+1].MessageId,mf=F.sortIndex&&F.sortIndex<=Fn?de?Ie.find(ps=>ps.MessageId<=F.lastReadInstantMessageId&&!ps.IsDeleted&&!ps.IsSystemMessage).MessageId:Ie[un].MessageId:0;await oi(Fn,ze,mf),t(24,We=Fn),Xe=!0,wn&&wn.disconnect(),H||(St.count++,H=!0)}}function Di(D){t(2,E=Y.reportAbuseHasBeenSent),t(3,N=!0);const{originInstantMessageId:de,originThreadId:ze}=D.detail;if(de){const un=Ie.find(Fn=>Fn.MessageId===de);un&&(un.IsAbuse=!0,t(101,In=[])),tn(de)}else ze&&pe("updateConversationData",{newValue:!0,property:"IsAbuseReportedByCurrentUser",threadId:ze})}function Ui(D,de,ze){let un,Fn;switch(F.type){case Oe.oneToOne:Fn=ht(F.participants,de).FullName,un=D?Y.xSharedAttachmentInConversationWithY:Y.xWroteInConversationWithY;break;case Oe.course:case Oe.group:case Oe.project:F.nameFromServer?un=D?Y.xSharedAttachmentInY:Y.xWroteInY:un=D?Y.xSharedAttachmentInConversation:Y.xWroteInConversation;break;case Oe.groupPlaceHolder:default:return ze}return F.massMessageType!==On.broadcast?$(un,ze,Fn||F.nameFromServer):ze}function Hi(D){D.detail.selectedThread.id===F.id&&wt(),pe("openConversation",D.detail)}function Wi(D){Ke(D.key)===ce.ENTER&&Xt(D.currentTarget.value)}async function Xt(D){if(!(Ie.length===0||D===ae))if(t(1,ae=D),ae.length>0){t(13,dn=!0);try{t(14,Fe=await xf(K,ae)),t(9,Ce=Fe==null?void 0:Fe.length)}finally{t(13,dn=!1)}await ln(),await It()}else ci()}async function zi(){an||(t(9,Ce=Ce>1?Ce-1:Fe.length),await ln(),await It())}async function Vi(){an||(t(9,Ce=Ce<Fe.length?Ce+1:1),await ln(),await It())}async function It(){try{for(;q&&!Ie.some(D=>D.MessageId===k);)t(12,vn=!0),await kt({pageSize:xt.searchResults})}finally{t(12,vn=!1)}await ln(),Mn(k)}function ci(){t(9,Ce=void 0),t(14,Fe=[])}function Kt(){O?pe("cancelSearchAllConversations"):(jt($t,T=!1,T),t(1,ae="")),ci(),t(0,F)}function qi(D){Ke(D.key)===ce.TAB&&(D.shiftKey?(Tt(),D.preventDefault()):(Cn(),D.preventDefault()))}function U(){i!=null&&i.Link&&window.open(i.Link,i.LinkTarget)}async function z(D){try{const de=await sd(D.detail.threadId,re.personId),ze=ki(de);ze.isUnread=!0,pe("openConversation",{selectedThread:ze}),pe("addOrUpdateThread",{threadData:de})}catch{bt(Se.genericErrorMessage)}}function ve(D){var de;return(de=F.participants.find(ze=>ze.PersonId===D.CreatedBy))==null?void 0:de.ProfileUrl}const xe=D=>D!==Se.genericErrorMessage,$e=()=>t(3,N=!1);function mn(D){F=D,t(0,F)}function Kn(D){J.call(this,n,D)}function An(D){J.call(this,n,D)}function Xi(D){J.call(this,n,D)}function Ki(D){J.call(this,n,D)}const Fu=()=>qt(),Ou=D=>Vt(D.detail.closed);function Du(D){ee=D,t(4,ee)}function Uu(D){J.call(this,n,D)}function Hu(D){J.call(this,n,D)}function Wu(D){J.call(this,n,D)}function zu(D){J.call(this,n,D)}function Vu(D){le[D?"unshift":"push"](()=>{se=D,t(26,se)})}const qu=()=>Xt("");function Xu(D){F=D,t(0,F)}function Ku(D){le[D?"unshift":"push"](()=>{qe=D,t(23,qe)})}function ju(D){Ne=D,t(31,Ne)}function Yu(D){J.call(this,n,D)}const Gu=()=>document.getElementById(bi).focus();function Zu(D){le[D?"unshift":"push"](()=>{fe=D,t(30,fe)})}function Ju(D){le[D?"unshift":"push"](()=>{on=D,t(37,on)})}function Qu(D){cn=D,t(36,cn)}function xu(D){Ee=D,t(33,Ee)}function $u(D){V=D,t(28,V)}function ef(D){le[D?"unshift":"push"](()=>{pn=D,t(43,pn)})}function nf(D){J.call(this,n,D)}function tf(D){J.call(this,n,D)}const sf=()=>Vt(!1);function lf(D){le[D?"unshift":"push"](()=>{Hn=D,t(44,Hn)})}const af=()=>qt();function of(D){le[D?"unshift":"push"](()=>{Dn=D,t(38,Dn)})}const rf=D=>yt(D.detail.messageId);function uf(D){le[D?"unshift":"push"](()=>{it=D,t(42,it)})}function ff(D){J.call(this,n,D)}function df(D){J.call(this,n,D)}function cf(D){le[D?"unshift":"push"](()=>{Un=D,t(41,Un)})}return n.$$set=D=>{"bannerText"in D&&t(2,E=D.bannerText),"bannerVisible"in D&&t(3,N=D.bannerVisible),"conversationData"in D&&t(0,F=D.conversationData),"errors"in D&&t(5,L=D.errors),"isSearchAllConversationsMode"in D&&t(96,O=D.isSearchAllConversationsMode),"isSearchByConversationName"in D&&t(97,j=D.isSearchByConversationName),"newMessageExtraBanner"in D&&t(4,ee=D.newMessageExtraBanner),"parentOverlay"in D&&t(98,X=D.parentOverlay),"searchIsAttachmentFilterChecked"in D&&t(6,ue=D.searchIsAttachmentFilterChecked),"searchIsSentFilterChecked"in D&&t(7,ke=D.searchIsSentFilterChecked),"searchIsUnreadFilterChecked"in D&&t(8,ye=D.searchIsUnreadFilterChecked),"searchString"in D&&t(1,ae=D.searchString),"threadId"in D&&t(99,K=D.threadId)},n.$$.update=()=>{n.$$.dirty[0]&32768|n.$$.dirty[3]&768&&(t(15,Ie=[...Rn,...Ie,...In]),t(102,Rn=[]),t(101,In=[])),n.$$.dirty[0]&32768&&(i=Ie==null?void 0:Ie[0]),n.$$.dirty[0]&32768&&t(47,s=Ie==null?void 0:Ie[(Ie==null?void 0:Ie.length)-1]),n.$$.dirty[0]&32769&&t(104,l=Ie==null?void 0:Ie.filter(D=>Yi(D.MessageId,F.sortIndex,F.lastReadInstantMessageId))),n.$$.dirty[0]&32769&&t(103,a=F.lastReadInstantMessageId?Ie==null?void 0:Ie.find(D=>!Yi(D.MessageId,F.sortIndex,F.lastReadInstantMessageId)):Ie==null?void 0:Ie[(Ie==null?void 0:Ie.length)-1]),n.$$.dirty[3]&2048&&t(17,o=(l==null?void 0:l.length)??0),n.$$.dirty[0]&131072&&t(48,r=o>0),n.$$.dirty[0]&131072|n.$$.dirty[3]&1152&&t(105,u=Je()),n.$$.dirty[0]&133120&&t(55,f=gn||o===0?"":o===1?Y.oneNewMessage:$(Y.xNewMessages,o)),n.$$.dirty[0]&131072|n.$$.dirty[3]&4096&&t(54,d=u?o===1?Y.goTo1NewMessage:$(Y.goToXNewMessages,o):Y.goToLastMessage),n.$$.dirty[0]&1&&t(46,c=Cd(F)),n.$$.dirty[0]&1&&t(53,h=Wd(F.personFullNames,F.locationTitles,F.type,F.name)),n.$$.dirty[0]&2&&t(21,p=ae.length>0),n.$$.dirty[0]&16384&&t(20,_=Fe==null?void 0:Fe.length),n.$$.dirty[0]&7348224&&t(52,y=T&&p&&!dn?$(_===1?Y.xResult:Y.xResults,_):""),n.$$.dirty[0]&16896&&t(16,k=Fe&&Ce&&Fe[Ce-1]),n.$$.dirty[3]&24&&t(18,w=O&&!j),n.$$.dirty[0]&6631424&&t(51,g=(w||T&&p&&!dn)&&!vn&&k?Wr(k):void 0),n.$$.dirty[0]&1048576|n.$$.dirty[3]&8&&(b=O&&!!_),n.$$.dirty[0]&4456449&&t(50,M=!T&&!w&&vd(F)),n.$$.dirty[0]&1025&&t(19,C=be===Jt.conversation&&(F==null?void 0:F.massMessageType)===On.none&&[Oe.course,Oe.project,Oe.group,Oe.collaboration].includes(F.type)&&F.numberOfInactiveParticipants>0&&!Qr(F)),n.$$.dirty[0]&524289&&t(49,v=C?F.numberOfInactiveParticipants===1?$(Y.messagesAreDisabledForX,F.inactiveParticipantFullName):$(Y.xParticipantsCannotSeeMessages,F.numberOfInactiveParticipants):"")},[F,ae,E,N,ee,L,ue,ke,ye,Ce,be,gn,vn,dn,Fe,Ie,k,o,w,C,_,p,T,qe,We,je,se,Me,V,q,fe,Ne,Ge,Ee,an,_e,cn,on,Dn,Sn,En,Un,it,pn,Hn,Xn,c,s,r,v,M,g,y,h,d,f,Y,Ze,Pn,rn,Wn,ii,Si,Ei,Ft,Dt,si,Ut,Tt,Mt,_t,Ai,Bi,Ri,ai,pt,Pi,yt,Li,Ni,wt,Vt,qt,Fi,Oi,Di,Hi,Wi,Xt,zi,Vi,Kt,qi,U,z,ve,O,j,X,K,x,In,Rn,a,l,u,xe,$e,mn,Kn,An,Xi,Ki,Fu,Ou,Du,Uu,Hu,Wu,zu,Vu,qu,Xu,Ku,ju,Yu,Gu,Zu,Ju,Qu,xu,$u,ef,nf,tf,sf,lf,af,of,rf,uf,ff,df,cf]}class J1 extends Ue{constructor(e){super(),De(this,e,Z1,Y1,Le,{bannerText:2,bannerVisible:3,conversationData:0,errors:5,isSearchAllConversationsMode:96,isSearchByConversationName:97,newMessageExtraBanner:4,parentOverlay:98,searchIsAttachmentFilterChecked:6,searchIsSentFilterChecked:7,searchIsUnreadFilterChecked:8,searchString:1,threadId:99},null,[-1,-1,-1,-1,-1,-1])}}function Qo(n){let e,t,i=n[15]&&xo(n);return{c(){e=B("div"),i&&i.c(),m(e,"class","itsl-im2-thread__timestamp"),m(e,"id",t=n[19].concat(n[3].InstantMessageThreadId)),oe(e,"itsl-im2-thread__timestamp--unread",n[9])},m(s,l){P(s,e,l),i&&i.m(e,null)},p(s,l){s[15]?i?i.p(s,l):(i=xo(s),i.c(),i.m(e,null)):i&&(i.d(1),i=null),l[0]&524296&&t!==(t=s[19].concat(s[3].InstantMessageThreadId))&&m(e,"id",t),l[0]&512&&oe(e,"itsl-im2-thread__timestamp--unread",s[9])},d(s){s&&R(e),i&&i.d()}}}function xo(n){let e,t,i;return{c(){e=ge(n[10]),t=W(),i=B("span"),i.textContent=".",m(i,"class","screen-reader")},m(s,l){P(s,e,l),P(s,t,l),P(s,i,l)},p(s,l){l[0]&1024&&Te(e,s[10])},d(s){s&&(R(e),R(t),R(i))}}}function $o(n){let e,t,i,s,l=!n[8]&&n[17]&&er(n);function a(u,f){return u[8]?x1:Q1}let o=a(n),r=o(n);return{c(){e=B("div"),l&&l.c(),t=W(),i=B("div"),r.c(),m(i,"aria-hidden","true"),m(i,"class","itsl-im2-thread__text"),m(i,"id",s=n[20].concat(n[3].InstantMessageThreadId)),m(e,"class","itsl-im2-last-message")},m(u,f){P(u,e,f),l&&l.m(e,null),S(e,t),S(e,i),r.m(i,null)},p(u,f){!u[8]&&u[17]?l?l.p(u,f):(l=er(u),l.c(),l.m(e,t)):l&&(l.d(1),l=null),o===(o=a(u))&&r?r.p(u,f):(r.d(1),r=o(u),r&&(r.c(),r.m(i,null))),f[0]&1048584&&s!==(s=u[20].concat(u[3].InstantMessageThreadId))&&m(i,"id",s)},d(u){u&&R(e),l&&l.d(),r.d()}}}function er(n){let e;return{c(){e=B("span"),m(e,"class","itsl-im2-last-message__icon"),oe(e,"itsl-im2-last-message__icon--closed",n[7]),oe(e,"itsl-im2-last-message__icon--forward",n[5]),oe(e,"itsl-im2-last-message__icon--report",n[4]||n[6]),oe(e,"itsl-im2-last-message__icon--reply",n[11])},m(t,i){P(t,e,i)},p(t,i){i[0]&128&&oe(e,"itsl-im2-last-message__icon--closed",t[7]),i[0]&32&&oe(e,"itsl-im2-last-message__icon--forward",t[5]),i[0]&80&&oe(e,"itsl-im2-last-message__icon--report",t[4]||t[6]),i[0]&2048&&oe(e,"itsl-im2-last-message__icon--reply",t[11])},d(t){t&&R(e)}}}function Q1(n){let e,t;return{c(){e=new zs(!1),t=Ye(),e.a=t},m(i,s){e.m(n[12],i,s),P(i,t,s)},p(i,s){s[0]&4096&&e.p(i[12])},d(i){i&&(R(t),e.d())}}}function x1(n){let e=n[23]()+"",t;return{c(){t=ge(e)},m(i,s){P(i,t,s)},p:we,d(i){i&&R(t)}}}function $1(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y;i=new ti({props:{colorSchema:n[3].ColorSchema,is360ReportThread:n[3].CanDelete,massMessageType:n[3].MassMessageType,participants:n[3].Participants,threadType:n[3].Type}});let k=n[14]&&Qo(n),g=n[16]&&$o(n);return{c(){e=B("div"),t=B("div"),ie(i.$$.fragment),s=W(),l=B("div"),a=ge(n[13]),r=W(),k&&k.c(),u=W(),g&&g.c(),f=W(),d=B("div"),d.textContent=`${`${n[22]()} ${n[25]()} ${n[24]()} ${n[26]()}`}`,m(t,"class","itsl-im2-thread__avatarcontainer"),m(l,"aria-hidden","true"),m(l,"class","itsl-im2-thread__title"),m(l,"id",o=n[18].concat(n[3].InstantMessageThreadId)),m(d,"class","screen-reader"),m(e,"aria-describedby",c=n[20].concat(n[3].InstantMessageThreadId," ",n[19],n[3].InstantMessageThreadId)),m(e,"aria-labelledby",h=n[18].concat(n[3].InstantMessageThreadId)),m(e,"aria-posinset",n[1]),m(e,"aria-setsize",n[2]),m(e,"class","itsl-im2-thread"),m(e,"role","article"),m(e,"tabindex","0"),oe(e,"itsl-im2-thread--no-timestamp",!n[14]),oe(e,"itsl-im2-thread--no-last-message",!n[16]),oe(e,"itsl-im2-thread--unread",n[9])},m(b,w){P(b,e,w),S(e,t),ne(i,t,null),S(e,s),S(e,l),S(l,a),S(e,r),k&&k.m(e,null),S(e,u),g&&g.m(e,null),S(e,f),S(e,d),n[30](e),p=!0,_||(y=[Q(e,"click",n[21]),Q(e,"keydown",n[27])],_=!0)},p(b,w){const M={};w[0]&8&&(M.colorSchema=b[3].ColorSchema),w[0]&8&&(M.is360ReportThread=b[3].CanDelete),w[0]&8&&(M.massMessageType=b[3].MassMessageType),w[0]&8&&(M.participants=b[3].Participants),w[0]&8&&(M.threadType=b[3].Type),i.$set(M),(!p||w[0]&8192)&&Te(a,b[13]),(!p||w[0]&262152&&o!==(o=b[18].concat(b[3].InstantMessageThreadId)))&&m(l,"id",o),b[14]?k?k.p(b,w):(k=Qo(b),k.c(),k.m(e,u)):k&&(k.d(1),k=null),b[16]?g?g.p(b,w):(g=$o(b),g.c(),g.m(e,f)):g&&(g.d(1),g=null),(!p||w[0]&1572872&&c!==(c=b[20].concat(b[3].InstantMessageThreadId," ",b[19],b[3].InstantMessageThreadId)))&&m(e,"aria-describedby",c),(!p||w[0]&262152&&h!==(h=b[18].concat(b[3].InstantMessageThreadId)))&&m(e,"aria-labelledby",h),(!p||w[0]&2)&&m(e,"aria-posinset",b[1]),(!p||w[0]&4)&&m(e,"aria-setsize",b[2]),(!p||w[0]&16384)&&oe(e,"itsl-im2-thread--no-timestamp",!b[14]),(!p||w[0]&65536)&&oe(e,"itsl-im2-thread--no-last-message",!b[16]),(!p||w[0]&512)&&oe(e,"itsl-im2-thread--unread",b[9])},i(b){p||(I(i.$$.fragment,b),p=!0)},o(b){A(i.$$.fragment,b),p=!1},d(b){b&&R(e),te(i),k&&k.d(),g&&g.d(),n[30](null),_=!1,nn(y)}}}function eg(n,e,t){let i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g,b,w,M,C,v;const T=Qe(),E=re.i18n;let{idPrefix:N=""}=e,{posInSet:F}=e,{setSize:L}=e,{threadData:O}=e,{threadElement:j}=e;function ee(){T("openConversation",{selectedThread:ki(O)})}function X(){switch(O.Type){case Oe.course:return $(E.courseConversationX,f);case Oe.oneToOne:return $(E.courseConversationBetweenYouAndX,f);case Oe.group:return O.Name?$(E.groupConversation,f):$(E.groupConversationBetweenYouAndX,f);default:return f}}function ue(){return $(o===1?E.xResult:E.xResults,o)}function ke(){return o===0?"":`${ue()}.`}function ye(){return u?E.youHaveUnreadMessages:E.noUnreadMessages}function ae(){if(!O.LastMessage)return"";if(a)return E.conversationClosed;if(r)return"";switch(!0){case d:return y?$(E.lastMessageForwardedByYouX,g):$(E.lastMessageForwardedByXY,O.LastMessage.CreatedByName,g);case c:return y?$(E.lastMessageReportByYouX,g):$(E.lastMessageReportByXY,O.LastMessage.CreatedByName,g);case p:return b;default:return y?$(E.lastMessageFromYouX,g):$(E.lastMessageFromXY,O.LastMessage.CreatedByName,g)}}function K(be){Ke(be.key)===ce.ENTER&&ee()}function pe(be){if(!be.LastMessage)return"";if(be.LastMessage.IsSystemMessage||be.MassMessageType!==On.none)return a?Ve(E.conversationClosed):be.LastMessage.IsSystemMessage?Ve(g):g;switch(!0){case c:return y?$(E.youReportedX,g):$(E.xReportedY,Ve(be.LastMessage.CreatedByName),g);case p:return qe();default:return y?$(E.youAsSender,g):$(E.xColonY,Ve(be.LastMessage.CreatedByName),g)}}function Y(be){return c&&k&&!re.isStaff?be.LastMessage.OriginInstantMessage.Text:d||c?be.LastMessage.ChildMessage&&(be.LastMessage.ChildMessage.Text||be.LastMessage.ChildMessage.AttachmentName)||E.messageWasRemoved:be.LastMessage?be.LastMessage.Text||be.LastMessage.AttachmentName:""}function qe(){return y?g?O.LastMessage.OriginInstantMessageThreadName?$(E.youReportedXY,Ve(O.LastMessage.OriginInstantMessageThreadName),g):$(E.youReportedAConversationX,g):O.LastMessage.OriginInstantMessageThreadName?$(E.youReportedXName,Ve(O.LastMessage.OriginInstantMessageThreadName)):E.youReportedAConversation:g?O.LastMessage.OriginInstantMessageThreadName?$(E.xReportedYZ,Ve(O.LastMessage.CreatedByName),Ve(O.LastMessage.OriginInstantMessageThreadName),g):$(E.xReportedAConversationY,Ve(O.LastMessage.CreatedByName),g):O.LastMessage.OriginInstantMessageThreadName?$(E.xReportedYName,Ve(O.LastMessage.CreatedByName),Ve(O.LastMessage.OriginInstantMessageThreadName)):$(E.xReportedAConversation,Ve(O.LastMessage.CreatedByName))}function Ce(be){le[be?"unshift":"push"](()=>{j=be,t(0,j)})}return n.$$set=be=>{"idPrefix"in be&&t(28,N=be.idPrefix),"posInSet"in be&&t(1,F=be.posInSet),"setSize"in be&&t(2,L=be.setSize),"threadData"in be&&t(3,O=be.threadData),"threadElement"in be&&t(0,j=be.threadElement)},n.$$.update=()=>{var be;n.$$.dirty[0]&268435456&&t(20,i=`${N}itsl-im2-thread__text_`),n.$$.dirty[0]&268435456&&t(19,s=`${N}itsl-im2-thread__timestamp_`),n.$$.dirty[0]&268435456&&t(18,l=`${N}itsl-im2-thread__title_`),n.$$.dirty[0]&8&&t(7,a=ud(O)),n.$$.dirty[0]&8&&t(29,o=O.MatchingMessageIds?O.MatchingMessageIds.length:0),n.$$.dirty[0]&536870912&&t(8,r=o>0),n.$$.dirty[0]&8&&t(9,u=us(O)),n.$$.dirty[0]&8&&t(13,f=zr(O)),n.$$.dirty[0]&8&&t(5,d=!!O.LastMessage&&O.LastMessage.HasShared),n.$$.dirty[0]&8&&t(4,c=!!O.LastMessage&&O.LastMessage.HasAbuseReported),n.$$.dirty[0]&8&&t(11,h=!!O.LastMessage&&O.LastMessage.HasRepliedTo),n.$$.dirty[0]&8&&t(6,p=!!O.LastMessage&&O.LastMessage.HasAbuseThreadReported),n.$$.dirty[0]&2288&&t(17,_=a||d||c||h||p),n.$$.dirty[0]&8&&(y=!!O.LastMessage&&O.LastMessage.CreatedBy===re.personId),n.$$.dirty[0]&8&&(k=!!O.LastMessage&&O.LastMessage.OriginInstantMessage&&O.LastMessage.OriginInstantMessage.IsDeleted),n.$$.dirty[0]&8&&(g=Y(O)),n.$$.dirty[0]&8&&t(12,b=pe(O)),n.$$.dirty[0]&8&&t(10,w=((be=O==null?void 0:O.LastMessage)==null?void 0:be.CreatedLocalShortNumericDate)||""),n.$$.dirty[0]&264&&t(16,M=r||!!O.LastMessage),n.$$.dirty[0]&1280&&t(15,C=!r&&!!w),n.$$.dirty[0]&1792&&t(14,v=(!r||u)&&!!w)},[j,F,L,O,c,d,p,a,r,u,w,h,b,f,v,C,M,_,l,s,i,ee,X,ue,ke,ye,ae,K,N,o,Ce]}class ng extends Ue{constructor(e){super(),De(this,e,eg,$1,Le,{idPrefix:28,posInSet:1,setSize:2,threadData:3,threadElement:0},null,[-1,-1])}}function nr(n,e,t){const i=n.slice();return i[25]=e[t],i[26]=e,i[27]=t,i}function tr(n){let e,t,i;function s(a){n[19](a)}let l={id:n[4]+"itsl-im2__auto-loading-toggle",name:"itsl-im2__auto-loading-toggle",label:n[14].automaticallyLoadConversations};return n[1]!==void 0&&(l.checked=n[1]),e=new vu({props:l}),le.push(()=>Re(e,"checked",s)),e.$on("click",n[15]),{c(){ie(e.$$.fragment)},m(a,o){ne(e,a,o),i=!0},p(a,o){const r={};o&16&&(r.id=a[4]+"itsl-im2__auto-loading-toggle"),!t&&o&2&&(t=!0,r.checked=a[1],Be(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){A(e.$$.fragment,a),i=!1},d(a){te(e,a)}}}function ir(n){let e,t,i;function s(a){n[20](a,n[27])}let l={idPrefix:n[4],posInSet:n[3]?n[27]+1:null,setSize:n[3]?n[8].length:null,threadData:n[25]};return n[11][n[27]]!==void 0&&(l.threadElement=n[11][n[27]]),e=new ng({props:l}),le.push(()=>Re(e,"threadElement",s)),e.$on("openConversation",n[21]),{c(){ie(e.$$.fragment)},m(a,o){ne(e,a,o),i=!0},p(a,o){n=a;const r={};o&16&&(r.idPrefix=n[4]),o&8&&(r.posInSet=n[3]?n[27]+1:null),o&264&&(r.setSize=n[3]?n[8].length:null),o&256&&(r.threadData=n[25]),!t&&o&2048&&(t=!0,r.threadElement=n[11][n[27]],Be(()=>t=!1)),e.$set(r)},i(a){i||(I(e.$$.fragment,a),i=!0)},o(a){A(e.$$.fragment,a),i=!1},d(a){te(e,a)}}}function sr(n){let e,t,i={listElement:n[9]??n[12],hasMore:n[3]&&n[1]&&!n[5]};return e=new _u({props:i}),n[22](e),e.$on("loadMore",n[16]),{c(){ie(e.$$.fragment)},m(s,l){ne(e,s,l),t=!0},p(s,l){const a={};l&4608&&(a.listElement=s[9]??s[12]),l&42&&(a.hasMore=s[3]&&s[1]&&!s[5]),e.$set(a)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){n[22](null),te(e,s)}}}function lr(n){let e,t,i,s=(n[1]&&!n[5]||n[6])&&ar(n),l=!n[1]&&!n[6]&&or(n);return{c(){s&&s.c(),e=W(),l&&l.c(),t=Ye()},m(a,o){s&&s.m(a,o),P(a,e,o),l&&l.m(a,o),P(a,t,o),i=!0},p(a,o){a[1]&&!a[5]||a[6]?s?(s.p(a,o),o&98&&I(s,1)):(s=ar(a),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(me(),A(s,1,1,()=>{s=null}),he()),!a[1]&&!a[6]?l?(l.p(a,o),o&66&&I(l,1)):(l=or(a),l.c(),I(l,1),l.m(t.parentNode,t)):l&&(me(),A(l,1,1,()=>{l=null}),he())},i(a){i||(I(s),I(l),i=!0)},o(a){A(s),A(l),i=!1},d(a){a&&(R(e),R(t)),s&&s.d(a),l&&l.d(a)}}}function ar(n){let e,t;return e=new ns({props:{text:n[7]||n[14].loading}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&128&&(l.text=i[7]||i[14].loading),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function or(n){let e,t;return e=new Yn({props:{id:n[13],cssClass:"itsl-im2__show-more-button",type:"plain",htmlType:"button",text:n[10]||n[14].showMoreConversations}}),e.$on("click",n[17]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const l={};s&8192&&(l.id=i[13]),s&1024&&(l.text=i[10]||i[14].showMoreConversations),e.$set(l)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function tg(n){let e,t,i,s,l,a,o=n[2]&&tr(n),r=en(n[8]),u=[];for(let h=0;h<r.length;h+=1)u[h]=ir(nr(n,r,h));const f=h=>A(u[h],1,1,()=>{u[h]=null});let d=n[2]&&sr(n),c=n[3]&&lr(n);return{c(){e=B("div"),o&&o.c(),t=W(),i=B("div");for(let h=0;h<u.length;h+=1)u[h].c();s=W(),d&&d.c(),l=W(),c&&c.c(),m(i,"role","feed"),m(e,"class","itsl-im2__thread-list")},m(h,p){P(h,e,p),o&&o.m(e,null),S(e,t),S(e,i);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(i,null);S(e,s),d&&d.m(e,null),S(e,l),c&&c.m(e,null),n[23](e),a=!0},p(h,[p]){if(h[2]?o?(o.p(h,p),p&4&&I(o,1)):(o=tr(h),o.c(),I(o,1),o.m(e,t)):o&&(me(),A(o,1,1,()=>{o=null}),he()),p&2328){r=en(h[8]);let _;for(_=0;_<r.length;_+=1){const y=nr(h,r,_);u[_]?(u[_].p(y,p),I(u[_],1)):(u[_]=ir(y),u[_].c(),I(u[_],1),u[_].m(i,null))}for(me(),_=r.length;_<u.length;_+=1)f(_);he()}h[2]?d?(d.p(h,p),p&4&&I(d,1)):(d=sr(h),d.c(),I(d,1),d.m(e,l)):d&&(me(),A(d,1,1,()=>{d=null}),he()),h[3]?c?(c.p(h,p),p&8&&I(c,1)):(c=lr(h),c.c(),I(c,1),c.m(e,null)):c&&(me(),A(c,1,1,()=>{c=null}),he())},i(h){if(!a){I(o);for(let p=0;p<r.length;p+=1)I(u[p]);I(d),I(c),a=!0}},o(h){A(o),u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)A(u[p]);A(d),A(c),a=!1},d(h){h&&R(e),o&&o.d(),Vn(u,h),d&&d.d(),c&&c.d(),n[23](null)}}}function ig(n,e,t){let i,{enableAutoLoading:s=!0}=e,{hasMore:l}=e,{idPrefix:a=""}=e,{infiniteScroll:o}=e,{isAutoLoadingOn:r}=e,{isLoadingError:u}=e,{loadingMore:f}=e,{loadingStateText:d=""}=e,{messageThreadsArray:c=[]}=e,{scrollableArea:h}=e,{showMoreButtonText:p=""}=e;const _=Qe(),y=re.i18n;let k=[],g;function b(){return document.getElementById(i)??(k==null?void 0:k[(k==null?void 0:k.length)-1])}function w(){t(1,r=!r)}function M(L){_("loadMoreOnScroll",L.detail)}function C(){var L;(L=k==null?void 0:k[(k==null?void 0:k.length)-1])==null||L.focus(),_("loadMore")}function v(L){r=L,t(1,r)}function T(L,O){n.$$.not_equal(k[O],L)&&(k[O]=L,t(11,k))}function E(L){J.call(this,n,L)}function N(L){le[L?"unshift":"push"](()=>{o=L,t(0,o)})}function F(L){le[L?"unshift":"push"](()=>{g=L,t(12,g)})}return n.$$set=L=>{"enableAutoLoading"in L&&t(2,s=L.enableAutoLoading),"hasMore"in L&&t(3,l=L.hasMore),"idPrefix"in L&&t(4,a=L.idPrefix),"infiniteScroll"in L&&t(0,o=L.infiniteScroll),"isAutoLoadingOn"in L&&t(1,r=L.isAutoLoadingOn),"isLoadingError"in L&&t(5,u=L.isLoadingError),"loadingMore"in L&&t(6,f=L.loadingMore),"loadingStateText"in L&&t(7,d=L.loadingStateText),"messageThreadsArray"in L&&t(8,c=L.messageThreadsArray),"scrollableArea"in L&&t(9,h=L.scrollableArea),"showMoreButtonText"in L&&t(10,p=L.showMoreButtonText)},n.$$.update=()=>{n.$$.dirty&2048&&t(11,k=k.filter(L=>L)),n.$$.dirty&16&&t(13,i=`${a}itsl-im2__show-more-button`)},[o,r,s,l,a,u,f,d,c,h,p,k,g,i,y,w,M,C,b,v,T,E,N,F]}class Ru extends Ue{constructor(e){super(),De(this,e,ig,tg,Le,{enableAutoLoading:2,hasMore:3,idPrefix:4,infiniteScroll:0,isAutoLoadingOn:1,isLoadingError:5,loadingMore:6,loadingStateText:7,messageThreadsArray:8,scrollableArea:9,showMoreButtonText:10,getLastElement:18})}get getLastElement(){return this.$$.ctx[18]}}function rr(n){let e;return{c(){e=B("span"),e.textContent="*",m(e,"aria-hidden","true"),m(e,"class","prom-input__required-star")},m(t,i){P(t,e,i)},d(t){t&&R(e)}}}function ur(n){let e,t;return{c(){e=B("span"),t=ge(n[6]),m(e,"id",n[1]),m(e,"class","prom-checkbox__description")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s&64&&Te(t,i[6]),s&2&&m(e,"id",i[1])},d(i){i&&R(e)}}}function fr(n){let e,t;return{c(){e=B("span"),t=ge(n[9]),m(e,"class","prom-error-message--shown")},m(i,s){P(i,e,s),S(e,t)},p(i,s){s&512&&Te(t,i[9])},d(i){i&&R(e)}}}function sg(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g,b=n[5]&&rr(),w=n[6]&&ur(n),M=n[8]&&n[9]&&fr(n);return{c(){e=B("div"),t=B("label"),i=B("input"),l=W(),a=B("span"),r=W(),u=B("span"),f=ge(n[11]),d=W(),b&&b.c(),p=W(),w&&w.c(),_=W(),y=B("div"),M&&M.c(),m(i,"class","prom-checkbox__input"),m(i,"type","checkbox"),i.disabled=n[2],m(i,"name",n[4]),i.__value=n[7],hn(i,i.__value),m(i,"id",n[3]),i.required=n[5],m(i,"aria-describedby",s=n[6]?n[1]:void 0),m(a,"class",o="prom-checkbox__custom-check "+n[15]),m(u,"class",c="prom-checkbox__label-text "+n[14]),m(t,"class",h="prom-checkbox "+n[17]+" "+n[16]+" "+n[13]),m(y,"aria-live","polite"),m(y,"class","prom-error-message"),m(y,"id",n[12]),m(e,"class","prom-checkbox-wrapper")},m(C,v){P(C,e,v),S(e,t),S(t,i),n[24](i),i.checked=n[0],S(t,l),S(t,a),S(t,r),S(t,u),S(u,f),S(u,d),b&&b.m(u,null),S(e,p),w&&w.m(e,null),S(e,_),S(e,y),M&&M.m(y,null),k||(g=[Q(i,"change",n[25]),Q(i,"change",n[18])],k=!0)},p(C,[v]){v&4&&(i.disabled=C[2]),v&16&&m(i,"name",C[4]),v&128&&(i.__value=C[7],hn(i,i.__value)),v&8&&m(i,"id",C[3]),v&32&&(i.required=C[5]),v&66&&s!==(s=C[6]?C[1]:void 0)&&m(i,"aria-describedby",s),v&1&&(i.checked=C[0]),v&32768&&o!==(o="prom-checkbox__custom-check "+C[15])&&m(a,"class",o),v&2048&&Te(f,C[11]),C[5]?b||(b=rr(),b.c(),b.m(u,null)):b&&(b.d(1),b=null),v&16384&&c!==(c="prom-checkbox__label-text "+C[14])&&m(u,"class",c),v&204800&&h!==(h="prom-checkbox "+C[17]+" "+C[16]+" "+C[13])&&m(t,"class",h),C[6]?w?w.p(C,v):(w=ur(C),w.c(),w.m(e,_)):w&&(w.d(1),w=null),C[8]&&C[9]?M?M.p(C,v):(M=fr(C),M.c(),M.m(y,null)):M&&(M.d(1),M=null),v&4096&&m(y,"id",C[12])},i:we,o:we,d(C){C&&R(e),n[24](null),b&&b.d(),w&&w.d(),M&&M.d(),k=!1,nn(g)}}}function lg(n,e,t){let i,s,l,a,o,r;const u=Qe();let{checked:f=!1}=e,{disabled:d=!1}=e,{label:c=void 0}=e,{id:h=void 0}=e,{name:p=void 0}=e,{labelHidden:_=!1}=e,{small:y=!1}=e,{required:k=!1}=e,{description:g=void 0}=e,{describedBy:b=void 0}=e,{elementLegacyColor:w=""}=e,{courseColor:M=""}=e,{value:C=""}=e,{hasError:v=!1}=e,{errorMessage:T=void 0}=e,E,N;g&&!b&&(b="prom-checkbox__information_id-"+bs());function F(){u("change",{checked:f})}function L(j){le[j?"unshift":"push"](()=>{E=j,t(10,E)})}function O(){f=this.checked,t(0,f)}return n.$$set=j=>{"checked"in j&&t(0,f=j.checked),"disabled"in j&&t(2,d=j.disabled),"label"in j&&t(19,c=j.label),"id"in j&&t(3,h=j.id),"name"in j&&t(4,p=j.name),"labelHidden"in j&&t(20,_=j.labelHidden),"small"in j&&t(21,y=j.small),"required"in j&&t(5,k=j.required),"description"in j&&t(6,g=j.description),"describedBy"in j&&t(1,b=j.describedBy),"elementLegacyColor"in j&&t(22,w=j.elementLegacyColor),"courseColor"in j&&t(23,M=j.courseColor),"value"in j&&t(7,C=j.value),"hasError"in j&&t(8,v=j.hasError),"errorMessage"in j&&t(9,T=j.errorMessage)},n.$$.update=()=>{if(n.$$.dirty&4&&t(17,i=d?"disabled":""),n.$$.dirty&2097152&&t(16,s=y?"prom-checkbox--small":""),n.$$.dirty&12582912&&t(15,l=M||w),n.$$.dirty&524288){if(!c||typeof c!="string")throw new TypeError("Label must be supplied");t(11,N=c)}n.$$.dirty&1048576&&t(14,a=_?"screen-reader":""),n.$$.dirty&256&&t(13,o=v?"prom-checkbox--has-error":""),n.$$.dirty&8&&t(12,r=h+"__error-message")},[f,b,d,h,p,k,g,C,v,T,E,N,r,o,a,l,s,i,F,c,_,y,w,M,L,O]}class Cs extends Ue{constructor(e){super(),De(this,e,lg,sg,Le,{checked:0,disabled:2,label:19,id:3,name:4,labelHidden:20,small:21,required:5,description:6,describedBy:1,elementLegacyColor:22,courseColor:23,value:7,hasError:8,errorMessage:9})}}function dr(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g,b,w,M,C;i=new Bn({props:{ariaLabel:n[8].backTooltip,htmlType:"button",iconClass:"itsl-im2-shared__back-button",iconOnly:!0,id:n[4],large:!0,type:"plain"}}),i.$on("keydown",n[12]),i.$on("click",n[35]);function v(X){n[36](X)}let T={label:n[8].searchForMessages,placeholder:n[8].searchConversations,resultText:n[7]};n[6]!==void 0&&(T.value=n[6]),r=new Cu({props:T}),le.push(()=>Re(r,"value",v)),r.$on("clear",n[37]),r.$on("keydown",Ur),r.$on("keyup",n[10]);function E(X){n[38](X)}let N={label:n[8].unread,small:!0};n[2]!==void 0&&(N.checked=n[2]),c=new Cs({props:N}),le.push(()=>Re(c,"checked",E)),c.$on("change",n[9]);function F(X){n[39](X)}let L={label:n[8].sentByMe,small:!0};n[1]!==void 0&&(L.checked=n[1]),_=new Cs({props:L}),le.push(()=>Re(_,"checked",F)),_.$on("change",n[9]);function O(X){n[40](X)}let j={id:Pu,label:n[8].attachment,small:!0};n[0]!==void 0&&(j.checked=n[0]),g=new Cs({props:j}),le.push(()=>Re(g,"checked",O)),g.$on("change",n[9]);let ee=n[3]&&cr(n);return{c(){e=B("div"),t=B("header"),ie(i.$$.fragment),s=W(),l=B("h2"),l.textContent=`${n[8].search}`,a=W(),o=B("div"),ie(r.$$.fragment),f=W(),d=B("div"),ie(c.$$.fragment),p=W(),ie(_.$$.fragment),k=W(),ie(g.$$.fragment),w=W(),ee&&ee.c(),M=Ye(),m(l,"class","itsl-im2-shared__title"),m(l,"id","itsl-im2-search__title"),m(t,"aria-describedby","itsl-im2-search__title"),m(t,"class","itsl-im2-shared__header--layout itsl-im2-shared__header--padding--default itsl-im2-shared__header--padding--narrow-left "),m(o,"class","itsl-im2-shared__header--padding--default"),m(d,"class","itsl-im2-search__checkbox-container itsl-im2-shared__header--padding--default"),m(e,"class","itsl-im2-shared__header--theme itsl-im2-search__header ")},m(X,ue){P(X,e,ue),S(e,t),ne(i,t,null),S(t,s),S(t,l),S(e,a),S(e,o),ne(r,o,null),S(e,f),S(e,d),ne(c,d,null),S(d,p),ne(_,d,null),S(d,k),ne(g,d,null),P(X,w,ue),ee&&ee.m(X,ue),P(X,M,ue),C=!0},p(X,ue){const ke={};ue[0]&16&&(ke.id=X[4]),i.$set(ke);const ye={};ue[0]&128&&(ye.resultText=X[7]),!u&&ue[0]&64&&(u=!0,ye.value=X[6],Be(()=>u=!1)),r.$set(ye);const ae={};!h&&ue[0]&4&&(h=!0,ae.checked=X[2],Be(()=>h=!1)),c.$set(ae);const K={};!y&&ue[0]&2&&(y=!0,K.checked=X[1],Be(()=>y=!1)),_.$set(K);const pe={};!b&&ue[0]&1&&(b=!0,pe.checked=X[0],Be(()=>b=!1)),g.$set(pe),X[3]?ee?(ee.p(X,ue),ue[0]&8&&I(ee,1)):(ee=cr(X),ee.c(),I(ee,1),ee.m(M.parentNode,M)):ee&&(me(),A(ee,1,1,()=>{ee=null}),he())},i(X){C||(I(i.$$.fragment,X),I(r.$$.fragment,X),I(c.$$.fragment,X),I(_.$$.fragment,X),I(g.$$.fragment,X),I(ee),C=!0)},o(X){A(i.$$.fragment,X),A(r.$$.fragment,X),A(c.$$.fragment,X),A(_.$$.fragment,X),A(g.$$.fragment,X),A(ee),C=!1},d(X){X&&(R(e),R(w),R(M)),te(i),te(r),te(c),te(_),te(g),ee&&ee.d(X)}}}function cr(n){let e,t;return e=new ns({props:{text:n[8].loadingSearchResults}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p:we,i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function ag(n){let e,t,i,s=n[5]&&dr(n);return{c(){e=W(),s&&s.c(),t=Ye()},m(l,a){P(l,e,a),s&&s.m(l,a),P(l,t,a),i=!0},p(l,a){l[5]?s?(s.p(l,a),a[0]&32&&I(s,1)):(s=dr(l),s.c(),I(s,1),s.m(t.parentNode,t)):s&&(me(),A(s,1,1,()=>{s=null}),he())},i(l){i||(I(s),i=!0)},o(l){A(s),i=!1},d(l){l&&(R(e),R(t)),s&&s.d(l)}}}const Pu="itsl-im2-search__attachment-checkbox",mr=5;function Lu(){return document.getElementById(Pu)}function og(n,e,t){let i,s,{backToConversationsButtonId:l}=e,{hasMore:a}=e,{hasMoreThreadsByName:o}=e,{infiniteScroll:r}=e,{isAttachmentFilterChecked:u}=e,{isLoadingError:f}=e,{isSearchPerformed:d}=e,{isSentFilterChecked:c}=e,{isUnreadFilterChecked:h}=e,{isVisible:p}=e,{loadingInitialSearchResults:_}=e,{loadingMoreSearchResults:y}=e,{messageThreadsArray:k}=e,{searchResultMessageWithCount:g}=e,{searchString:b}=e,{threadsByNameSearchResultMessage:w}=e,{threadsByName:M}=e,{threadsByNameToShow:C}=e;const v=Qe(),T=re.i18n;let E=!1,N=!1,F=!1,L=[],O,j=0,ee,X;function ue(){be(),t(6,ee=""),t(17,b=""),t(0,u=!1),t(1,c=!1),t(2,h=!1)}function ke(){ae(ee,!0)}function ye(q){Ke(q.key)===ce.ENTER&&ae(ee)}async function ae(q,fe=!1){!fe&&q===b||(be(),t(17,b=q),(b.length>0||i)&&(i?await K():await Promise.all([K(),Y()]),await ln(),(k==null?void 0:k.length)===0&&pe(),r==null||r.tryLoadMore()))}async function K(){const q=j===0;q?t(31,N=!0):t(21,y=!0);let fe;try{fe=$f({attachmentFilter:u,maxThreadCount:xt.default,searchText:b,sentFilter:c,threadPageIndex:j,unreadFilter:h}),O=fe;const Ne=await fe;O===fe&&(t(34,j++,j),t(33,L=Ne.EntityArray),t(19,a=L.length===xt.default)),t(20,f=!1)}catch(Ne){O===fe&&rt(v,Ne),t(20,f=!0)}finally{O===fe&&(O=void 0,q?t(31,N=!1):t(21,y=!1))}}function pe(){t(30,E=!0)}async function Y(){t(30,E=!1),t(32,F=!0);let q;try{q=ed(b),X=q;const fe=await q;X===q&&t(18,M=fe)}catch(fe){X===q&&rt(v,fe)}finally{X===q&&(X=void 0,t(32,F=!1))}}function qe(q){Ke(q.key)===ce.TAB&&q.shiftKey&&(v("focusLastElement"),q.preventDefault())}function Ce(){ue(),Xe(),v("backFromSearchMessageThreads")}function be(){O=void 0,X=void 0,t(31,N=!1),t(32,F=!1),t(21,y=!1),t(16,k=[]),t(18,M=[]),t(30,E=!1),t(34,j=0)}function Xe(){We(Se.session,Se.genericErrorMessage)}function We(...q){v("resolveError",{errorTypes:q})}const je=()=>Ce();function se(q){ee=q,t(6,ee)}const x=()=>ae("");function Me(q){h=q,t(2,h)}function V(q){c=q,t(1,c)}function H(q){u=q,t(0,u)}return n.$$set=q=>{"backToConversationsButtonId"in q&&t(4,l=q.backToConversationsButtonId),"hasMore"in q&&t(19,a=q.hasMore),"hasMoreThreadsByName"in q&&t(14,o=q.hasMoreThreadsByName),"infiniteScroll"in q&&t(25,r=q.infiniteScroll),"isAttachmentFilterChecked"in q&&t(0,u=q.isAttachmentFilterChecked),"isLoadingError"in q&&t(20,f=q.isLoadingError),"isSearchPerformed"in q&&t(15,d=q.isSearchPerformed),"isSentFilterChecked"in q&&t(1,c=q.isSentFilterChecked),"isUnreadFilterChecked"in q&&t(2,h=q.isUnreadFilterChecked),"isVisible"in q&&t(5,p=q.isVisible),"loadingInitialSearchResults"in q&&t(3,_=q.loadingInitialSearchResults),"loadingMoreSearchResults"in q&&t(21,y=q.loadingMoreSearchResults),"messageThreadsArray"in q&&t(16,k=q.messageThreadsArray),"searchResultMessageWithCount"in q&&t(22,g=q.searchResultMessageWithCount),"searchString"in q&&t(17,b=q.searchString),"threadsByNameSearchResultMessage"in q&&t(23,w=q.threadsByNameSearchResultMessage),"threadsByName"in q&&t(18,M=q.threadsByName),"threadsByNameToShow"in q&&t(24,C=q.threadsByNameToShow)},n.$$.update=()=>{n.$$.dirty[1]&3&&t(3,_=N||F),n.$$.dirty[0]&7&&(i=u||c||h),n.$$.dirty[0]&1074003968&&t(14,o=!E&&(M==null?void 0:M.length)>mr),n.$$.dirty[0]&278528&&t(24,C=o?M.slice(0,mr):M),n.$$.dirty[0]&65536|n.$$.dirty[1]&4&&(t(16,k=[...k,...L].sort((q,fe)=>fe.SortIndex-q.SortIndex)),t(33,L=[])),n.$$.dirty[0]&8|n.$$.dirty[1]&8&&t(15,d=!_&&j>0),n.$$.dirty[0]&98304&&t(7,s=d&&k?$(k.length===1?T.xResult:T.xResults,k.length):""),n.$$.dirty[0]&393216&&t(23,w=M.length===1?kn(T.oneConversationMatchingX,b):kn(T.xConversationsMatchingY,M.length,b)),n.$$.dirty[0]&196615&&t(22,g=Vd(b,h,c,u,k.length))},[u,c,h,_,l,p,ee,s,T,ke,ye,ae,qe,Ce,o,d,k,b,M,a,f,y,g,w,C,r,ue,Lu,K,pe,E,N,F,L,j,je,se,x,Me,V,H]}class rg extends Ue{constructor(e){super(),De(this,e,og,ag,Le,{backToConversationsButtonId:4,hasMore:19,hasMoreThreadsByName:14,infiniteScroll:25,isAttachmentFilterChecked:0,isLoadingError:20,isSearchPerformed:15,isSentFilterChecked:1,isUnreadFilterChecked:2,isVisible:5,loadingInitialSearchResults:3,loadingMoreSearchResults:21,messageThreadsArray:16,searchResultMessageWithCount:22,searchString:17,threadsByNameSearchResultMessage:23,threadsByName:18,threadsByNameToShow:24,cancelSearch:26,getLastHeaderElement:27,loadMessageThreads:28,loadMoreThreadsByName:29},null,[-1,-1])}get cancelSearch(){return this.$$.ctx[26]}get getLastHeaderElement(){return Lu}get loadMessageThreads(){return this.$$.ctx[28]}get loadMoreThreadsByName(){return this.$$.ctx[29]}}const{window:vt}=Ws;function hr(n){let e,t,i,s,l,a,o=(n[44]||n[5].length>0)&&gr(n);return l=new Yn({props:{id:Hs,type:"primary",text:n[45].buttonCaptionNew,htmlType:"button",large:!0}}),l.$on("keydown",n[51]),l.$on("click",n[70]),{c(){e=B("header"),t=B("h2"),t.textContent=`${n[45].messagesHeader}`,i=W(),o&&o.c(),s=W(),ie(l.$$.fragment),m(t,"class","itsl-im2-shared__title"),m(t,"id","itsl-im2-overlay__title"),m(e,"aria-describedby","itsl-im2-overlay__title"),m(e,"class","itsl-im2-overlay__header itsl-im2-shared__header--layout itsl-im2-shared__header--theme itsl-im2-shared__header--padding--default itsl-im2-shared__header--padding--narrow-right ")},m(r,u){P(r,e,u),S(e,t),S(e,i),o&&o.m(e,null),S(e,s),ne(l,e,null),a=!0},p(r,u){r[44]||r[5].length>0?o?(o.p(r,u),u[0]&32|u[1]&8192&&I(o,1)):(o=gr(r),o.c(),I(o,1),o.m(e,s)):o&&(me(),A(o,1,1,()=>{o=null}),he())},i(r){a||(I(o),I(l.$$.fragment,r),a=!0)},o(r){A(o),A(l.$$.fragment,r),a=!1},d(r){r&&R(e),o&&o.d(),te(l)}}}function gr(n){let e,t;return e=new Bn({props:{ariaLabel:n[45].search,htmlType:"button",iconClass:"itsl-im2-overlay__search-button",iconOnly:!0,id:rs,type:"plain"}}),e.$on("keydown",n[50]),e.$on("click",n[77]),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p:we,i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function _r(n){let e,t,i,s;const l=[fg,ug],a=[];function o(r,u){return r[44]?0:1}return e=o(n),t=a[e]=l[e](n),{c(){t.c(),i=Ye()},m(r,u){a[e].m(r,u),P(r,i,u),s=!0},p(r,u){let f=e;e=o(r),e===f?a[e].p(r,u):(me(),A(a[f],1,1,()=>{a[f]=null}),he(),t=a[e],t?t.p(r,u):(t=a[e]=l[e](r),t.c()),I(t,1),t.m(i.parentNode,i))},i(r){s||(I(t),s=!0)},o(r){A(t),s=!1},d(r){r&&R(i),a[e].d(r)}}}function ug(n){let e,t,i,s,l,a,o=n[0]===fn.threadList&&n[5].length===0&&br(n),r=(n[0]===fn.threadList||n[0]===fn.search)&&pr(n);const u=[cg,dg],f=[];function d(c,h){return c[0]===fn.conversation?0:c[0]===fn.newMessage?1:-1}return~(i=d(n))&&(s=f[i]=u[i](n)),{c(){o&&o.c(),e=W(),r&&r.c(),t=W(),s&&s.c(),l=Ye()},m(c,h){o&&o.m(c,h),P(c,e,h),r&&r.m(c,h),P(c,t,h),~i&&f[i].m(c,h),P(c,l,h),a=!0},p(c,h){c[0]===fn.threadList&&c[5].length===0?o?(o.p(c,h),h[0]&33&&I(o,1)):(o=br(c),o.c(),I(o,1),o.m(e.parentNode,e)):o&&(me(),A(o,1,1,()=>{o=null}),he()),c[0]===fn.threadList||c[0]===fn.search?r?(r.p(c,h),h[0]&1&&I(r,1)):(r=pr(c),r.c(),I(r,1),r.m(t.parentNode,t)):r&&(me(),A(r,1,1,()=>{r=null}),he());let p=i;i=d(c),i===p?~i&&f[i].p(c,h):(s&&(me(),A(f[p],1,1,()=>{f[p]=null}),he()),~i?(s=f[i],s?s.p(c,h):(s=f[i]=u[i](c),s.c()),I(s,1),s.m(l.parentNode,l)):s=null)},i(c){a||(I(o),I(r),I(s),a=!0)},o(c){A(o),A(r),A(s),a=!1},d(c){c&&(R(e),R(t),R(l)),o&&o.d(c),r&&r.d(c),~i&&f[i].d(c)}}}function fg(n){let e,t;return e=new ns({props:{text:n[45].loading}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p:we,i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function br(n){let e,t;return e=new gu({props:{description:n[45].overlayEmptyStateDescription,headingLevel:"h3",iconName:"messages",title:n[45].emptyMessageTitle}}),{c(){ie(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p:we,i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){A(e.$$.fragment,i),t=!1},d(i){te(e,i)}}}function pr(n){let e,t,i,s=n[0]===fn.search&&wr(n),l=n[41]&&Mr(n);return{c(){e=B("div"),s&&s.c(),t=W(),l&&l.c(),m(e,"class","itsl-im2-overlay__scrollable-area"),m(e,"tabindex","-1")},m(a,o){P(a,e,o),s&&s.m(e,null),S(e,t),l&&l.m(e,null),n[102](e),i=!0},p(a,o){a[0]===fn.search?s?(s.p(a,o),o[0]&1&&I(s,1)):(s=wr(a),s.c(),I(s,1),s.m(e,t)):s&&(me(),A(s,1,1,()=>{s=null}),he()),a[41]?l?(l.p(a,o),o[1]&1024&&I(l,1)):(l=Mr(a),l.c(),I(l,1),l.m(e,null)):l&&(me(),A(l,1,1,()=>{l=null}),he())},i(a){i||(I(s),I(l),i=!0)},o(a){A(s),A(l),i=!1},d(a){a&&R(e),s&&s.d(),l&&l.d(),n[102](null)}}}function wr(n){let e,t,i,s=!n[4]&&n[7].length>0&&kr(n),l=n[3]&&!n[40]&&Tr(n);return{c(){s&&s.c(),e=W(),l&&l.c(),t=Ye()},m(a,o){s&&s.m(a,o),P(a,e,o),l&&l.m(a,o),P(a,t,o),i=!0},p(a,o){!a[4]&&a[7].length>0?s?(s.p(a,o),o[0]&144&&I(s,1)):(s=kr(a),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(me(),A(s,1,1,()=>{s=null}),he()),a[3]&&!a[40]?l?l.p(a,o):(l=Tr(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i(a){i||(I(s),i=!0)},o(a){A(s),i=!1},d(a){a&&(R(e),R(t)),s&&s.d(a),l&&l.d(a)}}}function kr(n){let e,t,i,s,l={enableAutoLoading:!1,idPrefix:"itsl-im2-search-",hasMore:n[17],messageThreadsArray:n[7],showMoreButtonText:n[45].allConversationResults};return i=new Ru({props:l}),n[97](i),i.$on("loadMore",n[98]),i.$on("openConversation",n[48]),{c(){e=B("div"),t=W(),ie(i.$$.fragment),m(e,"class","itsl-im2-search__search-results")},m(a,o){P(a,e,o),e.innerHTML=n[38],P(a,t,o),ne(i,a,o),s=!0},p(a,o){(!s||o[1]&128)&&(e.innerHTML=a[38]);const r={};o[0]&131072&&(r.hasMore=a[17]),o[0]&128&&(r.messageThreadsArray=a[7]),i.$set(r)},i(a){s||(I(i.$$.fragment,a),s=!0)},o(a){A(i.$$.fragment,a),s=!1},d(a){a&&(R(e),R(t)),n[97](null),te(i,a)}}}function Tr(n){let e;return{c(){e=B("div"),m(e,"class","itsl-im2-search__search-results")},m(t,i){P(t,e,i),e.innerHTML=n[33]},p(t,i){i[1]&4&&(e.innerHTML=t[33])},d(t){t&&R(e)}}}function Mr(n){let e,t,i,s;function l(r){n[99](r)}function a(r){n[100](r)}let o={hasMore:n[8]?n[16]:n[15],isLoadingError:n[8]?n[20]:n[19],loadingMore:n[8]?n[24]:n[23],loadingStateText:n[8]?n[45].loadingSearchResults:"",messageThreadsArray:n[9],scrollableArea:n[28]};return n[2]!==void 0&&(o.infiniteScroll=n[2]),n[18]!==void 0&&(o.isAutoLoadingOn=n[18]),e=new Ru({props:o}),le.push(()=>Re(e,"infiniteScroll",l)),le.push(()=>Re(e,"isAutoLoadingOn",a)),n[101](e),e.$on("loadMore",n[53]),e.$on("loadMoreOnScroll",n[52]),e.$on("openConversation",n[49]),{c(){ie(e.$$.fragment)},m(r,u){ne(e,r,u),s=!0},p(r,u){const f={};u[0]&98560&&(f.hasMore=r[8]?r[16]:r[15]),u[0]&1573120&&(f.isLoadingError=r[8]?r[20]:r[19]),u[0]&25166080&&(f.loadingMore=r[8]?r[24]:r[23]),u[0]&256&&(f.loadingStateText=r[8]?r[45].loadingSearchResults:""),u[0]&512&&(f.messageThreadsArray=r[9]),u[0]&268435456&&(f.scrollableArea=r[28]),!t&&u[0]&4&&(t=!0,f.infiniteScroll=r[2],Be(()=>t=!1)),!i&&u[0]&262144&&(i=!0,f.isAutoLoadingOn=r[18],Be(()=>i=!1)),e.$set(f)},i(r){s||(I(e.$$.fragment,r),s=!0)},o(r){A(e.$$.fragment,r),s=!1},d(r){n[101](null),te(e,r)}}}function dg(n){let e,t,i,s;function l(r){n[111](r)}function a(r){n[112](r)}let o={};return n[25]!==void 0&&(o.newMessageExtraBanner=n[25]),n[26]!==void 0&&(o.selectedRecipients=n[26]),e=new Iu({props:o}),le.push(()=>Re(e,"newMessageExtraBanner",l)),le.push(()=>Re(e,"selectedRecipients",a)),e.$on("addOrUpdateThread",n[71]),e.$on("backFromNewMessageView",n[61]),e.$on("openConversation",n[49]),e.$on("raiseError",n[67]),e.$on("refreshErrors",n[60]),e.$on("resolveError",n[68]),{c(){ie(e.$$.fragment)},m(r,u){ne(e,r,u),s=!0},p(r,u){const f={};!t&&u[0]&33554432&&(t=!0,f.newMessageExtraBanner=r[25],Be(()=>t=!1)),!i&&u[0]&67108864&&(i=!0,f.selectedRecipients=r[26],Be(()=>i=!1)),e.$set(f)},i(r){s||(I(e.$$.fragment,r),s=!0)},o(r){A(e.$$.fragment,r),s=!1},d(r){te(e,r)}}}function cg(n){let e=n[36].id,t,i,s=yr(n);return{c(){s.c(),t=Ye()},m(l,a){s.m(l,a),P(l,t,a),i=!0},p(l,a){a[1]&32&&Le(e,e=l[36].id)?(me(),A(s,1,1,we),he(),s=yr(l),s.c(),I(s,1),s.m(t.parentNode,t)):s.p(l,a)},i(l){i||(I(s),i=!0)},o(l){A(s),i=!1},d(l){l&&R(t),s.d(l)}}}function yr(n){let e,t,i,s,l,a,o,r,u,f;function d(w){n[103](w)}function c(w){n[104](w)}function h(w){n[105](w)}function p(w){n[106](w)}function _(w){n[107](w)}function y(w){n[108](w)}function k(w){n[109](w)}function g(w){n[110](w)}let b={errors:n[1],isSearchAllConversationsMode:n[14],isSearchByConversationName:n[21],parentOverlay:n[27],threadId:n[36].id};return n[12]!==void 0&&(b.bannerText=n[12]),n[13]!==void 0&&(b.bannerVisible=n[13]),n[36]!==void 0&&(b.conversationData=n[36]),n[25]!==void 0&&(b.newMessageExtraBanner=n[25]),n[30]!==void 0&&(b.searchIsAttachmentFilterChecked=n[30]),n[31]!==void 0&&(b.searchIsSentFilterChecked=n[31]),n[32]!==void 0&&(b.searchIsUnreadFilterChecked=n[32]),n[34]!==void 0&&(b.searchString=n[34]),e=new J1({props:b}),le.push(()=>Re(e,"bannerText",d)),le.push(()=>Re(e,"bannerVisible",c)),le.push(()=>Re(e,"conversationData",h)),le.push(()=>Re(e,"newMessageExtraBanner",p)),le.push(()=>Re(e,"searchIsAttachmentFilterChecked",_)),le.push(()=>Re(e,"searchIsSentFilterChecked",y)),le.push(()=>Re(e,"searchIsUnreadFilterChecked",k)),le.push(()=>Re(e,"searchString",g)),e.$on("addOrUpdateThread",n[71]),e.$on("backToConversationList",n[61]),e.$on("cancelSearchAllConversations",n[62]),e.$on("deleteThread",n[63]),e.$on("openConversation",n[49]),e.$on("raiseError",n[67]),e.$on("refreshErrors",n[60]),e.$on("resolveError",n[68]),e.$on("showBannerOnConversationList",n[69]),e.$on("updateConversationData",n[54]),{c(){ie(e.$$.fragment)},m(w,M){ne(e,w,M),f=!0},p(w,M){const C={};M[0]&2&&(C.errors=w[1]),M[0]&16384&&(C.isSearchAllConversationsMode=w[14]),M[0]&2097152&&(C.isSearchByConversationName=w[21]),M[0]&134217728&&(C.parentOverlay=w[27]),M[1]&32&&(C.threadId=w[36].id),!t&&M[0]&4096&&(t=!0,C.bannerText=w[12],Be(()=>t=!1)),!i&&M[0]&8192&&(i=!0,C.bannerVisible=w[13],Be(()=>i=!1)),!s&&M[1]&32&&(s=!0,C.conversationData=w[36],Be(()=>s=!1)),!l&&M[0]&33554432&&(l=!0,C.newMessageExtraBanner=w[25],Be(()=>l=!1)),!a&&M[0]&1073741824&&(a=!0,C.searchIsAttachmentFilterChecked=w[30],Be(()=>a=!1)),!o&&M[1]&1&&(o=!0,C.searchIsSentFilterChecked=w[31],Be(()=>o=!1)),!r&&M[1]&2&&(r=!0,C.searchIsUnreadFilterChecked=w[32],Be(()=>r=!1)),!u&&M[1]&8&&(u=!0,C.searchString=w[34],Be(()=>u=!1)),e.$set(C)},i(w){f||(I(e.$$.fragment,w),f=!0)},o(w){A(e.$$.fragment,w),f=!1},d(w){te(e,w)}}}function mg(n){let e,t,i,s,l,a,o,r,u,f,d,c,h,p,_,y,k,g,b,w,M,C,v,T,E,N,F=!n[1].includes(Se.loading),L,O,j;t=new Qt({props:{closable:!1,text:n[25].text,type:n[25].type,visible:n[25].visible}}),s=new Qt({props:{visible:n[42],text:n[43],type:"warning",close:n[45].close}}),s.$on("hidden",n[75]),a=new Qt({props:{visible:n[11],text:n[10],type:"info",close:n[45].close}}),a.$on("hidden",n[76]);let ee=n[0]===fn.threadList&&hr(n);function X(H){n[78](H)}function ue(H){n[79](H)}function ke(H){n[80](H)}function ye(H){n[81](H)}function ae(H){n[82](H)}function K(H){n[83](H)}function pe(H){n[84](H)}function Y(H){n[85](H)}function qe(H){n[86](H)}function Ce(H){n[87](H)}function be(H){n[88](H)}function Xe(H){n[89](H)}function We(H){n[90](H)}function je(H){n[92](H)}function se(H){n[93](H)}function x(H){n[94](H)}let Me={backToConversationsButtonId:Nu,isVisible:n[0]===fn.search};n[16]!==void 0&&(Me.hasMore=n[16]),n[17]!==void 0&&(Me.hasMoreThreadsByName=n[17]),n[2]!==void 0&&(Me.infiniteScroll=n[2]),n[30]!==void 0&&(Me.isAttachmentFilterChecked=n[30]),n[20]!==void 0&&(Me.isLoadingError=n[20]),n[3]!==void 0&&(Me.isSearchPerformed=n[3]),n[31]!==void 0&&(Me.isSentFilterChecked=n[31]),n[32]!==void 0&&(Me.isUnreadFilterChecked=n[32]),n[4]!==void 0&&(Me.loadingInitialSearchResults=n[4]),n[24]!==void 0&&(Me.loadingMoreSearchResults=n[24]),n[6]!==void 0&&(Me.messageThreadsArray=n[6]),n[33]!==void 0&&(Me.searchResultMessageWithCount=n[33]),n[34]!==void 0&&(Me.searchString=n[34]),n[35]!==void 0&&(Me.threadsByName=n[35]),n[38]!==void 0&&(Me.threadsByNameSearchResultMessage=n[38]),n[7]!==void 0&&(Me.threadsByNameToShow=n[7]),u=new rg({props:Me}),le.push(()=>Re(u,"hasMore",X)),le.push(()=>Re(u,"hasMoreThreadsByName",ue)),le.push(()=>Re(u,"infiniteScroll",ke)),le.push(()=>Re(u,"isAttachmentFilterChecked",ye)),le.push(()=>Re(u,"isLoadingError",ae)),le.push(()=>Re(u,"isSearchPerformed",K)),le.push(()=>Re(u,"isSentFilterChecked",pe)),le.push(()=>Re(u,"isUnreadFilterChecked",Y)),le.push(()=>Re(u,"loadingInitialSearchResults",qe)),le.push(()=>Re(u,"loadingMoreSearchResults",Ce)),le.push(()=>Re(u,"messageThreadsArray",be)),le.push(()=>Re(u,"searchResultMessageWithCount",Xe)),le.push(()=>Re(u,"searchString",We)),n[91](u),le.push(()=>Re(u,"threadsByName",je)),le.push(()=>Re(u,"threadsByNameSearchResultMessage",se)),le.push(()=>Re(u,"threadsByNameToShow",x)),u.$on("backFromSearchMessageThreads",n[95]),u.$on("focusLastElement",n[96]),u.$on("raiseError",n[67]),u.$on("resolveError",n[68]);let V=F&&_r(n);return{c(){e=B("div"),ie(t.$$.fragment),i=W(),ie(s.$$.fragment),l=W(),ie(a.$$.fragment),o=W(),ee&&ee.c(),r=W(),ie(u.$$.fragment),N=W(),V&&V.c(),m(e,"class","itsl-im2-overlay"),m(e,"tabindex","-1")},m(H,q){P(H,e,q),ne(t,e,null),S(e,i),ne(s,e,null),S(e,l),ne(a,e,null),S(e,o),ee&&ee.m(e,null),S(e,r),ne(u,e,null),S(e,N),V&&V.m(e,null),n[113](e),L=!0,O||(j=[Q(vt,"NewSignalRInstantMessage2",n[64]),Q(vt,"SignalRConnectionStatus2",n[57]),Q(vt,"keyup",n[55]),Q(vt,"message",n[56]),Q(vt,"offline",n[58]),Q(vt,"online",n[59]),Q(vt,"openCollaborationThread",n[66]),Q(vt,"showNewMessageWithPreSelectedRecipients",n[65]),Q(e,"outClick",n[114]),wf(Of.call(null,e))],O=!0)},p(H,q){const fe={};q[0]&33554432&&(fe.text=H[25].text),q[0]&33554432&&(fe.type=H[25].type),q[0]&33554432&&(fe.visible=H[25].visible),t.$set(fe);const Ne={};q[1]&2048&&(Ne.visible=H[42]),q[1]&4096&&(Ne.text=H[43]),s.$set(Ne);const Ge={};q[0]&2048&&(Ge.visible=H[11]),q[0]&1024&&(Ge.text=H[10]),a.$set(Ge),H[0]===fn.threadList?ee?(ee.p(H,q),q[0]&1&&I(ee,1)):(ee=hr(H),ee.c(),I(ee,1),ee.m(e,r)):ee&&(me(),A(ee,1,1,()=>{ee=null}),he());const Ee={};q[0]&1&&(Ee.isVisible=H[0]===fn.search),!f&&q[0]&65536&&(f=!0,Ee.hasMore=H[16],Be(()=>f=!1)),!d&&q[0]&131072&&(d=!0,Ee.hasMoreThreadsByName=H[17],Be(()=>d=!1)),!c&&q[0]&4&&(c=!0,Ee.infiniteScroll=H[2],Be(()=>c=!1)),!h&&q[0]&1073741824&&(h=!0,Ee.isAttachmentFilterChecked=H[30],Be(()=>h=!1)),!p&&q[0]&1048576&&(p=!0,Ee.isLoadingError=H[20],Be(()=>p=!1)),!_&&q[0]&8&&(_=!0,Ee.isSearchPerformed=H[3],Be(()=>_=!1)),!y&&q[1]&1&&(y=!0,Ee.isSentFilterChecked=H[31],Be(()=>y=!1)),!k&&q[1]&2&&(k=!0,Ee.isUnreadFilterChecked=H[32],Be(()=>k=!1)),!g&&q[0]&16&&(g=!0,Ee.loadingInitialSearchResults=H[4],Be(()=>g=!1)),!b&&q[0]&16777216&&(b=!0,Ee.loadingMoreSearchResults=H[24],Be(()=>b=!1)),!w&&q[0]&64&&(w=!0,Ee.messageThreadsArray=H[6],Be(()=>w=!1)),!M&&q[1]&4&&(M=!0,Ee.searchResultMessageWithCount=H[33],Be(()=>M=!1)),!C&&q[1]&8&&(C=!0,Ee.searchString=H[34],Be(()=>C=!1)),!v&&q[1]&16&&(v=!0,Ee.threadsByName=H[35],Be(()=>v=!1)),!T&&q[1]&128&&(T=!0,Ee.threadsByNameSearchResultMessage=H[38],Be(()=>T=!1)),!E&&q[0]&128&&(E=!0,Ee.threadsByNameToShow=H[7],Be(()=>E=!1)),u.$set(Ee),q[0]&2&&(F=!H[1].includes(Se.loading)),F?V?(V.p(H,q),q[0]&2&&I(V,1)):(V=_r(H),V.c(),I(V,1),V.m(e,null)):V&&(me(),A(V,1,1,()=>{V=null}),he())},i(H){L||(I(t.$$.fragment,H),I(s.$$.fragment,H),I(a.$$.fragment,H),I(ee),I(u.$$.fragment,H),I(V),L=!0)},o(H){A(t.$$.fragment,H),A(s.$$.fragment,H),A(a.$$.fragment,H),A(ee),A(u.$$.fragment,H),A(V),L=!1},d(H){H&&R(e),te(t),te(s),te(a),ee&&ee.d(),n[91](null),te(u),V&&V.d(),n[113](null),O=!1,nn(j)}}}const Nu="itsl-im2-search__back-to-conversation-button",Ir="itsl-im2-content-area-iframe--im2-opened",Cr="itsl-im2-html--im2-opened",Hs="im2-overlay__new-message-button",rs="itsl-im2-overlay__search-button";function hg(n){const e=document.getElementById("itsl-profile-card-dialog");return e&&e.contains(n)}function vs(n,{bottom:e=!1}={}){const t=n.getBoundingClientRect();return`${Math.ceil(window.scrollY+(e?t.bottom:t.top))}px`}function gg(n,e,t){let i,s,l,a,o,r,u,f,d,c;yi(n,Gt,z=>t(120,d=z)),yi(n,$t,z=>t(121,c=z));const h=document.getElementById(re.contentAreaIframeClientId),p=[],_=re.i18n,y=document.getElementById(re.instantMessageButtonId),k=document.getElementById(re.instantMessageOverlayWrapperId),g=["InactiveParticipantFullName","NumberOfInactiveParticipants","Participants","ParticipantsCount"];let b,w,M,C,v,T,E=!0,N=[],F,L=!0,O,j,ee=!0,X=!1,ue=!1,ke=!1,ye=!1,ae,K,pe,Y,qe=!1,Ce=[],be=[],Xe={text:"",type:"warning",visible:!1},We=[],je,se,x,Me,V,H,q=[],fe=[],Ne="",Ge=[],Ee,gn,an,vn,dn,_e;nt(()=>Fe()),Af(()=>{K&&K.removeEventListener("keydown",pn),t(22,K=cn()),K&&K.addEventListener("keydown",pn)});async function Fe(){try{St.count=await ol()}catch{St.count=0}y.addEventListener("click",Ie),document.getElementById("l-header").addEventListener("keydown",z=>{[ce.TAB].includes(Ke(z.key))&&z.stopImmediatePropagation()})}function cn(){return(_e==null?void 0:_e.getLastElement())??(an==null?void 0:an.getLastElement())??document.getElementById(Hs)??document.getElementById(rs)??(x==null?void 0:x.getLastHeaderElement())}function Ie(){ke?In():Dn()}function on(){ad({url:re.measureKpiUrl,context:re.openInstantMessagesKpiSettings.measureContext,section:re.openInstantMessagesKpiSettings.measureSection,measurement:re.openInstantMessagesKpiSettings.measurement})}async function Dn(){var xe,$e,mn,Kn;t(18,ee=!0),k.style.display=null;const z=(xe=document.getElementsByClassName("prom-main-menu"))==null?void 0:xe[0];scroll({behavior:"instant",top:0}),($e=je==null?void 0:je.style)==null||$e.setProperty("--im2-overlay-offset-top",z?vs(z,{bottom:!0}):vs(k)),document.documentElement.classList.add(Cr),(mn=h==null?void 0:h.style)==null||mn.setProperty("--im2-content-area-iframe-offset-top",vs(h)),(Kn=h==null?void 0:h.classList)==null||Kn.add(Ir),ke=!0,En(fn.threadList);const ve=Z();on(),await ve,je.focus()}function In(){var z;k.style.display="none",document.documentElement.classList.remove(Cr),(z=h==null?void 0:h.classList)==null||z.remove(Ir),ke=!1,t(73,be=[]),t(5,Ce=[]),t(11,w=!1),t(1,N=[]),t(26,We=[]),t(25,Xe.visible=!1,Xe),t(72,E=!0),jt($t,c=!1,c),Je()}function Sn(z){var xe,$e;const ve=($e=(xe=z.detail)==null?void 0:xe.previousEvent)==null?void 0:$e.target;ve&&hg(ve)||ke&&(!z.detail||!z.detail.previousEvent||!y.contains(z.detail.previousEvent.target))&&In()}function En(z){t(11,w=!1),t(0,T=z),je.focus()}function Un(z){t(21,ye=!0),qn(z)}function Nn(z){t(21,ye=!1),qn(z)}function qn(z){t(36,Ee=z.detail.selectedThread),z.detail.forwardSuccess&&t(12,M=_.messageForwarded),t(13,C=z.detail.forwardSuccess),t(14,v=a),En(fn.conversation)}function Rn(z){Ke(z.key)===ce.TAB&&z.shiftKey&&(K.focus(),z.preventDefault())}function it(z){Ke(z.key)===ce.TAB&&z.shiftKey&&(document.getElementById(rs)||(K.focus(),z.preventDefault()))}function pn(z){if(Ke(z.key)===ce.TAB&&!z.shiftKey){const ve=a&&x?document.getElementById(Nu):document.getElementById(rs)||document.getElementById(Hs);ve==null||ve.focus(),z.preventDefault()}}async function Hn(z){await wn(),z.detail.onLoaded()}async function wn(){a&&x?await x.loadMessageThreads():await Xn()}async function Xn(){t(23,Y=!0);try{const z=await ll(u.SortIndex);t(73,be=z.Threads.EntityArray),t(15,F=z.HasMore),t(19,X=!1)}catch(z){rt(void 0,z,Pe),t(19,X=!0)}finally{t(23,Y=!1)}}function G(z){const{data:ve,newValue:xe,property:$e,threadId:mn}=z.detail,Kn=[fe.find(An=>An.InstantMessageThreadId===mn),Ce.find(An=>An.InstantMessageThreadId===mn),Ge.find(An=>An.InstantMessageThreadId===mn)].filter(An=>!!An);if(Kn.length!==0){if(ve&&ve.length)for(const{newValue:An,property:Xi}of ve)for(const Ki of Kn)Ki[Xi]=An;else for(const An of Kn)An[$e]=xe;t(36,Ee=ki(Kn[0]))}}async function Z(){try{const z=await ll();t(73,be=z.Threads.EntityArray),t(15,F=z.HasMore)}catch(z){rt(void 0,z,Pe)}finally{t(72,E=!1)}await ln(),j==null||j.tryLoadMore()}function Pe(z,ve){N.includes(z)||N.push(z),p[z]=ve||"",Gn()}function He(z){const ve=N.indexOf(z);ve>-1&&(N.splice(ve,1),p[z]="",Gn())}function Ze(z){return p[z]||Wf[z]}function Cn(z){Ke(z.key)===ce.ESCAPE&&ke&&!document.getElementsByClassName("prom-modal2__wrapper").length&&je.contains(z.target)&&(In(),y.focus())}function Pn(z){if(ke&&z.data)try{let ve;(ve=JSON.parse(z.data))&&(ve.messageName==="iframeClickBubble"||ve.messageName==="iframeTouchstartBubble")&&je.dispatchEvent(new CustomEvent("outClick"))}catch{}}function rn(z){z.detail.status?(t(74,gn=!0),jt(Gt,d=!0,d),He(Se.connection)):(jt(Gt,d=!1,d),Pe(Se.connection))}function tn(){jt(Gt,d=!1,d),Pe(Se.connection)}function Mn(){jt(Gt,d=!0,d),He(Se.connection)}function Gn(){t(1,N)}function Wn(){En(v?fn.search:fn.threadList),Gn()}function Je(){t(14,v=!1),t(21,ye=!1),x==null||x.cancelSearch()}function ft(z){const ve=Ce.findIndex(xe=>xe.InstantMessageThreadId===z.detail.threadId);ve>-1&&Ce.splice(ve,1)}async function ii(z){const ve=z.detail.thread,xe=ve.Messages.EntityArray[0];if(ve&&xe&&xe.MessageId<ve.SortIndex)return;const $e=Ce.find(mn=>mn.InstantMessageThreadId===z.detail.thread.InstantMessageThreadId);if($e){const mn=T===fn.conversation&&Ee.id===$e.InstantMessageThreadId,Kn=us($e),An=z.detail.thread.LastMessage.CreatedBy===re.personId;!mn&&!Kn&&!An&&!xe.IsEdited&&!xe.IsDeleted&&St.count++;const Xi=$e.LastReadInstantMessageId;Ut($e,ve,{includeParticipantRelatedData:An}),mn&&t(36,Ee=ki($e)),ve.LastReadInstantMessageId||($e.LastReadInstantMessageId=Xi);const Ki=us(ve);Kn&&!Ki&&St.count--}else{if(xe.IsEdited||xe.IsDeleted)return;ke&&t(73,be=[z.detail.thread]),St.count=await ol()}}async function kt(z){ke||Dn(),En(fn.newMessage);const ve=z.detail,xe=typeof ve.PersonIds<"u"&&Array.isArray(ve.PersonIds)&&ve.PersonIds.length>0?await Zf(ve.PersonIds.filter(mn=>parseInt(mn,10)!==re.personId)):await Gf(ve),$e=Kr(xe);t(26,We=ve.keep?[...We,...$e.filter(mn=>We.every(({id:Kn,type:An})=>Kn!==mn.id||An!==mn.type))]:$e)}async function Si(z){Dn();const ve=ki(await Jf(z.detail.collaborationId));Nn({detail:{selectedThread:ve}})}function Ei(z){Pe(z.detail.errorType,z.detail.errorText)}function Ft(z){for(const ve of z.detail.errorTypes)He(ve)}function Ot(z){t(10,b=z.detail.bannerText),t(11,w=!0)}function Dt(){En(fn.newMessage)}function si(z){const ve=z.detail.threadData,xe=Ce.find($e=>$e.InstantMessageThreadId===ve.InstantMessageThreadId);xe?(Ut(xe,ve,{includeParticipantRelatedData:!0}),t(73,be=[])):t(73,be=[z.detail.threadData])}function Ut(z,ve,{includeParticipantRelatedData:xe}){for(const[$e,mn]of Object.entries(ve))(xe||!g.includes($e))&&(z[$e]=mn)}const Tt=()=>t(42,l=!1),Mt=()=>t(11,w=!1),_t=()=>En(fn.search);function Ai(z){L=z,t(16,L)}function Bi(z){O=z,t(17,O)}function bt(z){j=z,t(2,j)}function li(z){Me=z,t(30,Me)}function Ri(z){ue=z,t(20,ue)}function Ht(z){ae=z,t(3,ae)}function ai(z){V=z,t(31,V)}function pt(z){H=z,t(32,H)}function Pi(z){pe=z,t(4,pe)}function oi(z){qe=z,t(24,qe)}function Zn(z){fe=z,t(6,fe)}function ri(z){q=z,t(33,q)}function yt(z){Ne=z,t(34,Ne)}function Li(z){le[z?"unshift":"push"](()=>{x=z,t(29,x)})}function Ni(z){Ge=z,t(35,Ge)}function ui(z){vn=z,t(38,vn)}function fi(z){dn=z,t(7,dn)}const Wt=()=>En(fn.threadList),zt=()=>K.focus();function di(z){le[z?"unshift":"push"](()=>{an=z,t(37,an)})}const wt=()=>x==null?void 0:x.loadMoreThreadsByName();function Vt(z){j=z,t(2,j)}function qt(z){ee=z,t(18,ee)}function Fi(z){le[z?"unshift":"push"](()=>{_e=z,t(39,_e)})}function Oi(z){le[z?"unshift":"push"](()=>{se=z,t(28,se)})}function Di(z){M=z,t(12,M)}function Ui(z){C=z,t(13,C)}function Hi(z){Ee=z,t(36,Ee)}function Wi(z){Xe=z,t(25,Xe)}function Xt(z){Me=z,t(30,Me)}function zi(z){V=z,t(31,V)}function Vi(z){H=z,t(32,H)}function It(z){Ne=z,t(34,Ne)}function ci(z){Xe=z,t(25,Xe)}function Kt(z){We=z,t(26,We)}function qi(z){le[z?"unshift":"push"](()=>{je=z,t(27,je)})}const U=z=>Sn(z);return n.$$.update=()=>{n.$$.dirty[2]&5120&&t(44,i=E||!gn),n.$$.dirty[0]&2&&t(43,s=Ze(Math.min(...N))),n.$$.dirty[0]&2&&t(42,l=!!N.length),n.$$.dirty[0]&25&&t(8,a=T===fn.search&&(ae||pe)),n.$$.dirty[0]&261&&(async()=>{var z;await ln(),(z=j==null?void 0:j.tryLoadMore)==null||z.call(j)})(),n.$$.dirty[0]&32|n.$$.dirty[2]&2048&&(t(5,Ce=[...Ce,...be].sort((z,ve)=>ve.SortIndex-z.SortIndex)),t(73,be=[])),n.$$.dirty[0]&352&&t(9,o=a?fe:Ce),n.$$.dirty[0]&529&&t(41,r=(T===fn.threadList||T===fn.search)&&!pe&&o.length>0),n.$$.dirty[0]&32&&(u=Ce&&Ce[Ce.length-1]),n.$$.dirty[0]&192&&t(40,f=(dn==null?void 0:dn.length)>0&&(fe==null?void 0:fe.length)===0)},[T,N,j,ae,pe,Ce,fe,dn,a,o,b,w,M,C,v,F,L,O,ee,X,ue,ye,K,Y,qe,Xe,We,je,se,x,Me,V,H,q,Ne,Ge,Ee,an,vn,_e,f,r,l,s,i,_,Sn,En,Un,Nn,Rn,it,Hn,wn,G,Cn,Pn,rn,tn,Mn,Gn,Wn,Je,ft,ii,kt,Si,Ei,Ft,Ot,Dt,si,E,be,gn,Tt,Mt,_t,Ai,Bi,bt,li,Ri,Ht,ai,pt,Pi,oi,Zn,ri,yt,Li,Ni,ui,fi,Wt,zt,di,wt,Vt,qt,Fi,Oi,Di,Ui,Hi,Wi,Xt,zi,Vi,It,ci,Kt,qi,U]}class _g extends Ue{constructor(e){super(),De(this,e,gg,mg,Le,{},null,[-1,-1,-1,-1,-1])}}document.addEventListener("DOMContentLoaded",bg);function bg(){new _g({target:document.getElementById(re.instantMessageOverlayWrapperId)})}
//# sourceMappingURL=index-0d96dac9.js.map
